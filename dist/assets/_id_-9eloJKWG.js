import{x as O,s as Q,a as W,r as R,y as X,o as J,b as K,d as Z,e as l,f,g as t,p as n,h as p,i as r,k as d,j as u,t as o,n as tt,z as et,F as h,q as w}from"./index-EqsJQukp.js";import{u as st}from"./appeals-CM2mXlLj.js";import{c as ot,F as at,s as lt,_ as nt}from"./navItems-BcGEYHfz.js";import{A as rt}from"./arrow-left-D6W7qwCh.js";import{C as it}from"./calendar-QZZnOdG5.js";import{P as T,a as U,S as B,C as P}from"./square-pen-Dxp_N-5w.js";import{S as M}from"./share-2-DpALoOqW.js";import{D as dt}from"./download-BJtAvwcW.js";import{T as pt}from"./trash-2-DFi_VBzd.js";import{X as ut}from"./x-c6Y77DFi.js";import"./authHeader-DkpUnqMe.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ot("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),mt={class:"min-h-screen bg-gray-50"},xt={class:"bg-white border-b border-gray-200"},gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},yt={class:"flex items-center justify-between h-16"},bt={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ft={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},vt={class:"text-center"},ht={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wt={class:"flex items-center space-x-2 text-sm text-gray-600 mb-6"},_t={class:"text-gray-900"},kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},At={class:"lg:col-span-2 space-y-6"},Ct={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},St={class:"flex items-start justify-between mb-4"},jt={class:"text-3xl font-bold text-gray-900 mb-2"},Nt={class:"flex items-center space-x-4"},$t={class:"text-gray-600 flex items-center"},Dt={class:"flex items-center space-x-2"},Lt={class:"mb-6"},It={class:"flex justify-between text-sm text-gray-600 mb-2"},Rt={class:"w-full bg-gray-200 rounded-full h-3"},Tt={class:"flex justify-between text-sm text-gray-600 mt-2"},Ut={class:"prose prose-gray max-w-none"},Bt={class:"text-gray-700 leading-relaxed whitespace-pre-line"},Pt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ft={class:"text-gray-900"},Vt={class:"text-gray-900"},zt={class:"text-gray-900"},Et={key:0},qt={class:"text-gray-900"},Yt={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Gt={class:"space-y-3"},Ht={class:"text-gray-700"},Ot={class:"text-gray-900 font-medium"},Qt={key:1,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Wt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Xt={class:"flex items-center space-x-3"},Jt={class:"w-8 h-8 bg-coral-100 rounded-lg flex items-center justify-center"},Kt={class:"flex-1 min-w-0"},Zt={class:"text-sm font-medium text-gray-900 truncate"},te={class:"text-xs text-gray-500"},ee=["onClick"],se={key:2,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},oe={class:"space-y-4"},ae={class:"flex items-center space-x-3"},le={class:"w-10 h-10 bg-gradient-to-br from-coral-400 to-coral-600 rounded-full flex items-center justify-center"},ne={class:"text-white font-medium text-sm"},re={class:"font-medium text-gray-900"},ie={class:"text-sm text-gray-600"},de={class:"text-right"},pe={class:"font-medium text-coral-600"},ue={key:0,class:"text-xs text-gray-500 max-w-32 truncate"},ce={key:0,class:"mt-4 text-center"},me={class:"text-coral-500 hover:text-coral-700 text-sm font-medium"},xe={key:3,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},ge={class:"space-y-6"},ye={class:"flex items-center justify-between mb-2"},be={class:"font-medium text-gray-900"},fe={class:"text-sm text-gray-500"},ve={class:"text-gray-700 text-sm"},he={class:"space-y-6"},we={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},_e={class:"space-y-4"},ke={class:"flex justify-between"},Ae={class:"font-medium"},Ce={class:"flex justify-between"},Se={class:"font-medium text-coral-600"},je={class:"flex justify-between"},Ne={class:"font-medium"},$e={class:"flex justify-between"},De={class:"font-medium"},Le={class:"flex justify-between"},Ie={class:"font-medium"},Re={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Te={class:"space-y-3"},Ue={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Be={class:"bg-white rounded-2xl p-8 max-w-md w-full mx-4"},Pe={class:"flex items-center justify-between mb-6"},Me={class:"space-y-4"},Fe={class:"flex"},Ve=["value"],ze={class:"grid grid-cols-3 gap-3"},es={__name:"[id]",setup(Ee){const _=O(),F=Q(),g=st(),c=W(),A=R(!0),s=R(null),y=X({show:!1,link:""});J(async()=>{await V()});const V=async()=>{try{g.appeals.length===0&&g.initializeAppeals();let a=F.params.id;if(!a){const e=window.location.pathname.split("/");a=e[e.length-1]}a&&!isNaN(a)?s.value=g.getAppealById(parseInt(a)):(console.error("Invalid appeal ID:",a),s.value=null),A.value=!1}catch(a){console.error("Error loading appeal:",a),c.addNotification({type:"error",title:"Error loading appeal",message:"Could not load appeal data. Please try again."}),_.push("/student/appeals")}},z=a=>({active:"bg-green-100 text-green-700",completed:"bg-blue-100 text-blue-700",paused:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",draft:"bg-gray-100 text-gray-700"})[a]||"bg-gray-100 text-gray-700",E=a=>a.charAt(0).toUpperCase()+a.slice(1),v=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",C=()=>{g.updateAppealStatus(s.value.id,"paused"),s.value.status="paused",c.addNotification({type:"info",title:"Appeal paused",message:"Your appeal has been paused and is no longer visible to donors."})},S=()=>{g.updateAppealStatus(s.value.id,"active"),s.value.status="active",c.addNotification({type:"success",title:"Appeal resumed",message:"Your appeal is now active and visible to donors again."})},j=()=>{y.link=`${window.location.origin}/appeals/${s.value.id}`,y.show=!0},q=async()=>{try{await navigator.clipboard.writeText(y.link),c.addNotification({type:"success",title:"Link copied",message:"Appeal link has been copied to clipboard"})}catch{c.addNotification({type:"error",title:"Copy failed",message:"Failed to copy link to clipboard"})}},Y=()=>{const a={...s.value};delete a.id,a.title=`${s.value.title} (Copy)`,a.status="draft",a.raisedAmount=0,a.donations=[],a.createdAt=new Date().toISOString(),g.addAppeal(a),c.addNotification({type:"success",title:"Appeal duplicated",message:"A copy of your appeal has been created as a draft."}),_.push("/student/appeals")},G=()=>{confirm("Are you sure you want to delete this appeal? This action cannot be undone.")&&(g.deleteAppeal(s.value.id),c.addNotification({type:"success",title:"Appeal deleted",message:"Your appeal has been permanently deleted."}),_.push("/student/appeals"))},H=a=>{c.addNotification({type:"info",title:"Download started",message:`Downloading ${a.name}...`})},k=a=>{const e=y.link,m=`Help me raise funds for ${s.value.title}. ${(s.value.description||"").substring(0,100)}...`;let x="";switch(a){case"twitter":x=`https://twitter.com/intent/tweet?text=${encodeURIComponent(m)}&url=${encodeURIComponent(e)}`;break;case"facebook":x=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`;break;case"whatsapp":x=`https://wa.me/?text=${encodeURIComponent(m+" "+e)}`;break}x&&window.open(x,"_blank","width=600,height=400")};return(a,e)=>{const m=K("router-link");return l(),Z(nt,{"page-title":"","page-subtitle":"","navigation-items":d(lt)},{default:f(()=>{var x,N,$,D,L,I;return[t("div",mt,[t("div",xt,[t("div",gt,[t("div",yt,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Appeal Details"),t("p",{class:"text-sm text-gray-500"},"View and manage your funding appeal")],-1)),r(m,{to:"/student/appeals",class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:f(()=>[r(d(rt),{class:"h-5 w-5"}),e[4]||(e[4]=t("span",null,"Back to Appeals",-1))]),_:1,__:[4]})])])]),A.value?(l(),n("div",bt,e[6]||(e[6]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-coral-500 mx-auto"}),t("p",{class:"text-gray-600 mt-4"},"Loading appeal...")],-1)]))):s.value?(l(),n("div",ht,[t("nav",wt,[r(m,{to:"/student/appeals",class:"hover:text-coral-500"},{default:f(()=>e[10]||(e[10]=[u("My Appeals")])),_:1,__:[10]}),r(d(ct),{class:"w-4 h-4"}),t("span",_t,o(s.value.title),1)]),t("div",kt,[t("div",At,[t("div",Ct,[t("div",St,[t("div",null,[t("h1",jt,o(s.value.title),1),t("div",Nt,[t("span",{class:tt([z(s.value.status),"px-3 py-1 rounded-full text-sm font-medium"])},o(E(s.value.status)),3),t("span",$t,[r(d(it),{class:"w-4 h-4 mr-1"}),u(" Created "+o(v(s.value.createdAt)),1)])])]),t("div",Dt,[s.value.status==="active"?(l(),n("button",{key:0,onClick:C,class:"px-4 py-2 border border-yellow-300 text-yellow-700 rounded-lg hover:bg-yellow-50 transition-colors flex items-center space-x-1"},[r(d(T),{class:"w-4 h-4"}),e[11]||(e[11]=t("span",null,"Pause",-1))])):p("",!0),s.value.status==="paused"?(l(),n("button",{key:1,onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1"},[r(d(U),{class:"w-4 h-4"}),e[12]||(e[12]=t("span",null,"Resume",-1))])):p("",!0),r(m,{to:`/student/appeals/edit/${s.value.id}`,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-1"},{default:f(()=>[r(d(B),{class:"w-4 h-4"}),e[13]||(e[13]=t("span",null,"Edit",-1))]),_:1,__:[13]},8,["to"]),t("button",{onClick:j,class:"px-4 py-2 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors flex items-center space-x-1"},[r(d(M),{class:"w-4 h-4"}),e[14]||(e[14]=t("span",null,"Share",-1))])])]),t("div",Lt,[t("div",It,[e[15]||(e[15]=t("span",null,"Progress",-1)),t("span",null,"₦"+o((s.value.raisedAmount||0).toLocaleString())+" / ₦"+o((s.value.targetAmount||0).toLocaleString()),1)]),t("div",Rt,[t("div",{class:"bg-coral-500 h-3 rounded-full transition-all duration-300",style:et({width:Math.min((s.value.raisedAmount||0)/(s.value.targetAmount||1)*100,100)+"%"})},null,4)]),t("div",Tt,[t("span",null,o(Math.round((s.value.raisedAmount||0)/(s.value.targetAmount||1)*100))+"% funded",1),t("span",null,o(((x=s.value.donations)==null?void 0:x.length)||0)+" donors",1)])]),t("div",null,[e[16]||(e[16]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"My Story",-1)),t("div",Ut,[t("p",Bt,o(s.value.description||s.value.story||"No description provided."),1)])])]),t("div",Pt,[e[21]||(e[21]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Academic Information",-1)),t("div",Mt,[t("div",null,[e[17]||(e[17]=t("h3",{class:"text-sm font-medium text-gray-500"},"School/University",-1)),t("p",Ft,o(s.value.school||"Not specified"),1)]),t("div",null,[e[18]||(e[18]=t("h3",{class:"text-sm font-medium text-gray-500"},"Course of Study",-1)),t("p",Vt,o(s.value.course||"Not specified"),1)]),t("div",null,[e[19]||(e[19]=t("h3",{class:"text-sm font-medium text-gray-500"},"Academic Level",-1)),t("p",zt,o(s.value.level||"Not specified"),1)]),s.value.gpa?(l(),n("div",Et,[e[20]||(e[20]=t("h3",{class:"text-sm font-medium text-gray-500"},"GPA",-1)),t("p",qt,o(s.value.gpa),1)])):p("",!0)])]),(N=s.value.budgetItems)!=null&&N.length?(l(),n("div",Yt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Budget Breakdown",-1)),t("div",Gt,[(l(!0),n(h,null,w(s.value.budgetItems,(i,b)=>(l(),n("div",{key:b,class:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0"},[t("span",Ht,o(i.description),1),t("span",Ot,"₦"+o(i.amount.toLocaleString()),1)]))),128))])])):p("",!0),($=s.value.documents)!=null&&$.length?(l(),n("div",Qt,[e[23]||(e[23]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Supporting Documents",-1)),t("div",Wt,[(l(!0),n(h,null,w(s.value.documents,(i,b)=>(l(),n("div",{key:b,class:"border border-gray-200 rounded-lg p-4 hover:border-coral-300 transition-colors"},[t("div",Xt,[t("div",Jt,[r(d(at),{class:"w-4 h-4 text-coral-600"})]),t("div",Kt,[t("p",Zt,o(i.name),1),t("p",te,o(i.type),1)]),t("button",{onClick:qe=>H(i),class:"text-coral-500 hover:text-coral-700 transition-colors"},[r(d(dt),{class:"w-4 h-4"})],8,ee)])]))),128))])])):p("",!0),(D=s.value.donations)!=null&&D.length?(l(),n("div",se,[e[24]||(e[24]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Donations",-1)),t("div",oe,[(l(!0),n(h,null,w(s.value.donations.slice(0,5),(i,b)=>(l(),n("div",{key:b,class:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0"},[t("div",ae,[t("div",le,[t("span",ne,o(i.donor.charAt(0).toUpperCase()),1)]),t("div",null,[t("p",re,o(i.donor||"Anonymous"),1),t("p",ie,o(v(i.date)),1)])]),t("div",de,[t("p",pe,"₦"+o(i.amount.toLocaleString()),1),i.message?(l(),n("p",ue,o(i.message),1)):p("",!0)])]))),128))]),s.value.donations.length>5?(l(),n("div",ce,[t("button",me," View all "+o(s.value.donations.length)+" donations ",1)])):p("",!0)])):p("",!0),(L=s.value.updates)!=null&&L.length?(l(),n("div",xe,[e[25]||(e[25]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Updates",-1)),t("div",ge,[(l(!0),n(h,null,w(s.value.updates,(i,b)=>(l(),n("div",{key:b,class:"border-l-4 border-coral-500 pl-4"},[t("div",ye,[t("h3",be,o(i.title),1),t("span",fe,o(v(i.date)),1)]),t("p",ve,o(i.content),1)]))),128))])])):p("",!0)]),t("div",he,[t("div",we,[e[31]||(e[31]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Appeal Statistics",-1)),t("div",_e,[t("div",ke,[e[26]||(e[26]=t("span",{class:"text-gray-600"},"Target Amount",-1)),t("span",Ae,"₦"+o((s.value.targetAmount||0).toLocaleString()),1)]),t("div",Ce,[e[27]||(e[27]=t("span",{class:"text-gray-600"},"Amount Raised",-1)),t("span",Se,"₦"+o((s.value.raisedAmount||0).toLocaleString()),1)]),t("div",je,[e[28]||(e[28]=t("span",{class:"text-gray-600"},"Total Donors",-1)),t("span",Ne,o(((I=s.value.donations)==null?void 0:I.length)||0),1)]),t("div",$e,[e[29]||(e[29]=t("span",{class:"text-gray-600"},"Category",-1)),t("span",De,o(s.value.category||"Not specified"),1)]),t("div",Le,[e[30]||(e[30]=t("span",{class:"text-gray-600"},"Last Updated",-1)),t("span",Ie,o(v(s.value.updatedAt||s.value.createdAt)),1)])])]),t("div",Re,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),t("div",Te,[r(m,{to:`/student/appeals/edit/${s.value.id}`,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:f(()=>[r(d(B),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=u(" Edit Appeal "))]),_:1,__:[32]},8,["to"]),t("button",{onClick:j,class:"w-full flex items-center justify-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},[r(d(M),{class:"w-4 h-4 mr-2"}),e[33]||(e[33]=u(" Share Appeal "))]),t("button",{onClick:Y,class:"w-full flex items-center justify-center px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},[r(d(P),{class:"w-4 h-4 mr-2"}),e[34]||(e[34]=u(" Duplicate Appeal "))]),s.value.status==="active"?(l(),n("button",{key:0,onClick:C,class:"w-full flex items-center justify-center px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors"},[r(d(T),{class:"w-4 h-4 mr-2"}),e[35]||(e[35]=u(" Pause Appeal "))])):p("",!0),s.value.status==="paused"?(l(),n("button",{key:1,onClick:S,class:"w-full flex items-center justify-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},[r(d(U),{class:"w-4 h-4 mr-2"}),e[36]||(e[36]=u(" Resume Appeal "))])):p("",!0),e[38]||(e[38]=t("hr",{class:"border-gray-200"},null,-1)),t("button",{onClick:G,class:"w-full flex items-center justify-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},[r(d(pt),{class:"w-4 h-4 mr-2"}),e[37]||(e[37]=u(" Delete Appeal "))])])])])])])):(l(),n("div",ft,[t("div",vt,[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Appeal not found",-1)),e[9]||(e[9]=t("p",{class:"text-gray-600 mt-2"},"The appeal you're looking for doesn't exist or has been removed.",-1)),r(m,{to:"/student/appeals",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 inline-block mt-4"},{default:f(()=>e[7]||(e[7]=[u(" Back to My Appeals ")])),_:1,__:[7]})])])),y.show?(l(),n("div",Ue,[t("div",Be,[t("div",Pe,[e[40]||(e[40]=t("h3",{class:"text-xl font-bold text-gray-900"},"Share Appeal",-1)),t("button",{onClick:e[0]||(e[0]=i=>y.show=!1),class:"text-gray-400 hover:text-gray-600"},[r(d(ut),{class:"h-6 w-6"})])]),e[45]||(e[45]=t("p",{class:"text-gray-600 mb-6"},"Share your appeal to reach more potential supporters",-1)),t("div",Me,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Link",-1)),t("div",Fe,[t("input",{value:y.link,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-xl bg-gray-50 text-sm"},null,8,Ve),t("button",{onClick:q,class:"px-4 py-2 bg-coral-500 text-white rounded-r-xl hover:bg-coral-600 transition-colors"},[r(d(P),{class:"h-4 w-4"})])])]),t("div",ze,[t("button",{onClick:e[1]||(e[1]=i=>k("twitter")),class:"flex items-center justify-center px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors"},e[42]||(e[42]=[t("span",{class:"text-sm font-medium"},"Twitter",-1)])),t("button",{onClick:e[2]||(e[2]=i=>k("facebook")),class:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors"},e[43]||(e[43]=[t("span",{class:"text-sm font-medium"},"Facebook",-1)])),t("button",{onClick:e[3]||(e[3]=i=>k("whatsapp")),class:"flex items-center justify-center px-4 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors"},e[44]||(e[44]=[t("span",{class:"text-sm font-medium"},"WhatsApp",-1)]))])])])])):p("",!0)])]}),_:1},8,["navigation-items"])}}};export{es as default};
