import{u as H,b as K,r as f,e as F,w as Q,d as T,c as r,i as U,o as d,a as e,t as a,j as L,l as C,y as Z,A as ee,m as u,J as _,v as g,I as te,p as oe,F as z,q as B,k as V,B as se}from"./index-CXEPaLLm.js";import{u as le}from"./applications-i8ziy2bG.js";import{X as ae}from"./x-BPlPAr5W.js";import{U as ie}from"./upload-Cc4nevQT.js";import{c as ne}from"./StudentSidebar-UotSKljk.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=ne("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),re={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},de={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ue={class:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},ce={class:"flex items-center justify-between mb-6"},me={class:"text-2xl font-bold text-gray-900"},pe={key:0,class:"text-gray-600 mt-1"},ve={class:"mb-8"},fe={class:"flex items-center justify-between mb-4"},ge={class:"text-sm font-medium text-gray-900"},ye={class:"text-sm text-gray-600"},xe={class:"w-full bg-gray-200 rounded-full h-2"},be={class:"space-y-6"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"space-y-6"},ke={class:"flex justify-between items-center mt-2"},Se={class:"text-sm text-gray-500"},Le={class:"space-y-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"text-center"},Ne={class:"mt-4"},Ae={class:"text-sm font-medium text-gray-900"},Ee={class:"text-xs text-gray-500 mt-1"},Ue={class:"mt-4"},Ve=["id","onChange"],De=["for"],Ie={key:0,class:"mt-2"},Pe={class:"flex items-center text-sm text-green-600"},Me={class:"space-y-6"},je={class:"bg-gray-50 rounded-xl p-6 space-y-4"},qe={class:"grid grid-cols-2 gap-4 text-sm"},Oe={class:"ml-2 font-medium"},Fe={class:"ml-2 font-medium"},ze={class:"ml-2 font-medium"},Be={class:"ml-2 font-medium"},Ge={class:"ml-2 font-medium"},Re={class:"ml-2 font-medium"},$e={class:"bg-white rounded-lg p-4 text-sm text-gray-700 max-h-32 overflow-y-auto"},Ye={class:"space-y-2"},Je={class:"ml-2 text-gray-500"},We={class:"flex items-start space-x-3"},Xe={class:"flex justify-between items-center pt-6 border-t border-gray-200"},He={key:1},Ke={class:"flex space-x-3"},Qe=["disabled"],Te=["disabled"],Ze={key:0},et={key:1},it={__name:"ApplicationModal",props:{isOpen:Boolean,mode:{type:String,default:"create",validator:m=>["create","edit"].includes(m)},item:Object,application:Object},emits:["close","success"],setup(m,{emit:R}){const n=m,D=R,I=H(),P=le(),N=K(),i=f(1),y=f(4),x=f(!1),k=f(!1),o=f({studentName:"",studentEmail:"",school:"",course:"",level:"",gpa:null,coverLetter:""}),p=f({}),A=f([{id:"transcript",name:"Academic Transcript",description:"Official academic transcript or report card"},{id:"recommendation",name:"Letter of Recommendation",description:"Letter from a teacher, professor, or mentor"},{id:"statement",name:"Personal Statement",description:"Statement of purpose or personal essay"},{id:"identification",name:"Valid ID",description:"Government-issued ID or passport"}]),E=F(()=>{switch(i.value){case 1:return o.value.studentName&&o.value.studentEmail&&o.value.school&&o.value.course&&o.value.level&&o.value.gpa;case 2:return o.value.coverLetter&&o.value.coverLetter.length>=100;case 3:return Object.keys(p.value).length>=2;default:return!0}}),M=F(()=>E.value&&k.value),j=()=>{if(n.mode==="edit"&&n.application)o.value={...n.application};else{const l=I.user;o.value={studentName:(l==null?void 0:l.name)||"",studentEmail:(l==null?void 0:l.email)||"",school:(l==null?void 0:l.school)||"",course:(l==null?void 0:l.course)||"",level:(l==null?void 0:l.level)||"",gpa:(l==null?void 0:l.gpa)||null,coverLetter:""}}},$=()=>{E.value&&i.value<y.value&&i.value++},Y=(l,t)=>{const c=l.target.files[0];c&&(p.value[t]={name:c.name,size:c.size,type:c.type,file:c})},J=async()=>{var l,t,c,b,s,v,h;if(M.value){x.value=!0;try{const w={...o.value,type:((l=n.item)==null?void 0:l.type)||"scholarship",itemId:(t=n.item)==null?void 0:t.id,title:(c=n.item)==null?void 0:c.title,amount:(b=n.item)==null?void 0:b.amount,sponsorName:(s=n.item)==null?void 0:s.sponsorName,documents:Object.entries(p.value).map(([W,q])=>{var O;return{name:(O=A.value.find(X=>X.id===W))==null?void 0:O.name,type:q.type,size:`${(q.size/1048576).toFixed(2)} MB`,status:"pending"}}),status:"pending",studentId:(v=I.user)==null?void 0:v.id};n.mode==="create"?(await P.createApplication(w),N.addNotification({type:"success",title:"Application Submitted",message:`Your application for "${(h=n.item)==null?void 0:h.title}" has been submitted successfully.`})):(await P.updateApplication(n.application.id,w),N.addNotification({type:"success",title:"Application Updated",message:"Your application has been updated successfully."})),D("success"),S()}catch{N.addNotification({type:"error",title:"Submission Failed",message:"Failed to submit application. Please try again."})}finally{x.value=!1}}},S=()=>{i.value=1,k.value=!1,p.value={},x.value=!1,D("close")};return Q(()=>n.isOpen,l=>{l&&j()}),T(()=>{n.isOpen&&j()}),(l,t)=>{var c,b;return m.isOpen?(d(),r("div",re,[e("div",de,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:S}),e("div",ue,[e("div",ce,[e("div",null,[e("h3",me,a(m.mode==="create"?"Apply for":"Edit Application"),1),m.mode==="create"?(d(),r("p",pe,a(((c=m.item)==null?void 0:c.title)||"Scholarship/Offer"),1)):U("",!0)]),e("button",{onClick:S,class:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100"},[L(C(ae),{class:"w-6 h-6"})])]),e("div",ve,[e("div",fe,[e("span",ge,"Step "+a(i.value)+" of "+a(y.value),1),e("span",ye,a(Math.round(i.value/y.value*100))+"% Complete",1)]),e("div",xe,[e("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:Z({width:`${i.value/y.value*100}%`})},null,4)])]),e("form",{onSubmit:ee(J,["prevent"]),class:"space-y-6"},[u(e("div",be,[t[16]||(t[16]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Personal Information",-1)),e("div",he,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.studentName=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your full name"},null,512),[[g,o.value.studentName]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.studentEmail=s),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your email"},null,512),[[g,o.value.studentEmail]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School/Institution",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.school=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your school name"},null,512),[[g,o.value.school]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.course=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your course"},null,512),[[g,o.value.course]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.level=s),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500"},t[13]||(t[13]=[te('<option value="">Select level</option><option value="100 Level">100 Level</option><option value="200 Level">200 Level</option><option value="300 Level">300 Level</option><option value="400 Level">400 Level</option><option value="500 Level">500 Level</option><option value="Graduate">Graduate</option><option value="Masters">Masters</option><option value="PhD">PhD</option>',9)]),512),[[oe,o.value.level]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GPA/CGPA",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.gpa=s),type:"number",step:"0.01",min:"0",max:"5",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"e.g., 3.85"},null,512),[[g,o.value.gpa,void 0,{number:!0}]])])])],512),[[_,i.value===1]]),u(e("div",we,[t[19]||(t[19]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Cover Letter",-1)),t[20]||(t[20]=e("p",{class:"text-gray-600"},"Write a compelling cover letter explaining why you deserve this opportunity.",-1)),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cover Letter",-1)),u(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.coverLetter=s),rows:"12",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:`Dear Selection Committee,

I am writing to express my strong interest in this opportunity. I believe I am an ideal candidate because...`},null,512),[[g,o.value.coverLetter]]),e("div",ke,[e("span",Se,a(((b=o.value.coverLetter)==null?void 0:b.length)||0)+" characters",1),t[17]||(t[17]=e("span",{class:"text-sm text-gray-500"},"Recommended: 500-1000 characters",-1))])])],512),[[_,i.value===2]]),u(e("div",Le,[t[21]||(t[21]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Required Documents",-1)),t[22]||(t[22]=e("p",{class:"text-gray-600"},"Upload the required documents for your application.",-1)),e("div",Ce,[(d(!0),r(z,null,B(A.value,s=>(d(),r("div",{key:s.name,class:"border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-coral-500 transition-colors"},[e("div",_e,[L(C(ie),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",Ne,[e("h5",Ae,a(s.name),1),e("p",Ee,a(s.description),1)]),e("div",Ue,[e("input",{type:"file",id:s.id,class:"hidden",accept:".pdf,.doc,.docx,.jpg,.png",onChange:v=>Y(v,s.id)},null,40,Ve),e("label",{for:s.id,class:"cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-coral-500"}," Choose File ",8,De),p.value[s.id]?(d(),r("div",Ie,[e("div",Pe,[L(C(G),{class:"w-4 h-4 mr-1"}),V(" "+a(p.value[s.id].name),1)])])):U("",!0)])])]))),128))])],512),[[_,i.value===3]]),u(e("div",Me,[t[33]||(t[33]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Review Your Application",-1)),t[34]||(t[34]=e("p",{class:"text-gray-600"},"Please review all information before submitting your application.",-1)),e("div",je,[e("div",null,[t[29]||(t[29]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Personal Information",-1)),e("div",qe,[e("div",null,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",Oe,a(o.value.studentName),1)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Email:",-1)),e("span",Fe,a(o.value.studentEmail),1)]),e("div",null,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"School:",-1)),e("span",ze,a(o.value.school),1)]),e("div",null,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Course:",-1)),e("span",Be,a(o.value.course),1)]),e("div",null,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Level:",-1)),e("span",Ge,a(o.value.level),1)]),e("div",null,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"GPA:",-1)),e("span",Re,a(o.value.gpa),1)])])]),e("div",null,[t[30]||(t[30]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Cover Letter Preview",-1)),e("div",$e,a(o.value.coverLetter),1)]),e("div",null,[t[31]||(t[31]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Uploaded Documents",-1)),e("div",Ye,[(d(!0),r(z,null,B(p.value,(s,v)=>{var h;return d(),r("div",{key:v,class:"flex items-center text-sm"},[L(C(G),{class:"w-4 h-4 text-green-500 mr-2"}),e("span",null,a((h=A.value.find(w=>w.id===v))==null?void 0:h.name),1),e("span",Je,"("+a(s.name)+")",1)])}),128))])])]),e("div",We,[u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>k.value=s),type:"checkbox",class:"mt-1 h-4 w-4 text-coral-600 focus:ring-coral-500 border-gray-300 rounded"},null,512),[[se,k.value]]),t[32]||(t[32]=e("label",{class:"text-sm text-gray-700"},[V(" I agree to the "),e("a",{href:"#",class:"text-coral-600 hover:text-coral-700 font-medium"},"Terms and Conditions"),V(" and confirm that all information provided is accurate and complete. ")],-1))])],512),[[_,i.value===4]]),e("div",Xe,[i.value>1?(d(),r("button",{key:0,type:"button",onClick:t[8]||(t[8]=s=>i.value--),class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors"}," Previous ")):(d(),r("div",He)),e("div",Ke,[e("button",{type:"button",onClick:S,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors"}," Cancel "),i.value<y.value?(d(),r("button",{key:0,type:"button",onClick:$,disabled:!E.value,class:"px-6 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,Qe)):(d(),r("button",{key:1,type:"submit",disabled:!M.value||x.value,class:"px-6 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[x.value?(d(),r("span",Ze,"Submitting...")):(d(),r("span",et,"Submit Application"))],8,Te))])])],32)])])])):U("",!0)}}};export{G as C,it as _};
