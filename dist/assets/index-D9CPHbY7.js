import{x as _,c as p,r as D,o as T,d as C,e as l,f as S,g as e,k as i,i as g,j as N,l as d,m as y,v as R,p as n,F as x,q as v,t as r,n as M,h as V}from"./index-EqsJQukp.js";import{u as $}from"./disbursements-CwUyKRsw.js";import{a as U,_ as A}from"./navItems-BcGEYHfz.js";import{r as B}from"./PlusIcon-BtIAwDfQ.js";import{r as F}from"./DocumentIcon-B5HM3ZbK.js";import"./authHeader-DkpUnqMe.js";const I={class:"min-h-screen bg-gray-50 py-8"},L={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},j={class:"mb-8"},Y={class:"flex items-center justify-between"},E={class:"bg-white p-4 rounded-lg shadow-sm mb-6"},H={class:"grid grid-cols-1 gap-4 sm:grid-cols-4"},P={class:"bg-white shadow-sm rounded-lg overflow-hidden"},q={key:0,class:"p-4 flex justify-center"},z={key:1,class:"p-8 text-center"},G={class:"text-gray-500"},O={key:2,class:"min-w-full divide-y divide-gray-200"},W={class:"bg-gray-50"},J={class:"bg-white divide-y divide-gray-200"},K={class:"px-6 py-4 whitespace-nowrap"},Q={class:"text-sm font-medium text-gray-900"},X={class:"text-sm text-gray-500"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"text-sm text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"text-sm text-gray-900"},oe={class:"text-sm text-gray-500"},le={class:"px-6 py-4 whitespace-nowrap"},re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ne=["onClick"],ie=["onClick"],ge={__name:"index",setup(de){const u=_(),c=$(),b=p(()=>c.loading),h=p(()=>c.disbursements),a=D({type:"",status:"",dateRange:"",search:""}),w=[{key:"beneficiary",label:"Beneficiary"},{key:"program",label:"Program"},{key:"amount",label:"Amount/Type"},{key:"status",label:"Status"},{key:"actions",label:""}],k=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),f=p(()=>{let o=[...h.value];if(a.value.type&&(o=o.filter(t=>t.disbursementType===a.value.type)),a.value.status&&(o=o.filter(t=>t.status===a.value.status)),a.value.dateRange){const t=new Date,s=new Date;switch(a.value.dateRange){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1);break;case"year":s.setFullYear(t.getFullYear()-1);break}o=o.filter(m=>new Date(m.disbursementDate)>=s)}if(a.value.search){const t=a.value.search.toLowerCase();o=o.filter(s=>s.beneficiaryName.toLowerCase().includes(t)||s.description.toLowerCase().includes(t))}return o});return T(async()=>{await c.fetchDisbursements()}),(o,t)=>(l(),C(A,{"navigation-items":i(U),"page-title":"Disbursements"},{default:S(()=>[e("div",I,[e("div",L,[e("div",j,[e("div",Y,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Disbursements"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage and track all disbursements for your offers and scholarships ")],-1)),e("div",null,[e("button",{onClick:t[0]||(t[0]=s=>i(u).push("/sponsor/disbursements/create")),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-coral-600 hover:bg-coral-700"},[g(i(B),{class:"h-5 w-5 mr-2"}),t[5]||(t[5]=N(" Record Disbursement "))])])])]),e("div",E,[e("div",H,[e("div",null,[t[8]||(t[8]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1)),d(e("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[7]||(t[7]=[e("option",{value:""},"All Types",-1),e("option",{value:"monetary"},"Monetary",-1),e("option",{value:"non-monetary"},"Non-Monetary",-1)]),512),[[y,a.value.type]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),d(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[9]||(t[9]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[y,a.value.status]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"dateRange",class:"block text-sm font-medium text-gray-700"},"Date Range",-1)),d(e("select",{id:"dateRange","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.dateRange=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[11]||(t[11]=[e("option",{value:""},"All Time",-1),e("option",{value:"today"},"Today",-1),e("option",{value:"week"},"This Week",-1),e("option",{value:"month"},"This Month",-1),e("option",{value:"year"},"This Year",-1)]),512),[[y,a.value.dateRange]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),d(e("input",{type:"text",id:"search","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.search=s),placeholder:"Search beneficiary or description",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,512),[[R,a.value.search]])])])]),e("div",P,[b.value?(l(),n("div",q,t[14]||(t[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-coral-600"},null,-1)]))):f.value.length===0?(l(),n("div",z,[e("div",G,[g(i(F),{class:"mx-auto h-12 w-12"}),t[15]||(t[15]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No disbursements found",-1)),t[16]||(t[16]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by recording a new disbursement ",-1))])])):(l(),n("table",O,[e("thead",W,[e("tr",null,[(l(),n(x,null,v(w,s=>e("th",{key:s.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},r(s.label),1)),64)),t[17]||(t[17]=e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",J,[(l(!0),n(x,null,v(f.value,s=>(l(),n("tr",{key:s.id},[e("td",K,[e("div",Q,r(s.beneficiaryName),1),e("div",X," ID: "+r(s.beneficiaryId),1)]),e("td",Z,[e("div",ee,r(s.offerTitle||s.scholarshipTitle),1),e("div",te,r(s.offerId?"Offer":"Scholarship"),1)]),e("td",se,[e("div",ae,r(s.disbursementType==="monetary"?k(s.amount):"Non-monetary"),1),e("div",oe,r(new Date(s.disbursementDate).toLocaleDateString()),1)]),e("td",le,[e("span",{class:M(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="pending","bg-red-100 text-red-800":s.status==="cancelled"}])},r(s.status),3)]),e("td",re,[e("button",{onClick:m=>i(u).push(`/sponsor/disbursements/${s.id}`),class:"text-coral-600 hover:text-coral-900 mr-4"}," View ",8,ne),s.status==="pending"?(l(),n("button",{key:0,onClick:m=>i(u).push(`/sponsor/disbursements/${s.id}/edit`),class:"text-coral-600 hover:text-coral-900"}," Edit ",8,ie)):V("",!0)])]))),128))])]))])])])]),_:1},8,["navigation-items"]))}};export{ge as default};
