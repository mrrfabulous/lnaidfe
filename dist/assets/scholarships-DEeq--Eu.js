import{u as K,a as W,r as g,o as X,c as D,w as Z,b as ee,p as a,e as l,g as t,h as f,k as p,j as v,t as i,n as F,i as x,l as y,v as te,m as b,R as _,F as B,q as L,f as P}from"./index-EqsJQukp.js";import{u as se}from"./scholarships-BZkcYeM6.js";import{r as $}from"./BookmarkIcon-ChE6zHhC.js";import{r as oe}from"./MagnifyingGlassIcon-CXXQ-I3h.js";import{r as re}from"./AcademicCapIcon-BKq_YgFd.js";import"./authHeader-DkpUnqMe.js";const ne={class:"min-h-screen bg-gray-50"},ae={class:"bg-white border-b border-gray-200"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ie={class:"flex items-center justify-between"},de={class:"flex items-center space-x-4"},ue=["disabled"],ce={key:0,class:"w-4 h-4 inline mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pe={key:1,class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ge={class:"flex flex-col lg:flex-row gap-8"},ve={class:"lg:w-80 flex-shrink-0"},ye={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6"},fe={class:"mb-6"},xe={class:"relative"},be={class:"mb-6"},he={class:"mb-6"},we={class:"mb-6"},ke={class:"mb-6"},_e={class:"mb-6"},Se={class:"flex-1"},Ce={class:"flex items-center justify-between mb-6"},Ae={class:"text-gray-600"},Me={class:"flex items-center space-x-4"},Ne={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={key:1,class:"text-center py-12"},Ue={key:2,class:"text-center py-12"},Re={class:"text-red-600 mb-4"},Fe={class:"text-gray-600 mt-2"},Te={key:3,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ve={class:"p-6"},je={class:"flex items-start justify-between mb-4"},Be={class:"flex items-center space-x-3"},Le=["src","alt"],Pe={class:"font-semibold text-gray-900"},$e={class:"text-sm text-gray-600"},ze={class:"flex items-center space-x-2"},Ie={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},Oe=["onClick"],Ee={class:"text-gray-600 text-sm mb-4 line-clamp-2"},He={class:"space-y-2 mb-4"},Ye={class:"flex items-center justify-between text-sm"},Ge={class:"font-semibold text-gray-900"},Qe={class:"flex items-center justify-between text-sm"},qe={class:"font-medium text-gray-900"},Je={class:"flex items-center justify-between text-sm"},Ke={class:"font-medium text-gray-900"},We={class:"flex items-center justify-between text-sm"},Xe={class:"font-medium text-gray-900"},Ze={class:"mb-4"},et={class:"flex items-center space-x-3"},tt=["onClick"],st={key:4,class:"text-center py-12"},ot={key:5,class:"text-center mt-8"},rt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},nt={class:"bg-white rounded-xl max-w-md w-full p-6"},at={class:"text-gray-600 mb-4"},lt={class:"flex items-center space-x-3"},it=6,yt={__name:"scholarships",setup(dt){const u=se(),z=K(),h=W(),S=g(!0),C=g(!1),A=g(!1),U=g(null),M=g(1),r=g({search:"",amountRange:"",type:"",duration:"",school:"",course:""}),R=g("deadline"),m=g([]);X(async()=>{try{await u.initializeScholarships();const o=localStorage.getItem("saved_scholarships");o&&(m.value=JSON.parse(o))}catch(o){console.error("Failed to initialize scholarships:",o),h.addNotification({type:"error",title:"Loading Error",message:"Failed to load scholarships. Please try refreshing the page."})}finally{S.value=!1}});const T=async()=>{try{await u.refreshScholarships(),h.addNotification({type:"success",title:"Data Refreshed",message:"Scholarships have been updated from the server."})}catch(o){console.error("Failed to refresh scholarships:",o),h.addNotification({type:"error",title:"Refresh Failed",message:"Failed to refresh scholarships. Please try again."})}},I=D(()=>C.value?u.getScholarships.filter(o=>m.value.includes(o.id)):u.getScholarships),w=D(()=>{let o=I.value.filter(e=>{var n,c;if(r.value.search){const d=r.value.search.toLowerCase();if(!e.title.toLowerCase().includes(d)&&!e.description.toLowerCase().includes(d)&&!e.sponsorName.toLowerCase().includes(d))return!1}if(r.value.amountRange){const[d,s]=r.value.amountRange.split("-").map(J=>J.replace("+","")),k=e.amount;if(s){if(k<parseInt(d)||k>parseInt(s))return!1}else if(k<parseInt(d))return!1}return!(r.value.type&&e.type!==r.value.type||r.value.duration&&e.duration!==r.value.duration||r.value.school&&(!((n=e.criteria.schools)!=null&&n.length)||!e.criteria.schools.includes(r.value.school))||r.value.course&&(!((c=e.criteria.courses)!=null&&c.length)||!e.criteria.courses.includes(r.value.course)))});return o.sort((e,n)=>{switch(R.value){case"amount":return n.amount-e.amount;case"created":return new Date(n.createdAt)-new Date(e.createdAt);case"match":const c=N(e)?1:0;return(N(n)?1:0)-c;case"deadline":default:return new Date(e.deadline)-new Date(n.deadline)}}),o}),V=D(()=>{const e=M.value*it;return w.value.slice(0,e)}),O=D(()=>V.value.length<w.value.length),N=o=>{var c,d,s;const e=z.user;if(!e||e.role!=="student")return!1;const n=o.criteria;return!((c=n.schools)!=null&&c.length&&!n.schools.includes(e.school)||(d=n.courses)!=null&&d.length&&!n.courses.includes(e.course)||(s=n.levels)!=null&&s.length&&!n.levels.includes(e.level)||n.minGPA&&e.gpa<n.minGPA||n.gender&&n.gender!=="any"&&e.gender!==n.gender||n.financialNeed&&!e.financialNeed)},E=o=>{const e=m.value.indexOf(o);e>-1?(m.value.splice(e,1),h.addNotification({type:"info",title:"Scholarship Removed",message:"Scholarship removed from saved list"})):(m.value.push(o),h.addNotification({type:"success",title:"Scholarship Saved",message:"Scholarship added to saved list"})),localStorage.setItem("saved_scholarships",JSON.stringify(m.value))},H=o=>{U.value=o,A.value=!0},j=()=>{r.value={search:"",amountRange:"",type:"",duration:"",school:"",course:""},M.value=1},Y=()=>{M.value++},G=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=o=>({full_tuition:"Full Tuition",partial_tuition:"Partial Tuition",stipend:"Stipend",research:"Research Grant"})[o]||o,q=o=>({full_tuition:"bg-green-100 text-green-800",partial_tuition:"bg-blue-100 text-blue-800",stipend:"bg-purple-100 text-purple-800",research:"bg-orange-100 text-orange-800"})[o]||"bg-gray-100 text-gray-800";return Z(r,()=>{M.value=1},{deep:!0}),(o,e)=>{var c,d;const n=ee("router-link");return l(),a("div",ne,[t("div",ae,[t("div",le,[t("div",ie,[e[12]||(e[12]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"}," Browse Scholarships "),t("p",{class:"text-gray-600 mt-1"}," Discover scholarship opportunities that match your profile ")],-1)),t("div",de,[t("button",{onClick:T,disabled:p(u).loading,class:"px-4 py-2 rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 hover:bg-gray-200 disabled:opacity-50"},[p(u).loading?(l(),a("svg",ce,e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(l(),a("svg",pe,e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),v(" "+i(p(u).loading?"Refreshing...":"Refresh"),1)],8,ue),t("button",{onClick:e[0]||(e[0]=s=>C.value=!C.value),class:F(["px-4 py-2 rounded-lg font-medium transition-colors",C.value?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[x(p($),{class:"w-4 h-4 inline mr-2"}),v(" Saved ("+i(m.value.length)+") ",1)],2)])])])]),t("div",me,[t("div",ge,[t("div",ve,[t("div",ye,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),t("div",fe,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),t("div",xe,[x(p(oe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.search=s),type:"text",placeholder:"Search scholarships...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[te,r.value.search]])])]),t("div",be,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.amountRange=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[14]||(e[14]=[_('<option value="">Any Amount</option><option value="0-100000">₦0 - ₦100,000</option><option value="100000-300000">₦100,000 - ₦300,000</option><option value="300000-500000">₦300,000 - ₦500,000</option><option value="500000+">₦500,000+</option>',5)]),512),[[b,r.value.amountRange]])]),t("div",he,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[16]||(e[16]=[_('<option value="">All Types</option><option value="full_tuition">Full Tuition</option><option value="partial_tuition">Partial Tuition</option><option value="stipend">Stipend</option><option value="research">Research Grant</option>',5)]),512),[[b,r.value.type]])]),t("div",we,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duration",-1)),y(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.duration=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[18]||(e[18]=[_('<option value="">Any Duration</option><option value="1 year">1 Year</option><option value="2 years">2 Years</option><option value="3 years">3 Years</option><option value="4 years">4 Years</option>',5)]),512),[[b,r.value.duration]])]),t("div",ke,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),y(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.school=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[20]||(e[20]=[_('<option value="">Any School</option><option value="University of Lagos">University of Lagos</option><option value="Obafemi Awolowo University"> Obafemi Awolowo University </option><option value="University of Ibadan"> University of Ibadan </option><option value="Ahmadu Bello University"> Ahmadu Bello University </option>',5)]),512),[[b,r.value.school]])]),t("div",_e,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course",-1)),y(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>r.value.course=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[22]||(e[22]=[_('<option value="">Any Course</option><option value="Computer Science">Computer Science</option><option value="Engineering">Engineering</option><option value="Medicine">Medicine</option><option value="Mathematics">Mathematics</option><option value="Physics">Physics</option>',6)]),512),[[b,r.value.course]])]),t("button",{onClick:j,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Clear All Filters ")])]),t("div",Se,[t("div",Ce,[t("div",null,[t("p",Ae,i(w.value.length)+" scholarship"+i(w.value.length!==1?"s":"")+" found ",1)]),t("div",Me,[y(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>R.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[25]||(e[25]=[t("option",{value:"deadline"},"Sort by Deadline",-1),t("option",{value:"amount"},"Sort by Amount",-1),t("option",{value:"created"},"Sort by Newest",-1),t("option",{value:"match"},"Sort by Match",-1)]),512),[[b,R.value]])])]),S.value?(l(),a("div",Ne,[(l(),a(B,null,L(6,s=>t("div",{key:s,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse"},e[26]||(e[26]=[t("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-4"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-full mb-2"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-2/3"},null,-1)]))),64))])):f("",!0),p(u).loading?(l(),a("div",De,e[27]||(e[27]=[t("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-gray-500 bg-white"},[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),v(" Loading scholarships... ")],-1)]))):p(u).error?(l(),a("div",Ue,[t("div",Re,[e[28]||(e[28]=t("svg",{class:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[29]||(e[29]=t("h3",{class:"text-lg font-medium"},"Failed to load scholarships",-1)),t("p",Fe,i(p(u).error),1),t("button",{onClick:T,class:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Try Again ")])])):(l(),a("div",Te,[(l(!0),a(B,null,L(V.value,s=>(l(),a("div",{key:s.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow"},[t("div",Ve,[t("div",je,[t("div",Be,[t("img",{src:s.sponsorAvatar,alt:s.sponsorName,class:"w-10 h-10 rounded-full"},null,8,Le),t("div",null,[t("h3",Pe,i(s.title),1),t("p",$e,i(s.sponsorName),1)])]),t("div",ze,[N(s)?(l(),a("span",Ie," Perfect Match ")):f("",!0),t("button",{onClick:k=>E(s.id),class:F(["p-2 rounded-lg transition-colors",m.value.includes(s.id)?"text-primary bg-primary/10":"text-gray-400 hover:text-gray-600"])},[x(p($),{class:"w-4 h-4"})],10,Oe)])]),t("p",Ee,i(s.description),1),t("div",He,[t("div",Ye,[e[30]||(e[30]=t("span",{class:"text-gray-600"},"Amount:",-1)),t("span",Ge,"₦"+i(s.amount.toLocaleString()),1)]),t("div",Qe,[e[31]||(e[31]=t("span",{class:"text-gray-600"},"Duration:",-1)),t("span",qe,i(s.duration),1)]),t("div",Je,[e[32]||(e[32]=t("span",{class:"text-gray-600"},"Awards Available:",-1)),t("span",Ke,i(s.remainingAwards)+"/"+i(s.numberOfAwards),1)]),t("div",We,[e[33]||(e[33]=t("span",{class:"text-gray-600"},"Deadline:",-1)),t("span",Xe,i(G(s.deadline)),1)])]),t("div",Ze,[t("span",{class:F([q(s.type),"px-2 py-1 text-xs font-medium rounded-full"])},i(Q(s.type)),3)]),t("div",et,[x(n,{to:`/scholarships/${s.id}`,class:"flex-1 px-4 py-2 bg-primary text-white text-center rounded-lg hover:bg-primary/90 transition-colors font-medium"},{default:P(()=>e[34]||(e[34]=[v(" View Details ")])),_:2,__:[34]},1032,["to"]),N(s)?(l(),a("button",{key:0,onClick:k=>H(s),class:"px-4 py-2 border border-primary text-primary rounded-lg hover:bg-primary/5 transition-colors font-medium"}," Quick Apply ",8,tt)):f("",!0)])])]))),128))])),!S.value&&w.value.length===0?(l(),a("div",st,[x(p(re),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[35]||(e[35]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," No scholarships found ",-1)),e[36]||(e[36]=t("p",{class:"text-gray-600 mb-4"}," Try adjusting your filters to see more results ",-1)),t("button",{onClick:j,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors"}," Clear Filters ")])):f("",!0),O.value&&!S.value?(l(),a("div",ot,[t("button",{onClick:Y,class:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Load More Scholarships ")])):f("",!0)])])]),A.value?(l(),a("div",rt,[t("div",nt,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Apply",-1)),t("p",at,[e[37]||(e[37]=v(" You're about to apply for ")),t("strong",null,i((c=U.value)==null?void 0:c.title),1),e[38]||(e[38]=v(". This will redirect you to the full application page. "))]),t("div",lt,[t("button",{onClick:e[8]||(e[8]=s=>A.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),x(n,{to:`/scholarships/${(d=U.value)==null?void 0:d.id}?apply=true`,class:"flex-1 px-4 py-2 bg-primary text-white text-center rounded-lg hover:bg-primary/90 transition-colors",onClick:e[9]||(e[9]=s=>A.value=!1)},{default:P(()=>e[39]||(e[39]=[v(" Continue ")])),_:1,__:[39]},8,["to"])])])])):f("",!0)])}}};export{yt as default};
