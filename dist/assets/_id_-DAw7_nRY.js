import{s as K,a as Q,r as W,o as X,c as m,b as Z,d as ee,e as r,f as x,p as a,i as d,g as e,j as L,t as l,h as p,n as P,k as u,F as v,q as y,z as te}from"./index-EqsJQukp.js";import{u as se}from"./offers-CMuGKdpP.js";import{u as oe,F as re,s as ae,_ as le}from"./navItems-BcGEYHfz.js";import{u as ne}from"./applications-CVJmNFuW.js";import{_ as ie}from"./ApplicationModal-kxLG78Mn.js";import{r as R}from"./AcademicCapIcon-BKq_YgFd.js";import{C as de}from"./calendar-QZZnOdG5.js";import{C as ce}from"./clock-DxilSQJB.js";import{S as ue}from"./share-2-DpALoOqW.js";import{S as fe,T as me}from"./target-Cbvg5X6-.js";import{C as E}from"./circle-check-big-BfLp0Q0m.js";import{S as pe}from"./school-DqENtvFt.js";import{E as ge}from"./eye-4dZziO83.js";import"./authHeader-DkpUnqMe.js";import"./x-c6Y77DFi.js";import"./upload-C3RSQhGF.js";const xe={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ve={class:"text-center"},ye={key:1,class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},he={class:"flex items-center space-x-2 text-sm text-gray-600 mb-6"},be={class:"text-gray-900"},_e={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8"},we={class:"flex justify-between items-start"},Se={class:"flex-1"},ke={class:"flex items-center space-x-3 mb-4"},Ae={class:"text-3xl font-bold text-gray-900"},Ce={key:0,class:"bg-green-100 text-green-700 text-sm px-3 py-1 rounded-full font-medium"},Pe={class:"flex items-center space-x-4 mb-4"},Te={class:"flex items-center space-x-2"},De={class:"font-medium text-gray-900"},Me={class:"text-gray-700 text-lg leading-relaxed"},Oe={class:"text-right ml-8"},Be={class:"text-sm text-gray-500"},Ge={class:"flex items-center justify-between pt-6 border-t border-gray-100 mt-6"},Ne={class:"flex items-center space-x-4 text-sm text-gray-600"},je={class:"flex items-center space-x-2"},Fe={class:"flex items-center space-x-2"},Le={class:"flex items-center space-x-3"},Re={key:1,class:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg flex items-center space-x-2"},Ee={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ve={class:"lg:col-span-2 space-y-8"},$e={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ze={key:0},Ie={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Ue={class:"space-y-1"},Ye={key:1},He={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Je={class:"space-y-1"},Ke={key:2},Qe={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},We={class:"space-y-1"},Xe={key:3},Ze={class:"text-gray-600 text-sm"},et={key:4},tt={class:"text-gray-600 text-sm capitalize"},st={key:5},ot={class:"text-gray-600 text-sm"},rt={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},at={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center space-x-2"},lt={class:"space-y-3"},nt={class:"text-gray-700"},it={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},dt={class:"flex items-center space-x-3 mb-4"},ct={class:"text-gray-600"},ut={class:"space-y-6"},ft={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},mt={class:"space-y-4"},pt={class:"flex items-center justify-between"},gt={class:"font-semibold"},xt={class:"flex items-center justify-between"},vt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},yt={class:"mb-4"},ht={class:"flex justify-between text-sm text-gray-600 mb-2"},bt={class:"w-full bg-gray-200 rounded-full h-2"},_t={key:0,class:"bg-green-50 border border-green-200 rounded-2xl p-6"},wt={class:"flex items-center space-x-2 mb-3"},St={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},kt={class:"space-y-3"},At={class:"font-medium text-gray-900 text-sm"},Ct={class:"text-gray-600 text-xs mt-1"},It={__name:"[id]",setup(Pt){const T=K(),S=se(),D=oe(),V=ne(),M=Q(),f=W({show:!1,mode:"create",offer:null,application:null});X(()=>{S.getSingleOffer(T.params.id)});const s=m(()=>S.getSingleOffer(T.params.id)||null),k=m(()=>D.profile||{}),O=m(()=>{var w,j,F;if(!s.value||!k.value)return!1;const{instituteName:o,courseOfStudy:t,level:n,gpa:c}=k.value,g=!((w=s.value.offerTargetSchool)!=null&&w.length)||s.value.offerTargetSchool.includes(o),h=!((j=s.value.offerTargetCourse)!=null&&j.length)||s.value.offerTargetCourse.includes(t),b=!((F=s.value.offerTargetLevel)!=null&&F.length)||s.value.offerTargetLevel.includes(n),_=!s.value.offerTargetGPA||(c||0)>=s.value.offerTargetGPA,i=!s.value.offerGenderPreference||s.value.offerGenderPreference==="Any"||s.value.offerGenderPreference.toLowerCase()===(k.value.gender||"").toLowerCase();return g&&h&&b&&_&&i}),$=m(()=>{const o=D.user;return!o||!s.value?!1:V.getUserApplications(o._id).some(n=>n.itemId===s.value._id&&n.type==="offer")}),A=m(()=>s.value?new Date(s.value.offerDeadline)<new Date:!1),q=m(()=>{if(!s.value)return 0;const n=new Date(s.value.offerDeadline)-new Date,c=Math.ceil(n/(1e3*60*60*24));return Math.max(0,c)}),z=m(()=>{var n,c,g;const o=Math.floor(((n=s.value)==null?void 0:n.offerBudget)/((c=s.value)==null?void 0:c.offerAmountPerStudent));return Math.min(5,o)*(((g=s.value)==null?void 0:g.offerAmountPerStudent)||0)}),B=m(()=>s.value?Math.round(z.value/s.value.offerBudget*100):0),I=m(()=>s.value?S.getOffers.filter(o=>o._id!==s.value._id&&o.isActive).filter(o=>{const t=s.value.offerTargetCourse||[],n=o.offerTargetCourse||[];return t.some(c=>n.includes(c))}).slice(0,3):[]),C=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",G=o=>({"First come, first Serve":"First Come, First Served",merit_based:"Merit Based",holistic:"Holistic Review",research_based:"Research Based",portfolio_based:"Portfolio Based"})[o]||o,N=o=>({"First come, first Serve":"bg-blue-100 text-blue-700",merit_based:"bg-blue-100 text-blue-700",holistic:"bg-purple-100 text-purple-700",research_based:"bg-green-100 text-green-700",portfolio_based:"bg-orange-100 text-orange-700"})[o]||"bg-gray-100 text-gray-700",U=o=>({"First come, first Serve":"Applications are processed in the order they are received until budget is exhausted.",merit_based:"Candidates are selected based on academic excellence and achievements.",holistic:"Selection considers academic performance, personal background, and potential.",research_based:"Priority given to candidates with strong research experience and proposals.",portfolio_based:"Selection is based on the quality of creative work and portfolio."})[o]||"Selection process details not available.",Y=()=>{s.value&&!A.value&&(f.value.offer=s.value,f.value.mode="create",f.value.application=null,f.value.show=!0)},H=async()=>{var n,c;const o=window.location.href,t=`Check out this opportunity: ${(n=s.value)==null?void 0:n.offerTitle}`;navigator.share?await navigator.share({title:(c=s.value)==null?void 0:c.offerTitle,text:t,url:o}):(await navigator.clipboard.writeText(o),M.addNotification({type:"success",title:"Link copied",message:"Offer link copied to clipboard!"}))},J=()=>{f.value.show=!1,M.addNotification({type:"success",title:"Applied!",message:"Your application has been submitted successfully."})};return(o,t)=>{const n=Z("router-link");return r(),ee(le,{"page-title":"Offer Details","page-subtitle":"comprehensive overview of the opportunity","navigation-items":u(ae)},{default:x(()=>{var c,g,h,b,_;return[s.value?(r(),a("div",ye,[e("nav",he,[d(n,{to:"/student/offers",class:"hover:text-coral-500"},{default:x(()=>t[4]||(t[4]=[L(" Browse Opportunities ")])),_:1,__:[4]}),t[5]||(t[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",be,l(s.value.offerTitle),1)]),e("div",_e,[e("div",we,[e("div",Se,[e("div",ke,[e("h1",Ae,l(s.value.offerTitle),1),O.value?(r(),a("span",Ce," Perfect Match ")):p("",!0),e("span",{class:P([N(s.value.offerSelectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},l(G(s.value.offerSelectionProcess)),3)]),e("div",Pe,[e("div",Te,[d(u(R),{class:"w-10 h-10 text-coral-600"}),e("div",null,[e("p",De,l(((c=s.value.sponsorId)==null?void 0:c.email)||"Anonymous Sponsor"),1),t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"Sponsor",-1))])])]),e("p",Me,l(s.value.offerDescription),1)]),e("div",Oe,[t[7]||(t[7]=e("div",{class:"text-4xl font-bold text-coral-600 mb-2"}," 0 ",-1)),t[8]||(t[8]=e("div",{class:"text-gray-600 mb-4"},"per recipient",-1)),e("div",Be,[e("p",null,"Deadline: "+l(C(s.value.offerDeadline)),1)])])]),e("div",Ge,[e("div",Ne,[e("div",je,[d(u(de),{class:"h-4 w-4"}),e("span",null,"Posted "+l(C(s.value.createdAt)),1)]),e("div",Fe,[d(u(ce),{class:"h-4 w-4"}),e("span",null,l(q.value)+" days remaining",1)])]),e("div",Le,[e("button",{onClick:H,class:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[d(u(ue),{class:"h-4 w-4"}),t[9]||(t[9]=e("span",null,"Share",-1))]),!$.value&&!A.value?(r(),a("button",{key:0,onClick:Y,class:"px-6 py-3 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors duration-200 flex items-center space-x-2"},[d(u(fe),{class:"h-5 w-5"}),t[10]||(t[10]=e("span",null,"Apply Now",-1))])):(r(),a("div",Re,[d(u(E),{class:"h-5 w-5"}),e("span",null,l(A.value?"Closed":"Applied"),1)]))])])]),e("div",Ee,[e("div",Ve,[e("div",$e,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"}," Eligibility Criteria ",-1)),e("div",qe,[(g=s.value.offerTargetSchool)!=null&&g.length?(r(),a("div",ze,[e("h3",Ie,[d(u(pe),{class:"h-4 w-4"}),t[11]||(t[11]=e("span",null,"Eligible Schools",-1))]),e("ul",Ue,[(r(!0),a(v,null,y(s.value.offerTargetSchool,i=>(r(),a("li",{key:i,class:"text-gray-600 text-sm"}," • "+l(i),1))),128))])])):p("",!0),(h=s.value.offerTargetCourse)!=null&&h.length?(r(),a("div",Ye,[e("h3",He,[d(u(R),{class:"w-10 h-10 text-coral-600"}),t[12]||(t[12]=e("span",null,"Eligible Courses",-1))]),e("ul",Je,[(r(!0),a(v,null,y(s.value.offerTargetCourse,i=>(r(),a("li",{key:i,class:"text-gray-600 text-sm"}," • "+l(i),1))),128))])])):p("",!0),(b=s.value.offerTargetLevel)!=null&&b.length?(r(),a("div",Ke,[e("h3",Qe,[d(u(me),{class:"h-4 w-4"}),t[13]||(t[13]=e("span",null,"Academic Levels",-1))]),e("ul",We,[(r(!0),a(v,null,y(s.value.offerTargetLevel,i=>(r(),a("li",{key:i,class:"text-gray-600 text-sm"}," • "+l(i),1))),128))])])):p("",!0),s.value.offerTargetGPA?(r(),a("div",Xe,[t[14]||(t[14]=e("h3",{class:"font-medium text-gray-900 mb-2"},"GPA Requirement",-1)),e("p",Ze," Minimum GPA: "+l(s.value.offerTargetGPA),1)])):p("",!0),s.value.offerGenderPreference&&s.value.offerGenderPreference!=="Any"?(r(),a("div",et,[t[15]||(t[15]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Gender",-1)),e("p",tt,l(s.value.offerGenderPreference)+" only ",1)])):p("",!0),s.value.offerAgeRange?(r(),a("div",st,[t[16]||(t[16]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Age Range",-1)),e("p",ot,l(s.value.offerAgeRange),1)])):p("",!0)])]),(_=s.value.offerDocuments)!=null&&_.length?(r(),a("div",rt,[e("h2",at,[d(u(re),{class:"h-5 w-5"}),t[18]||(t[18]=e("span",null,"Required Documents",-1))]),e("ul",lt,[(r(!0),a(v,null,y(s.value.offerDocuments,(i,w)=>(r(),a("li",{key:w,class:"flex items-start space-x-3"},[t[19]||(t[19]=e("div",{class:"flex-shrink-0 w-6 h-6 bg-coral-100 rounded-full flex items-center justify-center mt-0.5"},[e("div",{class:"w-2 h-2 bg-coral-500 rounded-full"})],-1)),e("span",nt,l(i),1)]))),128))])])):p("",!0),e("div",it,[t[20]||(t[20]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"}," Selection Process ",-1)),e("div",dt,[e("span",{class:P([N(s.value.offerSelectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},l(G(s.value.offerSelectionProcess)),3)]),e("p",ct,l(U(s.value.offerSelectionProcess)),1)])]),e("div",ut,[e("div",ft,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Offer Summary ",-1)),e("div",mt,[t[23]||(t[23]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-gray-600"},"Amount per Recipient"),e("span",{class:"font-semibold text-coral-600"}," ₦ 0 ")],-1)),t[24]||(t[24]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-gray-600"},"Total Budget"),e("span",{class:"font-semibold"}," ₦ 0 ")],-1)),e("div",pt,[t[21]||(t[21]=e("span",{class:"text-gray-600"},"Deadline",-1)),e("span",gt,l(C(s.value.offerDeadline)),1)]),e("div",xt,[t[22]||(t[22]=e("span",{class:"text-gray-600"},"Status",-1)),e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium",s.value.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},l(s.value.isActive?"Active":"Closed"),3)])])]),e("div",vt,[e("div",yt,[e("div",ht,[t[26]||(t[26]=e("span",null,"Funding Progress",-1)),e("span",null,l(B.value)+"% used",1)]),e("div",bt,[e("div",{class:"bg-coral-500 h-2 rounded-full",style:te({width:`${B.value}%`})},null,4)]),t[27]||(t[27]=e("div",{class:"text-center text-sm text-gray-600 mt-2"}," used ",-1))])]),O.value?(r(),a("div",_t,[e("div",wt,[d(u(E),{class:"h-5 w-5 text-green-600"}),t[28]||(t[28]=e("h3",{class:"text-lg font-semibold text-green-900"}," Perfect Match! ",-1))]),t[29]||(t[29]=e("p",{class:"text-green-700 text-sm"}," You meet all the eligibility criteria for this offer. ",-1))])):p("",!0),e("div",St,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Similar Offers ",-1)),e("div",kt,[(r(!0),a(v,null,y(I.value.slice(0,3),i=>(r(),a("div",{key:i._id,class:"border border-gray-100 rounded-lg p-3 hover:bg-gray-50 transition-colors"},[d(n,{to:`/student/offers/${i._id}`,class:"block"},{default:x(()=>[e("h4",At,l(i.offerTitle),1),e("p",Ct,l(i.sponsorId.email),1),t[30]||(t[30]=e("p",{class:"text-coral-600 font-semibold text-sm mt-1"}," ₦ 0 ",-1))]),_:2,__:[30]},1032,["to"])]))),128))]),d(n,{to:"/student/offers",class:"text-coral-600 hover:text-coral-700 text-sm font-medium mt-4 inline-flex items-center space-x-1"},{default:x(()=>[t[31]||(t[31]=e("span",null,"View all offers",-1)),d(u(ge),{class:"h-4 w-4"})]),_:1,__:[31]})])])])])):(r(),a("div",xe,[e("div",ve,[t[2]||(t[2]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Offer not found",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mt-2"}," The offer you're looking for doesn't exist or has been removed. ",-1)),d(n,{to:"/student/offers",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 mt-4 inline-block"},{default:x(()=>t[1]||(t[1]=[L(" Browse Other Offers ")])),_:1,__:[1]})])])),d(ie,{"is-open":f.value.show,mode:f.value.mode,item:f.value.offer,application:f.value.application,onClose:t[0]||(t[0]=()=>f.value.show=!1),onSuccess:J},null,8,["is-open","mode","item","application"])]}),_:1},8,["navigation-items"])}}};export{It as default};
