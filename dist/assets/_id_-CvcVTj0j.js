import{z as F,s as V,u as I,b as U,x as $,d as Y,e as p,f as H,g as Q,o,h as y,a as e,j as n,c as a,k as B,t as i,i as d,n as N,l as c,F as f,q as g,y as J}from"./index-CXEPaLLm.js";import{u as K}from"./offers-DDnHsAj8.js";import{u as W}from"./applications-i8ziy2bG.js";import{F as X,_ as Z}from"./StudentSidebar-UotSKljk.js";import{C as M,_ as ee}from"./ApplicationModal-np25LOSV.js";import{C as te}from"./calendar-CZsrq4KF.js";import{C as se,G as oe}from"./graduation-cap-3WpNUEsQ.js";import{S as ie}from"./share-2-BqjI1D23.js";import{S as ae,T as re}from"./target-6zfbyDA2.js";import{S as le}from"./school-T9hBUqgM.js";import{E as ne}from"./eye-Cp51sz7o.js";import"./x-BPlPAr5W.js";import"./upload-Cc4nevQT.js";const de={class:"min-h-screen bg-gray-50"},ce={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ue={class:"text-center"},me={key:1,class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pe={class:"flex items-center space-x-2 text-sm text-gray-600 mb-6"},xe={class:"text-gray-900"},fe={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8"},ge={class:"flex justify-between items-start"},ve={class:"flex-1"},ye={class:"flex items-center space-x-3 mb-4"},_e={class:"text-3xl font-bold text-gray-900"},he={key:0,class:"bg-green-100 text-green-700 text-sm px-3 py-1 rounded-full font-medium"},be={class:"flex items-center space-x-4 mb-4"},we={class:"flex items-center space-x-2"},ke=["src","alt"],Se={class:"font-medium text-gray-900"},Ae={class:"text-gray-700 text-lg leading-relaxed"},Pe={class:"text-right ml-8"},Ce={class:"text-4xl font-bold text-coral-600 mb-2"},Re={class:"text-sm text-gray-500"},Be={class:"flex items-center justify-between pt-6 border-t border-gray-100 mt-6"},Ne={class:"flex items-center space-x-4 text-sm text-gray-600"},Me={class:"flex items-center space-x-2"},Le={class:"flex items-center space-x-2"},je={class:"flex items-center space-x-3"},Oe={key:1,class:"px-6 py-3 bg-green-100 text-green-700 rounded-lg flex items-center space-x-2"},De={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ge={class:"lg:col-span-2 space-y-8"},Te={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ze={key:0},qe={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Fe={class:"space-y-1"},Ve={key:1},Ie={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Ue={class:"space-y-1"},$e={key:2},Ye={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},He={class:"space-y-1"},Qe={key:3},Je={class:"text-gray-600 text-sm"},Ke={key:0,class:"text-gray-600 text-sm"},We={key:4},Xe={class:"text-gray-600 text-sm capitalize"},Ze={key:5},et={class:"text-gray-600 text-sm"},tt={key:6},st={class:"space-y-1"},ot={key:7},it={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},at={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center space-x-2"},rt={class:"space-y-3"},lt={class:"text-gray-700"},nt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},dt={class:"flex items-center space-x-3 mb-4"},ct={class:"text-gray-600"},ut={key:0},mt={key:1},pt={key:2},xt={key:3},ft={class:"space-y-6"},gt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},vt={class:"space-y-4"},yt={class:"flex items-center justify-between"},_t={class:"font-semibold text-coral-600"},ht={class:"flex items-center justify-between"},bt={class:"font-semibold"},wt={class:"flex items-center justify-between"},kt={class:"font-semibold"},St={class:"flex items-center justify-between"},At={class:"font-semibold"},Pt={class:"flex items-center justify-between"},Ct={class:"font-semibold"},Rt={class:"mt-4"},Bt={class:"flex items-center justify-between text-sm text-gray-600 mb-2"},Nt={class:"w-full bg-gray-200 rounded-full h-2"},Mt={key:0,class:"bg-green-50 border border-green-200 rounded-2xl p-6"},Lt={class:"flex items-center space-x-2 mb-3"},jt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Ot={class:"space-y-3"},Dt={class:"font-medium text-gray-900 text-sm"},Gt={class:"text-gray-600 text-xs mt-1"},Tt={class:"text-coral-600 font-semibold text-sm mt-1"},Xt={__name:"[id]",setup(Et){const L=F();V();const b=I(),_=K(),w=W(),k=U(),u=$({show:!1,mode:"create",offer:null,application:null});Y(()=>{_.initializeOffers(),w.initializeApplications()});const s=p(()=>_.getOfferById(parseInt(L.params.id))),j=p(()=>({school:"University of Lagos",course:"Computer Science",level:"400 Level",gpa:4.2,gender:"male",state:"Lagos",age:22})),O=p(()=>_.getMatchingOffers(j.value)),S=p(()=>s.value?O.value.some(l=>l.id===s.value.id):!1),D=p(()=>!s.value||!b.user?!1:w.getUserApplications(b.user.id).some(t=>t.type==="offer"&&t.itemId===s.value.id)),G=p(()=>{var v;if(!((v=s.value)!=null&&v.deadline))return 0;const m=new Date(s.value.deadline)-new Date,x=Math.ceil(m/(1e3*60*60*24));return Math.max(0,x)}),T=p(()=>s.value?_.getOffers.filter(l=>l.id!==s.value.id&&l.status==="active").filter(l=>{const t=s.value.criteria.courses||[],m=l.criteria.courses||[];return t.some(x=>m.includes(x))}).slice(0,3):[]),A=l=>({merit_based:"bg-blue-100 text-blue-700",holistic:"bg-purple-100 text-purple-700",research_based:"bg-green-100 text-green-700",portfolio_based:"bg-orange-100 text-orange-700"})[l]||"bg-gray-100 text-gray-700",P=l=>({merit_based:"Merit Based",holistic:"Holistic Review",research_based:"Research Based",portfolio_based:"Portfolio Based"})[l]||l,h=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",E=()=>{s.value&&(u.offer=s.value,u.mode="create",u.application=null,u.show=!0)},z=async()=>{if(navigator.share)try{await navigator.share({title:s.value.title,text:s.value.description,url:window.location.href})}catch(l){console.log("Error sharing:",l)}else navigator.clipboard.writeText(window.location.href),k.addNotification({type:"success",title:"Link copied",message:"Offer link copied to clipboard!"})},q=()=>{u.show=!1,k.addNotification({type:"success",title:"Application submitted",message:"Your application has been submitted successfully!"})};return(l,t)=>{const m=H("router-link");return o(),Q(Z,null,{default:y(()=>{var x,v,C,R;return[e("div",de,[s.value?(o(),a("div",me,[e("nav",pe,[n(m,{to:"/student/offers",class:"hover:text-coral-500"},{default:y(()=>t[4]||(t[4]=[B("Browse Opportunities")])),_:1,__:[4]}),t[5]||(t[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",xe,i(s.value.title),1)]),e("div",fe,[e("div",ge,[e("div",ve,[e("div",ye,[e("h1",_e,i(s.value.title),1),S.value?(o(),a("span",he," Perfect Match ")):d("",!0),e("span",{class:N([A(s.value.selectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},i(P(s.value.selectionProcess)),3)]),e("div",be,[e("div",we,[e("img",{src:s.value.sponsorAvatar,alt:s.value.sponsorName,class:"w-10 h-10 rounded-full border-2 border-gray-200"},null,8,ke),e("div",null,[e("p",Se,i(s.value.sponsorName),1),t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"Sponsor",-1))])])]),e("p",Ae,i(s.value.description),1)]),e("div",Pe,[e("div",Ce,"₦"+i(s.value.amount.toLocaleString()),1),t[7]||(t[7]=e("div",{class:"text-gray-600 mb-4"},"per student",-1)),e("div",Re,[e("p",null,i(s.value.currentRecipients)+"/"+i(s.value.maxRecipients)+" recipients",1),e("p",null,"Deadline: "+i(h(s.value.deadline)),1)])])]),e("div",Be,[e("div",Ne,[e("div",Me,[n(c(te),{class:"h-4 w-4"}),e("span",null,"Posted "+i(h(s.value.createdAt)),1)]),e("div",Le,[n(c(se),{class:"h-4 w-4"}),e("span",null,i(G.value)+" days remaining",1)])]),e("div",je,[e("button",{onClick:z,class:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[n(c(ie),{class:"h-4 w-4"}),t[8]||(t[8]=e("span",null,"Share",-1))]),D.value?(o(),a("div",Oe,[n(c(M),{class:"h-5 w-5"}),t[10]||(t[10]=e("span",null,"Applied",-1))])):(o(),a("button",{key:0,onClick:E,class:"px-6 py-3 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors duration-200 flex items-center space-x-2"},[n(c(ae),{class:"h-5 w-5"}),t[9]||(t[9]=e("span",null,"Apply Now",-1))]))])])]),e("div",De,[e("div",Ge,[e("div",Te,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Eligibility Criteria",-1)),e("div",Ee,[(x=s.value.criteria.schools)!=null&&x.length?(o(),a("div",ze,[e("h3",qe,[n(c(le),{class:"h-4 w-4"}),t[11]||(t[11]=e("span",null,"Eligible Schools",-1))]),e("ul",Fe,[(o(!0),a(f,null,g(s.value.criteria.schools,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),(v=s.value.criteria.courses)!=null&&v.length?(o(),a("div",Ve,[e("h3",Ie,[n(c(oe),{class:"h-4 w-4"}),t[12]||(t[12]=e("span",null,"Eligible Courses",-1))]),e("ul",Ue,[(o(!0),a(f,null,g(s.value.criteria.courses,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),(C=s.value.criteria.levels)!=null&&C.length?(o(),a("div",$e,[e("h3",Ye,[n(c(re),{class:"h-4 w-4"}),t[13]||(t[13]=e("span",null,"Academic Levels",-1))]),e("ul",He,[(o(!0),a(f,null,g(s.value.criteria.levels,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),s.value.criteria.minGPA?(o(),a("div",Qe,[t[14]||(t[14]=e("h3",{class:"font-medium text-gray-900 mb-2"},"GPA Requirement",-1)),e("p",Je,"Minimum GPA: "+i(s.value.criteria.minGPA),1),s.value.criteria.maxGPA?(o(),a("p",Ke,"Maximum GPA: "+i(s.value.criteria.maxGPA),1)):d("",!0)])):d("",!0),s.value.criteria.gender!=="any"?(o(),a("div",We,[t[15]||(t[15]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Gender",-1)),e("p",Xe,i(s.value.criteria.gender)+" only",1)])):d("",!0),s.value.criteria.ageRange?(o(),a("div",Ze,[t[16]||(t[16]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Age Range",-1)),e("p",et,i(s.value.criteria.ageRange.min)+" - "+i(s.value.criteria.ageRange.max)+" years",1)])):d("",!0),(R=s.value.criteria.states)!=null&&R.length?(o(),a("div",tt,[t[17]||(t[17]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Eligible States",-1)),e("ul",st,[(o(!0),a(f,null,g(s.value.criteria.states,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),s.value.criteria.financialNeed?(o(),a("div",ot,t[18]||(t[18]=[e("h3",{class:"font-medium text-gray-900 mb-2"},"Financial Need",-1),e("p",{class:"text-gray-600 text-sm"},"Proof of financial need required",-1)]))):d("",!0)])]),e("div",it,[e("h2",at,[n(c(X),{class:"h-5 w-5"}),t[20]||(t[20]=e("span",null,"Application Requirements",-1))]),e("ul",rt,[(o(!0),a(f,null,g(s.value.requirements,r=>(o(),a("li",{key:r,class:"flex items-start space-x-3"},[t[21]||(t[21]=e("div",{class:"flex-shrink-0 w-6 h-6 bg-coral-100 rounded-full flex items-center justify-center mt-0.5"},[e("div",{class:"w-2 h-2 bg-coral-500 rounded-full"})],-1)),e("span",lt,i(r),1)]))),128))])]),e("div",nt,[t[22]||(t[22]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Selection Process",-1)),e("div",dt,[e("span",{class:N([A(s.value.selectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},i(P(s.value.selectionProcess)),3)]),e("p",ct,[s.value.selectionProcess==="merit_based"?(o(),a("span",ut," Candidates are selected based on academic performance and achievements. ")):s.value.selectionProcess==="holistic"?(o(),a("span",mt," Selection considers academic performance, personal background, and overall potential. ")):s.value.selectionProcess==="research_based"?(o(),a("span",pt," Priority given to candidates with strong research proposals and experience. ")):s.value.selectionProcess==="portfolio_based"?(o(),a("span",xt," Selection primarily based on submitted portfolio and creative work quality. ")):d("",!0)])])]),e("div",ft,[e("div",gt,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Info",-1)),e("div",vt,[e("div",yt,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Award Amount",-1)),e("span",_t,"₦"+i(s.value.amount.toLocaleString()),1)]),e("div",ht,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Total Budget",-1)),e("span",bt,"₦"+i(s.value.totalBudget.toLocaleString()),1)]),e("div",wt,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"Remaining Budget",-1)),e("span",kt,"₦"+i(s.value.remainingBudget.toLocaleString()),1)]),e("div",St,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Recipients",-1)),e("span",At,i(s.value.currentRecipients)+"/"+i(s.value.maxRecipients),1)]),e("div",Pt,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Deadline",-1)),e("span",Ct,i(h(s.value.deadline)),1)])]),e("div",Rt,[e("div",Bt,[t[28]||(t[28]=e("span",null,"Recipients Progress",-1)),e("span",null,i(Math.round(s.value.currentRecipients/s.value.maxRecipients*100))+"%",1)]),e("div",Nt,[e("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:J({width:s.value.currentRecipients/s.value.maxRecipients*100+"%"})},null,4)])])]),S.value?(o(),a("div",Mt,[e("div",Lt,[n(c(M),{class:"h-5 w-5 text-green-600"}),t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-green-900"},"Perfect Match!",-1))]),t[31]||(t[31]=e("p",{class:"text-green-700 text-sm"}," This opportunity matches your profile perfectly. You meet all the eligibility criteria. ",-1))])):d("",!0),e("div",jt,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Similar Opportunities",-1)),e("div",Ot,[(o(!0),a(f,null,g(T.value.slice(0,3),r=>(o(),a("div",{key:r.id,class:"border border-gray-100 rounded-lg p-3 hover:bg-gray-50 transition-colors"},[n(m,{to:`/student/offers/${r.id}`,class:"block"},{default:y(()=>[e("h4",Dt,i(r.title),1),e("p",Gt,i(r.sponsorName),1),e("p",Tt,"₦"+i(r.amount.toLocaleString()),1)]),_:2},1032,["to"])]))),128))]),n(m,{to:"/student/offers",class:"text-coral-600 hover:text-coral-700 text-sm font-medium mt-4 inline-flex items-center space-x-1"},{default:y(()=>[t[32]||(t[32]=e("span",null,"View all opportunities",-1)),n(c(ne),{class:"h-4 w-4"})]),_:1,__:[32]})])])])])):(o(),a("div",ce,[e("div",ue,[t[2]||(t[2]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Offer not found",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mt-2"},"The offer you're looking for doesn't exist or has been removed.",-1)),n(m,{to:"/student/offers",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 mt-4 inline-block"},{default:y(()=>t[1]||(t[1]=[B(" Browse Other Offers ")])),_:1,__:[1]})])]))]),n(ee,{"is-open":u.show,mode:u.mode,item:u.offer,application:u.application,onClose:t[0]||(t[0]=r=>u.show=!1),onSuccess:q},null,8,["is-open","mode","item","application"])]}),_:1})}}};export{Xt as default};
