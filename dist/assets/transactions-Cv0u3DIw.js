import{x as D,c as p,r as I,o as _,d as S,e as r,f as T,g as e,k as d,l as u,m,v as C,p as l,i as R,F as V,q as $,t as i,h as y,n as g}from"./index-EqsJQukp.js";import{u as A}from"./wallet-cOGEpCnB.js";import{a as M,_ as N}from"./navItems-BcGEYHfz.js";import{r as U}from"./DocumentIcon-B5HM3ZbK.js";import"./authHeader-DkpUnqMe.js";const B={class:"min-h-screen bg-gray-50"},F={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},L={class:"mb-8"},W={class:"flex items-center justify-between"},j={class:"bg-white p-4 rounded-lg shadow-sm mb-6"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-4"},H={class:"bg-white shadow-sm rounded-lg overflow-hidden"},q={key:0,class:"p-4 flex justify-center"},z={key:1,class:"p-8 text-center"},E={key:2,class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},G={class:"px-6 py-4 text-sm text-gray-900"},J={class:"max-w-md truncate"},K={key:0,class:"text-xs text-gray-500 mt-1"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},X={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ee=["onClick"],ne={__name:"transactions",setup(te){const x=D(),c=A(),v=p(()=>c.loading),b=p(()=>c.allTransactions),a=I({type:"",status:"",dateRange:"",search:""}),f=p(()=>{let o=[...b.value];if(a.value.type&&(o=o.filter(t=>t.type===a.value.type)),a.value.status&&(o=o.filter(t=>t.status===a.value.status)),a.value.dateRange){const t=new Date,s=new Date;switch(a.value.dateRange){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1);break;case"year":s.setFullYear(t.getFullYear()-1);break}o=o.filter(n=>new Date(n.createdAt)>=s)}if(a.value.search){const t=a.value.search.toLowerCase();o=o.filter(s=>s.reference.toLowerCase().includes(t)||s.description.toLowerCase().includes(t))}return o}),h=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),w=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=o=>{if(!o)return"";const t=[];return o.disbursementId&&t.push(`Disbursement ID: ${o.disbursementId}`),o.beneficiaryId&&t.push(`Beneficiary ID: ${o.beneficiaryId}`),o.offerId&&t.push(`Offer ID: ${o.offerId}`),o.scholarshipId&&t.push(`Scholarship ID: ${o.scholarshipId}`),t.join(" Â· ")};return _(async()=>{await c.fetchWallet()}),(o,t)=>(r(),S(N,{"navigation-items":d(M),"page-title":"Wallet Transactions"},{default:T(()=>[e("div",B,[e("div",F,[e("div",L,[e("div",W,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Transactions History"),e("p",{class:"mt-1 text-sm text-gray-500"}," View all your wallet transactions and disbursements ")],-1)),e("div",null,[e("button",{onClick:t[0]||(t[0]=s=>d(x).push("/sponsor/wallet")),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Back to Wallet ")])])]),e("div",j,[e("div",Y,[e("div",null,[t[7]||(t[7]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"Type",-1)),u(e("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[6]||(t[6]=[e("option",{value:""},"All Types",-1),e("option",{value:"credit"},"Credits",-1),e("option",{value:"debit"},"Debits",-1)]),512),[[m,a.value.type]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),u(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[8]||(t[8]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"failed"},"Failed",-1)]),512),[[m,a.value.status]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"dateRange",class:"block text-sm font-medium text-gray-700"},"Date Range",-1)),u(e("select",{id:"dateRange","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.dateRange=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},t[10]||(t[10]=[e("option",{value:""},"All Time",-1),e("option",{value:"today"},"Today",-1),e("option",{value:"week"},"This Week",-1),e("option",{value:"month"},"This Month",-1),e("option",{value:"year"},"This Year",-1)]),512),[[m,a.value.dateRange]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),u(e("input",{type:"text",id:"search","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.search=s),placeholder:"Search by reference or description",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,512),[[C,a.value.search]])])])]),e("div",H,[v.value?(r(),l("div",q,t[13]||(t[13]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-coral-600"},null,-1)]))):f.value.length===0?(r(),l("div",z,[R(d(U),{class:"mx-auto h-12 w-12 text-gray-400"}),t[14]||(t[14]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No transactions found",-1)),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"}," No transactions match your current filters ",-1))])):(r(),l("table",E,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",O,[(r(!0),l(V,null,$(f.value,s=>{var n;return r(),l("tr",{key:s.id},[e("td",P,i(w(s.createdAt)),1),e("td",G,[e("div",J,i(s.description),1),s.metadata?(r(),l("div",K,i(k(s.metadata)),1)):y("",!0)]),e("td",Q,i(s.reference),1),e("td",{class:g(["px-6 py-4 whitespace-nowrap text-sm font-medium",{"text-green-600":s.type==="credit","text-red-600":s.type==="debit"}])},i(s.type==="credit"?"+":"-")+i(h(s.amount)),3),e("td",X,[e("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="pending","bg-red-100 text-red-800":s.status==="failed"}])},i(s.status),3)]),e("td",Z,[(n=s.metadata)!=null&&n.disbursementId?(r(),l("button",{key:0,onClick:se=>d(x).push(`/sponsor/disbursements/${s.metadata.disbursementId}`),class:"text-coral-600 hover:text-coral-900"}," View Disbursement ",8,ee)):y("",!0)])])}),128))])]))])])])]),_:1},8,["navigation-items"]))}};export{ne as default};
