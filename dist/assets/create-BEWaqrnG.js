import{x as $,u as E,a as _,r as z,y as G,c as B,b as J,d as U,e as i,f as w,g as e,i as a,k as n,A as R,l as d,v as u,m as D,p as m,h as x,t as c,j as p,F as Y,q as X}from"./index-EqsJQukp.js";import{u as H}from"./appeals-CM2mXlLj.js";import{c as P,s as K,_ as Q}from"./navItems-BcGEYHfz.js";import{A as W}from"./arrow-left-D6W7qwCh.js";import{U as V}from"./upload-C3RSQhGF.js";import{T as Z}from"./trash-2-DFi_VBzd.js";import{P as ee}from"./plus-CSARlkxq.js";import{T as te}from"./triangle-alert-BzJOwHRj.js";import"./authHeader-DkpUnqMe.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=P("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=P("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),se={class:"min-h-screen bg-gray-50"},re={class:"bg-white border-b border-gray-200"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ne={class:"flex items-center justify-between h-16"},ae={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},de={class:"space-y-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={class:"flex justify-between items-center mt-2"},ce={class:"text-sm text-gray-500"},pe={key:0,class:"text-sm text-red-500"},me={class:"space-y-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe=["placeholder"],be=["placeholder"],xe={class:"space-y-6"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-coral-400 transition-colors"},he={key:0,class:"mt-2 text-sm text-green-600 flex items-center justify-center"},we={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-coral-400 transition-colors"},ke={key:0,class:"mt-2 text-sm text-green-600 flex items-center justify-center"},Ce={class:"space-y-6"},Ae={class:"space-y-4"},Se={class:"flex-1"},Ie=["onUpdate:modelValue"],Le={class:"w-40"},Be=["onUpdate:modelValue"],Ue=["onClick","disabled"],De={class:"border-t border-gray-200 pt-4"},Ve={class:"flex justify-between items-center"},Fe={class:"text-lg font-semibold text-gray-900"},Pe={key:0,class:"text-sm text-amber-600 mt-1 flex items-center"},Ne={class:"border-t border-gray-200 pt-6"},Te={class:"flex justify-end space-x-4"},qe=["disabled"],Ye={__name:"create",setup(je){var C,A,S;const N=$(),g=E(),T=H(),y=_(),f=z(!1),o=G({title:"",category:"",targetAmount:"",description:"",school:((C=g.user)==null?void 0:C.school)||"",course:((A=g.user)==null?void 0:A.course)||"",level:((S=g.user)==null?void 0:S.level)||"",gpa:"",documents:{idCard:null,document:null},budgetItems:[{description:"",amount:0}]}),h=B(()=>o.budgetItems.reduce((s,t)=>s+(t.amount||0),0)),q=B(()=>o.title&&o.category&&o.targetAmount&&o.description&&o.school&&o.course&&o.level&&o.description.length<=1e3&&o.documents.idCard&&o.documents.document),k=(s,t)=>{const l=s.target.files[0];if(l){if(l.size>5*1024*1024){y.addNotification({type:"error",title:"File too large",message:"Please select a file smaller than 5MB"});return}o.documents[t]=l}},j=async()=>{f.value=!0;try{const s=new FormData;s.append("title",o.title),s.append("description",o.description),s.append("requestedAmount",o.targetAmount),s.append("category",o.category),s.append("instituteName",o.school),s.append("courseOfStudy",o.course),s.append("level",o.level),o.gpa&&s.append("gpa",o.gpa);const t=o.budgetItems.filter(b=>b.description&&b.amount>0);if(s.append("items",JSON.stringify(t)),o.documents.idCard&&s.append("idCard",o.documents.idCard),o.documents.document&&s.append("document",o.documents.document),s.append("status","active"),s.append("raisedAmount","0"),s.append("createdAt",new Date().toISOString()),s.append("updatedAt",new Date().toISOString()),console.log("Is FormData?",s instanceof FormData),console.log("Files check:"),console.log("idCard file:",o.documents.idCard),console.log("document file:",o.documents.document),!o.documents.idCard||!o.documents.document){console.error("Missing files!",{idCard:!!o.documents.idCard,document:!!o.documents.document});return}const l=await T.createAppeal(s);l.success?(y.addNotification({type:"success",title:"Appeal created successfully!",message:"Your funding appeal has been published and is now visible to sponsors."}),N.push(`/student/appeals/${l.id}`)):y.addNotification({type:"error",title:"Failed to create appeal",message:(l==null?void 0:l.message)||"An error occurred while creating your appeal. Please try again."})}catch(s){console.error("Appeal creation error:",s),y.addNotification({type:"error",title:"Failed to create appeal",message:"An error occurred while creating your appeal. Please try again."})}finally{f.value=!1}},M=()=>{o.budgetItems.push({description:"",amount:0})},O=s=>{o.budgetItems.length>1&&o.budgetItems.splice(s,1)};return(s,t)=>{const l=J("router-link");return i(),U(Q,{"page-title":"Appeals","navigation-items":n(K)},{default:w(()=>{var b,I;return[e("div",se,[e("div",re,[e("div",le,[e("div",ne,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create New Appeal"),e("p",{class:"text-sm text-gray-500"},"Share your story and request funding for your educational needs")],-1)),a(l,{to:"/student/appeals",class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:w(()=>[a(n(W),{class:"h-5 w-5"}),t[12]||(t[12]=e("span",null,"Back to Appeals",-1))]),_:1,__:[12]})])])]),e("div",ae,[e("form",{onSubmit:R(j,["prevent"]),class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8"},[e("div",de,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Basic Information",-1)),e("div",null,[t[14]||(t[14]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Title *",-1)),d(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=r=>o.title=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Computer Science Textbooks for Final Year Project"},null,512),[[u,o.title]])]),e("div",ie,[e("div",null,[t[16]||(t[16]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),d(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=r=>o.category=r),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[15]||(t[15]=[e("option",{value:""},"Select a category",-1),e("option",{value:"tuition"},"Tuition Fees",-1),e("option",{value:"books"},"Books & Supplies",-1),e("option",{value:"accommodation"},"Accommodation",-1),e("option",{value:"living"},"Living Expenses",-1),e("option",{value:"technology"},"Technology & Equipment",-1),e("option",{value:"emergency"},"Emergency Funding",-1),e("option",{value:"other"},"Other",-1)]),512),[[D,o.category]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"targetAmount",class:"block text-sm font-medium text-gray-700 mb-2"},"Target Amount (₦) *",-1)),d(e("input",{id:"targetAmount","onUpdate:modelValue":t[2]||(t[2]=r=>o.targetAmount=r),type:"number",required:"",min:"1000",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"50,000"},null,512),[[u,o.targetAmount,void 0,{number:!0}]])])]),e("div",null,[t[18]||(t[18]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),d(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=r=>o.description=r),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors resize-none",placeholder:"Explain your funding needs, how the money will be used, and why it's important for your education..."},null,512),[[u,o.description]]),e("div",ue,[e("p",ce,c(o.description.length)+"/1000 characters",1),o.description.length>1e3?(i(),m("div",pe," Character limit exceeded ")):x("",!0)])])]),e("div",me,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Academic Information",-1)),e("div",ge,[e("div",null,[t[20]||(t[20]=e("label",{for:"school",class:"block text-sm font-medium text-gray-700 mb-2"},"School/University *",-1)),d(e("input",{id:"school","onUpdate:modelValue":t[4]||(t[4]=r=>o.school=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:((b=n(g).user)==null?void 0:b.school)||"University of Lagos"},null,8,fe),[[u,o.school]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study *",-1)),d(e("input",{id:"course","onUpdate:modelValue":t[5]||(t[5]=r=>o.course=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:((I=n(g).user)==null?void 0:I.course)||"Computer Science"},null,8,be),[[u,o.course]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"level",class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level *",-1)),d(e("select",{id:"level","onUpdate:modelValue":t[6]||(t[6]=r=>o.level=r),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[22]||(t[22]=[e("option",{value:""},"Select level",-1),e("option",{value:"100 Level"},"100 Level",-1),e("option",{value:"200 Level"},"200 Level",-1),e("option",{value:"300 Level"},"300 Level",-1),e("option",{value:"400 Level"},"400 Level",-1),e("option",{value:"500 Level"},"500 Level",-1),e("option",{value:"Postgraduate"},"Postgraduate",-1)]),512),[[D,o.level]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"gpa",class:"block text-sm font-medium text-gray-700 mb-2"},"Current GPA (Optional)",-1)),d(e("input",{id:"gpa","onUpdate:modelValue":t[7]||(t[7]=r=>o.gpa=r),type:"number",step:"0.01",min:"0",max:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"4.50"},null,512),[[u,o.gpa,void 0,{number:!0}]])])])]),e("div",xe,[t[32]||(t[32]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Supporting Documents",-1)),t[33]||(t[33]=e("p",{class:"text-gray-600"},"Upload documents to support your appeal (required)",-1)),e("div",ye,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student ID Card",-1)),e("div",ve,[e("input",{type:"file",onChange:t[8]||(t[8]=r=>k(r,"idCard")),accept:".pdf,.jpg,.jpeg,.png",class:"hidden",ref:"idCardInput"},null,544),e("button",{type:"button",onClick:t[9]||(t[9]=r=>s.$refs.idCardInput.click()),class:"text-coral-600 hover:text-coral-700 transition-colors"},[a(n(V),{class:"w-8 h-8 mx-auto mb-2"}),t[26]||(t[26]=p(" Click to upload ID Card "))]),t[27]||(t[27]=e("p",{class:"text-sm text-gray-500 mt-1"},"PDF, JPG, PNG up to 5MB",-1)),o.documents.idCard?(i(),m("div",he,[a(n(F),{class:"w-4 h-4 mr-1"}),p(" "+c(o.documents.idCard.name),1)])):x("",!0)])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Document *",-1)),e("div",we,[e("input",{type:"file",onChange:t[10]||(t[10]=r=>k(r,"document")),accept:".pdf,.doc,.docx",class:"hidden",ref:"documentInput"},null,544),e("button",{type:"button",onClick:t[11]||(t[11]=r=>s.$refs.documentInput.click()),class:"text-coral-600 hover:text-coral-700 transition-colors"},[a(n(V),{class:"w-8 h-8 mx-auto mb-2"}),t[29]||(t[29]=p(" Click to upload document "))]),t[30]||(t[30]=e("p",{class:"text-sm text-gray-500 mt-1"},"PDF, DOC, DOCX up to 5MB",-1)),o.documents.document?(i(),m("div",ke,[a(n(F),{class:"w-4 h-4 mr-1"}),p(" "+c(o.documents.document.name),1)])):x("",!0)])])])]),e("div",Ce,[t[38]||(t[38]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Budget Breakdown",-1)),t[39]||(t[39]=e("p",{class:"text-gray-600"},"Provide a detailed breakdown of how the funds will be used",-1)),e("div",Ae,[(i(!0),m(Y,null,X(o.budgetItems,(r,L)=>(i(),m("div",{key:L,class:"flex gap-4 items-end"},[e("div",Se,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item/Service",-1)),d(e("input",{"onUpdate:modelValue":v=>r.description=v,type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Programming Textbook"},null,8,Ie),[[u,r.description]])]),e("div",Le,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (₦)",-1)),d(e("input",{"onUpdate:modelValue":v=>r.amount=v,type:"number",min:"0",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"0"},null,8,Be),[[u,r.amount,void 0,{number:!0}]])]),e("button",{type:"button",onClick:v=>O(L),class:"p-3 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-xl transition-colors",disabled:o.budgetItems.length===1},[a(n(Z),{class:"w-5 h-5"})],8,Ue)]))),128)),e("button",{type:"button",onClick:M,class:"text-coral-600 hover:text-coral-700 text-sm font-medium flex items-center transition-colors"},[a(n(ee),{class:"w-4 h-4 mr-1"}),t[36]||(t[36]=p(" Add Budget Item "))]),e("div",De,[e("div",Ve,[t[37]||(t[37]=e("span",{class:"font-medium text-gray-900"},"Total Budget:",-1)),e("span",Fe,"₦"+c(h.value.toLocaleString()),1)]),h.value!==o.targetAmount?(i(),m("div",Pe,[a(n(te),{class:"w-4 h-4 mr-1"}),p(" Budget total (₦"+c(h.value.toLocaleString())+") doesn't match target amount (₦"+c(o.targetAmount.toLocaleString())+") ",1)])):x("",!0)])])]),e("div",Ne,[e("div",Te,[a(l,{to:"/student/appeals",class:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200"},{default:w(()=>t[40]||(t[40]=[p(" Cancel ")])),_:1,__:[40]}),e("button",{type:"submit",disabled:f.value||!q.value,class:"px-6 py-3 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2"},[e("span",null,c(f.value?"Creating Appeal...":"Create Appeal"),1),f.value?x("",!0):(i(),U(n(oe),{key:0,class:"w-5 h-5"}))],8,qe)])])],32)])])]}),_:1},8,["navigation-items"])}}};export{Ye as default};
