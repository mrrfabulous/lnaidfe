import{s as O,u as E,b as z,r as G,x as R,e as U,f as Y,g as V,o as d,h as y,a as e,k as u,j as l,l as n,A as J,m as i,v as c,p as P,c as g,i as x,t as p,F as X,q as H}from"./index-CXEPaLLm.js";import{u as K}from"./appeals-Bzx2EM96.js";import{c as w,_ as Q}from"./StudentSidebar-UotSKljk.js";import{A as T}from"./arrow-left-D6iZNvca.js";import{U as j}from"./upload-Cc4nevQT.js";import{T as W}from"./trash-2-DxO4olSl.js";import{P as Z}from"./plus-VO--X26G.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=w("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=w("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=w("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),oe={class:"min-h-screen bg-gray-50"},se={class:"bg-white border-b border-gray-200"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},le={class:"flex items-center justify-between h-16"},ne={class:"bg-white border-b border-gray-200"},ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ie={class:"flex items-center justify-between h-16"},de={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ue={class:"space-y-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={class:"flex justify-between items-center mt-2"},me={class:"text-sm text-gray-500"},ge={key:0,class:"text-sm text-red-500"},be={class:"space-y-6"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe=["placeholder"],ye=["placeholder"],ve={class:"space-y-6"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-coral-400 transition-colors"},ke={key:0,class:"mt-2 text-sm text-green-600 flex items-center justify-center"},Ae={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-coral-400 transition-colors"},Se={key:0,class:"mt-2 text-sm text-green-600 flex items-center justify-center"},Ce={class:"space-y-6"},Ie={class:"space-y-4"},Be={class:"flex-1"},Le=["onUpdate:modelValue"],Ue={class:"w-40"},Ve=["onUpdate:modelValue"],Pe=["onClick","disabled"],Te={class:"border-t border-gray-200 pt-4"},je={class:"flex justify-between items-center"},qe={class:"text-lg font-semibold text-gray-900"},Fe={key:0,class:"text-sm text-amber-600 mt-1 flex items-center"},De={class:"border-t border-gray-200 pt-6"},Me={class:"flex justify-end space-x-4"},Ne=["disabled"],Je={__name:"create",setup(_e){var A,S,C;const F=O(),m=E(),D=K(),v=z(),b=G(!1),o=R({title:"",category:"",targetAmount:"",description:"",school:((A=m.user)==null?void 0:A.school)||"",course:((S=m.user)==null?void 0:S.course)||"",level:((C=m.user)==null?void 0:C.level)||"",gpa:"",documents:{transcript:null,proposal:null},budgetItems:[{description:"",amount:0}]}),h=U(()=>o.budgetItems.reduce((a,t)=>a+(t.amount||0),0)),M=U(()=>o.title&&o.category&&o.targetAmount&&o.description&&o.school&&o.course&&o.level&&o.description.length<=1e3),k=(a,t)=>{const r=a.target.files[0];if(r){if(r.size>5*1024*1024){v.addNotification({type:"error",title:"File too large",message:"Please select a file smaller than 5MB"});return}o.documents[t]=r}},N=()=>{o.budgetItems.push({description:"",amount:0})},_=a=>{o.budgetItems.length>1&&o.budgetItems.splice(a,1)},$=async()=>{b.value=!0;try{const a={userId:m.user.id,title:o.title,description:o.description,targetAmount:o.targetAmount,category:o.category,school:o.school,course:o.course,level:o.level,gpa:o.gpa||null,budgetItems:o.budgetItems.filter(r=>r.description&&r.amount>0),documents:Object.keys(o.documents).filter(r=>o.documents[r]).map(r=>`${r}.pdf`),status:"active",raisedAmount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},t=D.createAppeal(a);v.addNotification({type:"success",title:"Appeal created successfully!",message:"Your funding appeal has been published and is now visible to sponsors."}),F.push(`/student/appeals/${t.id}`)}catch{v.addNotification({type:"error",title:"Failed to create appeal",message:"An error occurred while creating your appeal. Please try again."})}finally{b.value=!1}};return(a,t)=>{const r=Y("router-link");return d(),V(Q,null,{default:y(()=>{var I,B;return[e("div",oe,[e("div",se,[e("div",re,[e("div",le,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create New Appeal"),e("p",{class:"text-sm text-gray-500"},"Share your story and request funding for your educational needs")],-1)),l(r,{to:"/student/appeals",class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:y(()=>[l(n(T),{class:"h-5 w-5"}),t[12]||(t[12]=e("span",null,"Back to Appeals",-1))]),_:1,__:[12]})])])]),t[43]||(t[43]=u('ass="min-h-screen bg-gray-50"> ')),e("div",ne,[e("div",ae,[e("div",ie,[t[15]||(t[15]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create Funding Appeal"),e("p",{class:"text-sm text-gray-500"},"Tell your story and request funding for your educational needs")],-1)),l(r,{to:"/student/appeals",class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:y(()=>[l(n(T),{class:"h-5 w-5"}),t[14]||(t[14]=e("span",null,"Back to Appeals",-1))]),_:1,__:[14]})])])]),e("div",de,[e("form",{onSubmit:J($,["prevent"]),class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8"},[e("div",ue,[t[21]||(t[21]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Basic Information",-1)),e("div",null,[t[16]||(t[16]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Title *",-1)),i(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>o.title=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Computer Science Textbooks for Final Year Project"},null,512),[[c,o.title]])]),e("div",ce,[e("div",null,[t[18]||(t[18]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),i(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=s=>o.category=s),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[17]||(t[17]=[e("option",{value:""},"Select a category",-1),e("option",{value:"tuition"},"Tuition Fees",-1),e("option",{value:"books"},"Books & Supplies",-1),e("option",{value:"accommodation"},"Accommodation",-1),e("option",{value:"living"},"Living Expenses",-1),e("option",{value:"technology"},"Technology & Equipment",-1),e("option",{value:"emergency"},"Emergency Funding",-1),e("option",{value:"other"},"Other",-1)]),512),[[P,o.category]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"targetAmount",class:"block text-sm font-medium text-gray-700 mb-2"},"Target Amount (₦) *",-1)),i(e("input",{id:"targetAmount","onUpdate:modelValue":t[2]||(t[2]=s=>o.targetAmount=s),type:"number",required:"",min:"1000",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"50,000"},null,512),[[c,o.targetAmount,void 0,{number:!0}]])])]),e("div",null,[t[20]||(t[20]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),i(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=s=>o.description=s),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors resize-none",placeholder:"Explain your funding needs, how the money will be used, and why it's important for your education..."},null,512),[[c,o.description]]),e("div",pe,[e("p",me,p(o.description.length)+"/1000 characters",1),o.description.length>1e3?(d(),g("div",ge," Character limit exceeded ")):x("",!0)])])]),e("div",be,[t[27]||(t[27]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Academic Information",-1)),e("div",xe,[e("div",null,[t[22]||(t[22]=e("label",{for:"school",class:"block text-sm font-medium text-gray-700 mb-2"},"School/University *",-1)),i(e("input",{id:"school","onUpdate:modelValue":t[4]||(t[4]=s=>o.school=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:((I=n(m).user)==null?void 0:I.school)||"University of Lagos"},null,8,fe),[[c,o.school]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study *",-1)),i(e("input",{id:"course","onUpdate:modelValue":t[5]||(t[5]=s=>o.course=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:((B=n(m).user)==null?void 0:B.course)||"Computer Science"},null,8,ye),[[c,o.course]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"level",class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level *",-1)),i(e("select",{id:"level","onUpdate:modelValue":t[6]||(t[6]=s=>o.level=s),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[24]||(t[24]=[e("option",{value:""},"Select level",-1),e("option",{value:"100 Level"},"100 Level",-1),e("option",{value:"200 Level"},"200 Level",-1),e("option",{value:"300 Level"},"300 Level",-1),e("option",{value:"400 Level"},"400 Level",-1),e("option",{value:"500 Level"},"500 Level",-1),e("option",{value:"Postgraduate"},"Postgraduate",-1)]),512),[[P,o.level]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"gpa",class:"block text-sm font-medium text-gray-700 mb-2"},"Current GPA (Optional)",-1)),i(e("input",{id:"gpa","onUpdate:modelValue":t[7]||(t[7]=s=>o.gpa=s),type:"number",step:"0.01",min:"0",max:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"4.50"},null,512),[[c,o.gpa,void 0,{number:!0}]])])])]),e("div",ve,[t[34]||(t[34]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Supporting Documents",-1)),t[35]||(t[35]=e("p",{class:"text-gray-600"},"Upload documents to support your appeal (optional but recommended)",-1)),e("div",he,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Transcript",-1)),e("div",we,[e("input",{type:"file",onChange:t[8]||(t[8]=s=>k(s,"transcript")),accept:".pdf,.jpg,.jpeg,.png",class:"hidden",ref:"transcriptInput"},null,544),e("button",{type:"button",onClick:t[9]||(t[9]=s=>a.$refs.transcriptInput.click()),class:"text-coral-600 hover:text-coral-700 transition-colors"},[l(n(j),{class:"w-8 h-8 mx-auto mb-2"}),t[28]||(t[28]=u(" Click to upload transcript "))]),t[29]||(t[29]=e("p",{class:"text-sm text-gray-500 mt-1"},"PDF, JPG, PNG up to 5MB",-1)),o.documents.transcript?(d(),g("div",ke,[l(n(q),{class:"w-4 h-4 mr-1"}),u(" "+p(o.documents.transcript.name),1)])):x("",!0)])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Project Proposal/Budget",-1)),e("div",Ae,[e("input",{type:"file",onChange:t[10]||(t[10]=s=>k(s,"proposal")),accept:".pdf,.doc,.docx",class:"hidden",ref:"proposalInput"},null,544),e("button",{type:"button",onClick:t[11]||(t[11]=s=>a.$refs.proposalInput.click()),class:"text-coral-600 hover:text-coral-700 transition-colors"},[l(n(j),{class:"w-8 h-8 mx-auto mb-2"}),t[31]||(t[31]=u(" Click to upload proposal "))]),t[32]||(t[32]=e("p",{class:"text-sm text-gray-500 mt-1"},"PDF, DOC, DOCX up to 5MB",-1)),o.documents.proposal?(d(),g("div",Se,[l(n(q),{class:"w-4 h-4 mr-1"}),u(" "+p(o.documents.proposal.name),1)])):x("",!0)])])])]),e("div",Ce,[t[40]||(t[40]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Budget Breakdown",-1)),t[41]||(t[41]=e("p",{class:"text-gray-600"},"Provide a detailed breakdown of how the funds will be used",-1)),e("div",Ie,[(d(!0),g(X,null,H(o.budgetItems,(s,L)=>(d(),g("div",{key:L,class:"flex gap-4 items-end"},[e("div",Be,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item/Service",-1)),i(e("input",{"onUpdate:modelValue":f=>s.description=f,type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Programming Textbook"},null,8,Le),[[c,s.description]])]),e("div",Ue,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (₦)",-1)),i(e("input",{"onUpdate:modelValue":f=>s.amount=f,type:"number",min:"0",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"0"},null,8,Ve),[[c,s.amount,void 0,{number:!0}]])]),e("button",{type:"button",onClick:f=>_(L),class:"p-3 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-xl transition-colors",disabled:o.budgetItems.length===1},[l(n(W),{class:"w-5 h-5"})],8,Pe)]))),128)),e("button",{type:"button",onClick:N,class:"text-coral-600 hover:text-coral-700 text-sm font-medium flex items-center transition-colors"},[l(n(Z),{class:"w-4 h-4 mr-1"}),t[38]||(t[38]=u(" Add Budget Item "))]),e("div",Te,[e("div",je,[t[39]||(t[39]=e("span",{class:"font-medium text-gray-900"},"Total Budget:",-1)),e("span",qe,"₦"+p(h.value.toLocaleString()),1)]),h.value!==o.targetAmount?(d(),g("div",Fe,[l(n(te),{class:"w-4 h-4 mr-1"}),u(" Budget total (₦"+p(h.value.toLocaleString())+") doesn't match target amount (₦"+p(o.targetAmount.toLocaleString())+") ",1)])):x("",!0)])])]),e("div",De,[e("div",Me,[l(r,{to:"/student/appeals",class:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200"},{default:y(()=>t[42]||(t[42]=[u(" Cancel ")])),_:1,__:[42]}),e("button",{type:"submit",disabled:b.value||!M.value,class:"px-6 py-3 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2"},[e("span",null,p(b.value?"Creating Appeal...":"Create Appeal"),1),b.value?x("",!0):(d(),V(n(ee),{key:0,class:"w-5 h-5"}))],8,Ne)])])],32)])])]}),_:1})}}};export{Je as default};
