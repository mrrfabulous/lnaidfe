import{s as L,z as U,b as E,r as y,x as q,d as M,f as V,g as C,o as i,h as c,a as e,c as d,j as m,l as b,k,A as D,m as r,v as n,p as v,t as P}from"./index-CXEPaLLm.js";import{u as B}from"./appeals-Bzx2EM96.js";import{_ as N}from"./StudentSidebar-UotSKljk.js";import{A as j}from"./arrow-left-D6iZNvca.js";const F={class:"min-h-screen bg-gray-50"},I={class:"bg-white border-b border-gray-200"},R={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},T={class:"flex items-center justify-between h-16"},O={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Y={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},$={class:"text-center"},z={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={class:"space-y-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"flex justify-between items-center mt-2"},K={class:"text-sm text-gray-500"},Q={class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"space-y-6"},Z={class:"border-t border-gray-200 pt-6"},_={class:"flex justify-end space-x-4"},ee=["disabled"],oe={key:0},te={key:1},ne={__name:"[id]",setup(le){const w=L(),g=U(),u=B(),f=E(),A=y(!0),p=y(!1),s=y(null),t=q({title:"",category:"",targetAmount:0,description:"",school:"",course:"",level:"",gpa:"",status:"active"});M(async()=>{await h()});const h=async()=>{try{u.appeals.length===0&&u.initializeAppeals();const a=g.params.id;s.value=u.getAppealById(parseInt(a)),s.value&&Object.assign(t,{title:s.value.title||"",category:s.value.category||"",targetAmount:s.value.targetAmount||0,description:s.value.description||"",school:s.value.school||"",course:s.value.course||"",level:s.value.level||"",gpa:s.value.gpa||"",status:s.value.status||"active"}),A.value=!1}catch(a){console.error("Error loading appeal:",a),f.addNotification({type:"error",title:"Error loading appeal",message:"Could not load appeal data. Please try again."}),w.push("/student/appeals")}},S=async()=>{p.value=!0;try{const a={title:t.title,category:t.category,targetAmount:t.targetAmount,description:t.description,school:t.school,course:t.course,level:t.level,gpa:t.gpa,status:t.status,updatedAt:new Date().toISOString()};u.updateAppeal(s.value.id,a),f.addNotification({type:"success",title:"Appeal updated",message:"Your appeal has been successfully updated."}),w.push(`/student/appeals/${s.value.id}`)}catch(a){console.error("Error updating appeal:",a),f.addNotification({type:"error",title:"Update failed",message:"Failed to update your appeal. Please try again."})}finally{p.value=!1}};return(a,o)=>{const x=V("router-link");return i(),C(N,null,{default:c(()=>[e("div",F,[e("div",I,[e("div",R,[e("div",T,[o[10]||(o[10]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Appeal"),e("p",{class:"text-sm text-gray-500"},"Update your funding appeal details")],-1)),m(x,{to:`/student/appeals/${b(g).params.id}`,class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:c(()=>[m(b(j),{class:"h-5 w-5"}),o[9]||(o[9]=e("span",null,"Back to Appeal",-1))]),_:1,__:[9]},8,["to"])])])]),A.value?(i(),d("div",O,o[11]||(o[11]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-coral-500 mx-auto"}),e("p",{class:"text-gray-600 mt-4"},"Loading appeal...")],-1)]))):s.value?(i(),d("div",z,[e("form",{onSubmit:D(S,["prevent"]),class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8"},[e("div",G,[o[20]||(o[20]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Basic Information",-1)),e("div",null,[o[15]||(o[15]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Title *",-1)),r(e("input",{id:"title","onUpdate:modelValue":o[0]||(o[0]=l=>t.title=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Computer Science Textbooks for Final Year Project"},null,512),[[n,t.title]])]),e("div",H,[e("div",null,[o[17]||(o[17]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),r(e("select",{id:"category","onUpdate:modelValue":o[1]||(o[1]=l=>t.category=l),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},o[16]||(o[16]=[e("option",{value:""},"Select a category",-1),e("option",{value:"Education Materials"},"Education Materials",-1),e("option",{value:"Research Equipment"},"Research Equipment",-1),e("option",{value:"Laboratory Equipment"},"Laboratory Equipment",-1),e("option",{value:"School Fees"},"School Fees",-1),e("option",{value:"Medical Equipment"},"Medical Equipment",-1),e("option",{value:"Research Materials"},"Research Materials",-1),e("option",{value:"Professional Development"},"Professional Development",-1),e("option",{value:"Other"},"Other",-1)]),512),[[v,t.category]])]),e("div",null,[o[18]||(o[18]=e("label",{for:"targetAmount",class:"block text-sm font-medium text-gray-700 mb-2"},"Target Amount (â‚¦) *",-1)),r(e("input",{id:"targetAmount","onUpdate:modelValue":o[2]||(o[2]=l=>t.targetAmount=l),type:"number",required:"",min:"1000",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"50,000"},null,512),[[n,t.targetAmount,void 0,{number:!0}]])])]),e("div",null,[o[19]||(o[19]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),r(e("textarea",{id:"description","onUpdate:modelValue":o[3]||(o[3]=l=>t.description=l),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors resize-none",placeholder:"Explain your funding needs, how the money will be used, and why it's important for your education..."},null,512),[[n,t.description]]),e("div",J,[e("p",K,P(t.description.length)+"/2000 characters",1)])])]),e("div",Q,[o[26]||(o[26]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Academic Information",-1)),e("div",W,[e("div",null,[o[21]||(o[21]=e("label",{for:"school",class:"block text-sm font-medium text-gray-700 mb-2"},"School/University *",-1)),r(e("input",{id:"school","onUpdate:modelValue":o[4]||(o[4]=l=>t.school=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"University of Lagos"},null,512),[[n,t.school]])]),e("div",null,[o[22]||(o[22]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study *",-1)),r(e("input",{id:"course","onUpdate:modelValue":o[5]||(o[5]=l=>t.course=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"Computer Science"},null,512),[[n,t.course]])]),e("div",null,[o[24]||(o[24]=e("label",{for:"level",class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level *",-1)),r(e("select",{id:"level","onUpdate:modelValue":o[6]||(o[6]=l=>t.level=l),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},o[23]||(o[23]=[e("option",{value:""},"Select level",-1),e("option",{value:"100 Level"},"100 Level",-1),e("option",{value:"200 Level"},"200 Level",-1),e("option",{value:"300 Level"},"300 Level",-1),e("option",{value:"400 Level"},"400 Level",-1),e("option",{value:"Final Year"},"Final Year",-1),e("option",{value:"Masters"},"Masters",-1),e("option",{value:"PhD"},"PhD",-1)]),512),[[v,t.level]])]),e("div",null,[o[25]||(o[25]=e("label",{for:"gpa",class:"block text-sm font-medium text-gray-700 mb-2"},"Current GPA (Optional)",-1)),r(e("input",{id:"gpa","onUpdate:modelValue":o[7]||(o[7]=l=>t.gpa=l),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"4.5/5.0"},null,512),[[n,t.gpa]])])])]),e("div",X,[o[30]||(o[30]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Appeal Status",-1)),e("div",null,[o[28]||(o[28]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),r(e("select",{id:"status","onUpdate:modelValue":o[8]||(o[8]=l=>t.status=l),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},o[27]||(o[27]=[e("option",{value:"active"},"Active",-1),e("option",{value:"paused"},"Paused",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"draft"},"Draft",-1)]),512),[[v,t.status]]),o[29]||(o[29]=e("p",{class:"text-sm text-gray-500 mt-1"},' Choose "Active" to make your appeal visible to sponsors, "Paused" to temporarily hide it, or "Draft" to save without publishing. ',-1))])]),e("div",Z,[e("div",_,[m(x,{to:`/student/appeals/${b(g).params.id}`,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors duration-200"},{default:c(()=>o[31]||(o[31]=[k(" Cancel ")])),_:1,__:[31]},8,["to"]),e("button",{type:"submit",disabled:p.value,class:"px-6 py-3 bg-coral-500 text-white rounded-xl hover:bg-coral-600 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[p.value?(i(),d("span",oe,"Updating...")):(i(),d("span",te,"Update Appeal"))],8,ee)])])],32)])):(i(),d("div",Y,[e("div",$,[o[13]||(o[13]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Appeal not found",-1)),o[14]||(o[14]=e("p",{class:"text-gray-600 mt-2"},"The appeal you're trying to edit doesn't exist or has been removed.",-1)),m(x,{to:"/student/appeals",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 inline-block mt-4"},{default:c(()=>o[12]||(o[12]=[k(" Back to My Appeals ")])),_:1,__:[12]})])]))])]),_:1})}}};export{ne as default};
