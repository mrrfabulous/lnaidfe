import{u as pe,a as ge,r as m,o as G,c as u,w as ve,b as fe,d as V,e as l,f as J,g as t,h as f,n as W,i as g,j as q,k as p,t as i,l as x,v as he,m as y,p as n,F as D,q as T}from"./index-EqsJQukp.js";import{u as xe}from"./scholarships-BZkcYeM6.js";import{u as ye,s as be,_ as _e}from"./navItems-BcGEYHfz.js";import{u as we}from"./applications-CVJmNFuW.js";import{_ as Se}from"./ApplicationModal-kxLG78Mn.js";import{r as z}from"./BookmarkIcon-ChE6zHhC.js";import{r as j}from"./AcademicCapIcon-BKq_YgFd.js";import{r as Ae}from"./CheckCircleIcon-CNtNdueS.js";import{r as ke}from"./CurrencyDollarIcon-TzVtvSSx.js";import{r as De}from"./ClockIcon-CI-NDIwb.js";import{r as Te}from"./MagnifyingGlassIcon-CXXQ-I3h.js";import"./authHeader-DkpUnqMe.js";import"./x-c6Y77DFi.js";import"./upload-C3RSQhGF.js";import"./circle-check-big-BfLp0Q0m.js";const Ce={class:"min-h-screen bg-gray-50"},Ne={class:"bg-white border-b border-gray-200"},Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Le={class:"flex items-center justify-between"},Pe={class:"flex items-center space-x-4"},$e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ee={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Ve={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},je={class:"flex items-center"},Fe={class:"p-2 bg-coral-100 rounded-lg"},Re={class:"ml-4"},Ie={class:"text-2xl font-bold text-gray-900"},Ue={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Be={class:"flex items-center"},Oe={class:"p-2 bg-green-100 rounded-lg"},Ge={class:"ml-4"},Je={class:"text-2xl font-bold text-gray-900"},We={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},qe={class:"flex items-center"},ze={class:"p-2 bg-purple-100 rounded-lg"},Qe={class:"ml-4"},Ye={class:"text-2xl font-bold text-gray-900"},He={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ke={class:"flex items-center"},Xe={class:"p-2 bg-amber-100 rounded-lg"},Ze={class:"ml-4"},et={class:"text-2xl font-bold text-gray-900"},tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},st={class:"flex flex-col lg:flex-row gap-8"},ot={class:"lg:w-80 flex-shrink-0"},at={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6"},rt={class:"mb-6"},lt={class:"relative"},nt={class:"mb-6"},it={class:"mb-6"},dt=["value"],ut={class:"mb-6"},ct=["value"],mt={class:"mb-6"},pt=["value"],gt={class:"mb-6"},vt={class:"flex-1"},ft={class:"flex items-center justify-between mb-6"},ht={class:"text-gray-600"},xt={class:"flex items-center space-x-4"},yt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},bt={key:1,class:"flex flex-col gap-6"},_t={class:"p-6"},wt={class:"flex items-start justify-between mb-4"},St={class:"flex items-center space-x-3"},At={class:"w-10 h-10 bg-coral-100 rounded-full flex items-center justify-center"},kt=["src","alt"],Dt={class:"font-semibold text-gray-900"},Tt={class:"text-sm text-gray-600"},Ct={class:"flex items-center space-x-2"},Nt={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},Mt={key:1,class:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full"},Lt={key:2,class:"px-2 py-1 text-xs font-medium bg-coral-100 text-coral-800 rounded-full"},Pt=["onClick"],$t={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Et={class:"space-y-2 mb-4"},Vt={class:"flex items-center justify-between text-sm"},jt={class:"font-semibold text-gray-900"},Ft={class:"flex items-center justify-between text-sm"},Rt={class:"font-medium text-gray-900"},It={class:"flex items-center justify-between text-sm"},Ut={class:"font-medium text-gray-900"},Bt={class:"flex items-center justify-between text-sm"},Ot={class:"font-medium text-gray-900"},Gt={key:0,class:"flex items-center justify-between text-sm"},Jt={class:"font-medium text-gray-900"},Wt={class:"flex items-center space-x-3"},qt=["onClick"],zt={key:2,class:"text-center py-12"},Qt={key:3,class:"text-center mt-8"},Yt=6,ms={__name:"index",setup(Ht){const Q=xe(),F=pe(),Y=ye(),b=ge(),H=we(),C=m(!0),N=m(!1),M=m(!1),h=m(null),L=m(1),c=m([]),r=m({search:"",amountRange:"",school:"",course:"",level:"",status:""}),_=m({}),$=m("deadline"),v=m([]);G(async()=>{try{const o=await Q.getScholarships();o.success&&(c.value=o.data);const e=localStorage.getItem("saved_scholarships");e&&(v.value=JSON.parse(e))}catch(o){console.error("Error loading scholarships:",o),b.addNotification({type:"error",title:"Error",message:"Failed to load scholarships"})}finally{C.value=!1}}),G(async()=>{try{const o=await Y.getProfile();o?_.value=o:console.log("No details found")}catch(o){console.log("Failed to get student stats, see the error here:",o)}});const K=u(()=>{const o=new Set;return c.value.forEach(e=>{var a;(a=e.scholarshipTargetSchool)==null||a.forEach(s=>o.add(s))}),Array.from(o).sort()}),X=u(()=>{const o=new Set;return c.value.forEach(e=>{var a;(a=e.scholarshipTargetCourse)==null||a.forEach(s=>o.add(s))}),Array.from(o).sort()}),Z=u(()=>{const o=new Set;return c.value.forEach(e=>{var a;(a=e.scholarshipTargetLevel)==null||a.forEach(s=>o.add(s))}),Array.from(o).sort()}),ee=u(()=>c.value.length),te=u(()=>F.user?c.value.filter(e=>S(e)).length:0),se=u(()=>c.value.reduce((o,e)=>{const a=e.scholarshipAmountPerStudent||0,s=e.scholarshipNumberOfAwards||1;return o+a*s},0)),oe=u(()=>{const o=new Date(Date.now()+6048e5);return c.value.filter(e=>new Date(e.scholarshipDeadline)<=o).length}),ae=u(()=>N.value?c.value.filter(o=>v.value.includes(o._id)):c.value),w=u(()=>{let o=ae.value.filter(e=>{var a,s,d,A,P;if(r.value.search){const k=r.value.search.toLowerCase();if(!((a=e.scholarshipTitle)!=null&&a.toLowerCase().includes(k))&&!((s=e.scholarshipDescription)!=null&&s.toLowerCase().includes(k)))return!1}if(r.value.amountRange){const[k,O]=r.value.amountRange.split("-").map(me=>me.replace("+","")),E=e.scholarshipAmountPerStudent||0;if(O){if(E<parseInt(k)||E>parseInt(O))return!1}else if(E<parseInt(k))return!1}return!(r.value.school&&(!((d=e.scholarshipTargetSchool)!=null&&d.length)||!e.scholarshipTargetSchool.includes(r.value.school))||r.value.course&&(!((A=e.scholarshipTargetCourse)!=null&&A.length)||!e.scholarshipTargetCourse.includes(r.value.course))||r.value.level&&(!((P=e.scholarshipTargetLevel)!=null&&P.length)||!e.scholarshipTargetLevel.includes(r.value.level))||r.value.status&&(r.value.status==="active"&&!e.isActive||r.value.status==="ending_soon"&&!I(e)))});return o.sort((e,a)=>{switch($.value){case"amount":return(a.scholarshipAmountPerStudent||0)-(e.scholarshipAmountPerStudent||0);case"created":return new Date(a.createdAt)-new Date(e.createdAt);case"match":const s=S(e)?1:0;return(S(a)?1:0)-s;case"deadline":default:return new Date(e.scholarshipDeadline)-new Date(a.scholarshipDeadline)}}),o}),R=u(()=>{const e=L.value*Yt;return w.value.slice(0,e)}),re=u(()=>R.value.length<w.value.length),S=o=>{var a,s,d;const e=F.user;return!(!e||e.role!=="student"||(a=o.scholarshipTargetSchool)!=null&&a.length&&!o.scholarshipTargetSchool.includes(_.instituteName)||(s=o.scholarshipTargetCourse)!=null&&s.length&&!o.scholarshipTargetCourse.includes(_.courseOfStudy)||(d=o.scholarshipTargetLevel)!=null&&d.length&&!o.scholarshipTargetLevel.includes(_.level)||o.scholarshipTargetGPA&&_.gpa<o.scholarshipTargetGPA)},I=o=>{const e=new Date(o.scholarshipDeadline),a=new Date(Date.now()+7*24*60*60*1e3);return e<=a},le=o=>{const e=v.value.indexOf(o);e>-1?(v.value.splice(e,1),b.addNotification({type:"info",title:"Scholarship Removed",message:"Scholarship removed from saved list"})):(v.value.push(o),b.addNotification({type:"success",title:"Scholarship Saved",message:"Scholarship added to saved list"})),localStorage.setItem("saved_scholarships",JSON.stringify(v.value))},ne=o=>{h.value=o,M.value=!0},U=()=>{M.value=!1,h.value=null},ie=async o=>{var e;try{await H.createApplication({...o,type:"scholarship",scholarshipId:h.value._id,scholarshipTitle:h.value.scholarshipTitle,sponsorName:((e=h.value.sponsorId)==null?void 0:e.email)||"Anonymous"}),b.addNotification({type:"success",title:"Application Submitted",message:`Your application for ${h.value.scholarshipTitle} has been submitted successfully.`}),U()}catch{b.addNotification({type:"error",title:"Application Failed",message:"There was an error submitting your application. Please try again."})}},B=()=>{r.value={search:"",amountRange:"",school:"",course:"",level:"",status:""},L.value=1},de=()=>{L.value++},ue=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ce=o=>{const e=new Date(o),s=Math.abs(e-new Date),d=Math.ceil(s/(1e3*60*60*24));return d>365?`${Math.floor(d/365)} year(s)`:d>30?`${Math.floor(d/30)} month(s)`:`${d} day(s)`};return ve(r,()=>{L.value=1},{deep:!0}),(o,e)=>{const a=fe("router-link");return l(),V(_e,{"page-title":"Scholarships","page-subtitle":"manage your scholarship applications","navigation-items":p(be)},{default:J(()=>[t("div",Ce,[t("div",Ne,[t("div",Me,[t("div",Le,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"}," Browse Scholarships "),t("p",{class:"text-gray-600 mt-1"}," Discover scholarship opportunities that match your profile ")],-1)),t("div",Pe,[t("button",{onClick:e[0]||(e[0]=s=>N.value=!N.value),class:W(["px-4 py-2 rounded-lg font-medium transition-colors",N.value?"bg-coral-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[g(p(z),{class:"w-4 h-4 inline mr-2"}),q(" Saved ("+i(v.value.length)+") ",1)],2)])])])]),t("div",$e,[t("div",Ee,[t("div",Ve,[t("div",je,[t("div",Fe,[g(p(j),{class:"w-6 h-6 text-coral-600"})]),t("div",Re,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"}," Total Scholarships ",-1)),t("p",Ie,i(ee.value),1)])])]),t("div",Ue,[t("div",Be,[t("div",Oe,[g(p(Ae),{class:"w-6 h-6 text-green-600"})]),t("div",Ge,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Perfect Matches",-1)),t("p",Je,i(te.value),1)])])]),t("div",We,[t("div",qe,[t("div",ze,[g(p(ke),{class:"w-6 h-6 text-purple-600"})]),t("div",Qe,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Value",-1)),t("p",Ye," ₦"+i(se.value.toLocaleString()),1)])])]),t("div",He,[t("div",Ke,[t("div",Xe,[g(p(De),{class:"w-6 h-6 text-amber-600"})]),t("div",Ze,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Ending Soon",-1)),t("p",et,i(oe.value),1)])])])])]),t("div",tt,[t("div",st,[t("div",ot,[t("div",at,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),t("div",rt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),t("div",lt,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.search=s),type:"text",placeholder:"Search scholarships...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},null,512),[[he,r.value.search]]),g(p(Te),{class:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})])]),t("div",nt,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.amountRange=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},e[14]||(e[14]=[t("option",{value:""},"Any Amount",-1),t("option",{value:"0-50000"},"₦0 - ₦50,000",-1),t("option",{value:"50000-100000"},"₦50,000 - ₦100,000",-1),t("option",{value:"100000-300000"},"₦100,000 - ₦300,000",-1),t("option",{value:"300000+"},"₦300,000+",-1)]),512),[[y,r.value.amountRange]])]),t("div",it,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),x(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.school=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},[e[16]||(e[16]=t("option",{value:""},"Any School",-1)),(l(!0),n(D,null,T(K.value,s=>(l(),n("option",{key:s,value:s},i(s),9,dt))),128))],512),[[y,r.value.school]])]),t("div",ut,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course",-1)),x(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.course=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},[e[18]||(e[18]=t("option",{value:""},"Any Course",-1)),(l(!0),n(D,null,T(X.value,s=>(l(),n("option",{key:s,value:s},i(s),9,ct))),128))],512),[[y,r.value.course]])]),t("div",mt,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Level",-1)),x(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.level=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},[e[20]||(e[20]=t("option",{value:""},"Any Level",-1)),(l(!0),n(D,null,T(Z.value,s=>(l(),n("option",{key:s,value:s},i(s)+" Level ",9,pt))),128))],512),[[y,r.value.level]])]),t("div",gt,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),x(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>r.value.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},e[22]||(e[22]=[t("option",{value:""},"All",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"ending_soon"},"Ending Soon",-1)]),512),[[y,r.value.status]])]),t("button",{onClick:B,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Clear All Filters ")])]),t("div",vt,[t("div",ft,[t("div",null,[t("p",ht,i(w.value.length)+" scholarship"+i(w.value.length!==1?"s":"")+" found ",1)]),t("div",xt,[x(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>$.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-coral-500 focus:border-transparent"},e[25]||(e[25]=[t("option",{value:"deadline"},"Sort by Deadline",-1),t("option",{value:"amount"},"Sort by Amount",-1),t("option",{value:"created"},"Sort by Newest",-1),t("option",{value:"match"},"Sort by Match",-1)]),512),[[y,$.value]])])]),C.value?(l(),n("div",yt,[(l(),n(D,null,T(6,s=>t("div",{key:s,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse"},e[26]||(e[26]=[t("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-4"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-full mb-2"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-2/3"},null,-1)]))),64))])):(l(),n("div",bt,[(l(!0),n(D,null,T(R.value,s=>{var d,A;return l(),n("div",{key:s._id,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow"},[t("div",_t,[t("div",wt,[t("div",St,[t("div",At,[s.sponsorAvatar?(l(),n("img",{key:0,src:s.sponsorAvatar,alt:s.sponsorName,class:"w-10 h-10 rounded-full"},null,8,kt)):(l(),V(p(j),{key:1,class:"w-6 h-6 text-coral-600"}))]),t("div",null,[t("h3",Dt,i(s.scholarshipTitle),1),t("p",Tt,i(((d=s.sponsorId)==null?void 0:d.email)||"Anonymous Sponsor"),1)])]),t("div",Ct,[S(s)?(l(),n("span",Nt," Perfect Match ")):f("",!0),I(s)?(l(),n("span",Mt," Ending Soon ")):f("",!0),s.isActive?(l(),n("span",Lt," Active ")):f("",!0),t("button",{onClick:P=>le(s._id),class:W(["p-2 rounded-lg transition-colors",v.value.includes(s._id)?"text-coral-600 bg-coral-100":"text-gray-400 hover:text-gray-600"])},[g(p(z),{class:"w-4 h-4"})],10,Pt)])]),t("p",$t,i(s.scholarshipDescription),1),t("div",Et,[t("div",Vt,[e[27]||(e[27]=t("span",{class:"text-gray-600"},"Amount:",-1)),t("span",jt,"₦"+i((A=s.scholarshipAmountPerStudent)==null?void 0:A.toLocaleString()),1)]),t("div",Ft,[e[28]||(e[28]=t("span",{class:"text-gray-600"},"Duration:",-1)),t("span",Rt,i(ce(s.scholarshipDuration)),1)]),t("div",It,[e[29]||(e[29]=t("span",{class:"text-gray-600"},"Awards Available:",-1)),t("span",Ut,i(s.scholarshipNumberOfAwards),1)]),t("div",Bt,[e[30]||(e[30]=t("span",{class:"text-gray-600"},"Deadline:",-1)),t("span",Ot,i(ue(s.scholarshipDeadline)),1)]),s.scholarshipTargetGPA?(l(),n("div",Gt,[e[31]||(e[31]=t("span",{class:"text-gray-600"},"Min GPA:",-1)),t("span",Jt,i(s.scholarshipTargetGPA),1)])):f("",!0)]),t("div",Wt,[g(a,{to:`/student/scholarships/${s._id}`,class:"flex-1 px-4 py-2 bg-coral-600 text-white text-center rounded-lg hover:bg-coral-700 transition-colors font-medium"},{default:J(()=>e[32]||(e[32]=[q(" View Details ")])),_:2,__:[32]},1032,["to"]),S(s)?(l(),n("button",{key:0,onClick:P=>ne(s),class:"px-4 py-2 border border-coral-600 text-coral-600 rounded-lg hover:bg-coral-50 transition-colors font-medium"}," Quick Apply ",8,qt)):f("",!0)])])])}),128))])),!C.value&&w.value.length===0?(l(),n("div",zt,[g(p(j),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[33]||(e[33]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," No scholarships found ",-1)),e[34]||(e[34]=t("p",{class:"text-gray-600 mb-4"}," Try adjusting your filters to see more results ",-1)),t("button",{onClick:B,class:"px-4 py-2 bg-coral-600 text-white rounded-lg hover:bg-coral-700 transition-colors"}," Clear Filters ")])):f("",!0),re.value&&!C.value?(l(),n("div",Qt,[t("button",{onClick:de,class:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Load More Scholarships ")])):f("",!0)])])]),M.value?(l(),V(Se,{key:0,show:M.value,type:"scholarship",item:h.value,onClose:U,onSubmit:ie},null,8,["show","item"])):f("",!0)])]),_:1},8,["navigation-items"])}}};export{ms as default};
