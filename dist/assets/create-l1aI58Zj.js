import{a as R,r as D,c as N,p as d,e as i,g as e,h as w,i as y,j as A,k as c,F as V,q as M,d as B,Q as H,t as u,n as W,A as T,l as p,m as P,R as Y,v as $,z as Z,x as ee,f as te,S as F}from"./index-EqsJQukp.js";import{u as se}from"./disbursements-CwUyKRsw.js";import{c as oe,F as x,a as ae,_ as le}from"./navItems-BcGEYHfz.js";import{u as re}from"./applications-CVJmNFuW.js";import{P as ne}from"./plus-CSARlkxq.js";import{D as ie}from"./download-BJtAvwcW.js";import{T as de}from"./trash-2-DFi_VBzd.js";import{T as ue}from"./triangle-alert-BzJOwHRj.js";import{X as j}from"./x-c6Y77DFi.js";import{U as me}from"./upload-C3RSQhGF.js";import{C as ce}from"./circle-check-big-BfLp0Q0m.js";import{m as pe}from"./mockOffers-tLQoW2PK.js";import{m as fe}from"./mockScholarships-Bp4Th3aO.js";import"./authHeader-DkpUnqMe.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=oe("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ve={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},be={class:"flex items-center justify-between mb-6"},ge={key:0,class:"space-y-4"},xe={class:"flex items-center justify-between"},we={class:"flex items-center space-x-3"},he={class:"p-2 bg-gray-100 rounded-lg"},De={class:"font-medium text-gray-900"},ke={class:"flex items-center space-x-2 text-sm text-gray-500"},Te={class:"flex items-center space-x-3"},$e={class:"flex items-center space-x-1"},Ue=["onClick"],Se=["onClick"],Ce=["onClick"],Ie={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},Fe={class:"flex items-start space-x-2"},Ne={class:"text-sm text-yellow-700 mt-1"},Ve={key:1,class:"text-center py-12"},Me={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},Pe={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},_e={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},je={class:"flex items-center justify-between mb-6"},Re={key:0},Ae={key:0},Be={key:1,class:"flex items-center justify-center space-x-2"},Oe={class:"text-sm font-medium text-gray-900"},qe={key:1,class:"space-y-2"},ze={class:"flex justify-between text-sm"},Le={class:"text-gray-900"},Ee={class:"w-full bg-gray-200 rounded-full h-2"},Ge={class:"flex space-x-3 pt-4"},Je=["disabled"],Xe={__name:"DocumentUpload",props:{applicationId:{type:Number,required:!0},documents:{type:Array,default:()=>[]}},emits:["documentsUpdated"],setup(U,{emit:S}){const C=U,k=S,m=R(),o=re(),v=D(!1),g=D(!1),f=D(0),r=D({documentType:"",customName:"",selectedFile:null}),t=N(()=>r.value.documentType&&r.value.selectedFile&&(r.value.documentType!=="other"||r.value.customName)),a=l=>({pdf:x,doc:x,docx:x,jpg:x,jpeg:x,png:x})[l.toLowerCase()]||x,b=l=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",under_review:"bg-blue-100 text-blue-800"})[l]||"bg-gray-100 text-gray-800",h=l=>({pending:"Pending Review",approved:"Approved",rejected:"Rejected",under_review:"Under Review"})[l]||l,O=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q=l=>{const s=l.target.files[0];if(s){if(s.size>10*1024*1024){m.addNotification({type:"error",title:"File Too Large",message:"Please select a file smaller than 10MB."});return}r.value.selectedFile=s}},z=l=>{const s=l.dataTransfer.files;if(s.length>0){const n=s[0];if(n.size>10*1024*1024){m.addNotification({type:"error",title:"File Too Large",message:"Please select a file smaller than 10MB."});return}r.value.selectedFile=n}},L=()=>new Promise(l=>{f.value=0;const s=setInterval(()=>{f.value+=10,f.value>=100&&(clearInterval(s),l())},200)}),E=async()=>{if(t.value){g.value=!0;try{await L();const l=r.value.documentType==="other"?r.value.customName:G(r.value.documentType),s={id:Date.now(),name:l,type:r.value.selectedFile.type.split("/")[1]||"pdf",size:`${(r.value.selectedFile.size/(1024*1024)).toFixed(2)} MB`,status:"pending",uploadedAt:new Date().toISOString(),feedback:null};await o.uploadDocument(C.applicationId,s),m.addNotification({type:"success",title:"Document Uploaded",message:`${l} has been uploaded successfully.`}),k("documentsUpdated"),I()}catch{m.addNotification({type:"error",title:"Upload Failed",message:"Failed to upload document. Please try again."})}finally{g.value=!1,f.value=0}}},G=l=>({transcript:"Academic Transcript",recommendation:"Letter of Recommendation",statement:"Personal Statement",identification:"Valid ID",certificate:"Certificate"})[l]||l,J=l=>{m.addNotification({type:"info",title:"Download Started",message:`Downloading ${l.name}...`})},X=l=>{r.value.documentType=K(l.name),v.value=!0},K=l=>({"Academic Transcript":"transcript","Letter of Recommendation":"recommendation","Personal Statement":"statement","Valid ID":"identification",Certificate:"certificate"})[l]||"other",Q=async l=>{if(confirm(`Are you sure you want to delete "${l.name}"?`))try{await o.deleteDocument(C.applicationId,l.id),m.addNotification({type:"info",title:"Document Deleted",message:`${l.name} has been deleted.`}),k("documentsUpdated")}catch{m.addNotification({type:"error",title:"Delete Failed",message:"Failed to delete document. Please try again."})}},I=()=>{v.value=!1,r.value={documentType:"",customName:"",selectedFile:null},f.value=0,g.value=!1};return(l,s)=>(i(),d("div",ve,[e("div",be,[s[8]||(s[8]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Document Management",-1)),e("button",{onClick:s[0]||(s[0]=n=>v.value=!0),class:"px-4 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 transition-colors"},[y(c(ne),{class:"w-4 h-4 mr-2 inline"}),s[7]||(s[7]=A(" Upload Document "))])]),U.documents.length>0?(i(),d("div",ge,[(i(!0),d(V,null,M(U.documents,n=>(i(),d("div",{key:n.id,class:"border border-gray-200 rounded-xl p-4"},[e("div",xe,[e("div",we,[e("div",he,[(i(),B(H(a(n.type)),{class:"w-5 h-5 text-gray-600"}))]),e("div",null,[e("h4",De,u(n.name),1),e("div",ke,[e("span",null,u(n.type.toUpperCase()),1),s[9]||(s[9]=e("span",null,"•",-1)),e("span",null,u(n.size),1),s[10]||(s[10]=e("span",null,"•",-1)),e("span",null,u(O(n.uploadedAt)),1)])])]),e("div",Te,[e("span",{class:W([b(n.status),"px-2 py-1 rounded-full text-xs font-medium"])},u(h(n.status)),3),e("div",$e,[e("button",{onClick:_=>J(n),class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Download"},[y(c(ie),{class:"w-4 h-4"})],8,Ue),e("button",{onClick:_=>X(n),class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Replace"},[y(c(ye),{class:"w-4 h-4"})],8,Se),e("button",{onClick:_=>Q(n),class:"p-2 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50",title:"Delete"},[y(c(de),{class:"w-4 h-4"})],8,Ce)])])]),n.feedback?(i(),d("div",Ie,[e("div",Fe,[y(c(ue),{class:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-yellow-800"},"Feedback from Reviewer:",-1)),e("p",Ne,u(n.feedback),1)])])])):w("",!0)]))),128))])):(i(),d("div",Ve,[y(c(x),{class:"mx-auto h-12 w-12 text-gray-400"}),s[12]||(s[12]=e("h3",{class:"mt-4 text-sm font-medium text-gray-900"},"No documents uploaded",-1)),s[13]||(s[13]=e("p",{class:"mt-2 text-sm text-gray-500"},"Upload your required documents to complete your application.",-1)),e("button",{onClick:s[1]||(s[1]=n=>v.value=!0),class:"mt-4 px-4 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 transition-colors"}," Upload First Document ")])),v.value?(i(),d("div",Me,[e("div",Pe,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:I}),e("div",_e,[e("div",je,[s[14]||(s[14]=e("h3",{class:"text-lg font-bold text-gray-900"},"Upload Document",-1)),e("button",{onClick:I,class:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100"},[y(c(j),{class:"w-5 h-5"})])]),e("form",{onSubmit:T(E,["prevent"]),class:"space-y-4"},[e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Document Type",-1)),p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>r.value.documentType=n),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500"},s[15]||(s[15]=[Y('<option value="">Select document type</option><option value="transcript">Academic Transcript</option><option value="recommendation">Letter of Recommendation</option><option value="statement">Personal Statement</option><option value="identification">Valid ID</option><option value="certificate">Certificate</option><option value="other">Other</option>',7)]),512),[[P,r.value.documentType]])]),r.value.documentType==="other"?(i(),d("div",Re,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Custom Document Name",-1)),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>r.value.customName=n),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter document name"},null,512),[[$,r.value.customName]])])):w("",!0),e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select File",-1)),e("div",{class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-coral-500 transition-colors cursor-pointer",onClick:s[5]||(s[5]=n=>l.$refs.fileInput.click()),onDragover:s[6]||(s[6]=T(()=>{},["prevent"])),onDrop:T(z,["prevent"])},[e("input",{ref:"fileInput",type:"file",class:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:q},null,544),r.value.selectedFile?(i(),d("div",Be,[y(c(ce),{class:"w-6 h-6 text-green-500"}),e("span",Oe,u(r.value.selectedFile.name),1),e("button",{type:"button",onClick:s[4]||(s[4]=T(n=>r.value.selectedFile=null,["stop"])),class:"p-1 text-gray-400 hover:text-red-500"},[y(c(j),{class:"w-4 h-4"})])])):(i(),d("div",Ae,[y(c(me),{class:"mx-auto h-12 w-12 text-gray-400"}),s[18]||(s[18]=e("div",{class:"mt-4"},[e("p",{class:"text-sm font-medium text-gray-900"},"Click to upload or drag and drop"),e("p",{class:"text-xs text-gray-500 mt-1"},"PDF, DOC, DOCX, JPG, PNG up to 10MB")],-1))]))],32)]),f.value>0&&f.value<100?(i(),d("div",qe,[e("div",ze,[s[20]||(s[20]=e("span",{class:"text-gray-600"},"Uploading...",-1)),e("span",Le,u(f.value)+"%",1)]),e("div",Ee,[e("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:Z({width:`${f.value}%`})},null,4)])])):w("",!0),e("div",Ge,[e("button",{type:"button",onClick:I,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:!t.value||g.value,class:"flex-1 px-4 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},u(g.value?"Uploading...":"Upload"),9,Je)])],32)])])])):w("",!0)]))}},Ke={class:"min-h-screen bg-gray-50"},Qe={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},He={class:"bg-white shadow-sm rounded-lg p-6"},We={class:"space-y-6"},Ye={class:"flex space-x-4"},Ze={class:"flex items-center"},et={class:"flex items-center"},tt={key:0},st=["for"],ot=["id"],at={value:""},lt=["value"],rt={key:1},nt=["value"],it={class:"bg-white shadow-sm rounded-lg p-6"},dt={class:"space-y-6"},ut={class:"flex space-x-4"},mt={class:"flex items-center"},ct={class:"flex items-center"},pt={key:0},ft={class:"flex items-center justify-end space-x-4"},yt=["disabled"],vt={key:0,class:"mr-2"},Nt={__name:"create",setup(U){const S=ee(),C=se(),k=R(),m=D(!1),o=D({programType:"",programId:"",beneficiaryId:"",disbursementType:"",amount:null,description:"",disbursementDate:"",proofOfDisbursement:null,notes:""}),v=N(()=>o.value.programType==="offer"?pe.map(r=>({id:r.id,title:r.offerTitle})):o.value.programType==="scholarship"?fe.map(r=>({id:r.id,title:r.title})):[]),g=N(()=>[{id:101,name:"John Smith"},{id:102,name:"Sarah Johnson"},{id:103,name:"Maria Garcia"}]),f=async()=>{var r,t,a;try{m.value=!0;const b={beneficiaryId:o.value.beneficiaryId,beneficiaryName:(r=g.value.find(h=>h.id===o.value.beneficiaryId))==null?void 0:r.name,disbursementType:o.value.disbursementType,description:o.value.description,disbursementDate:o.value.disbursementDate,status:"pending",notes:o.value.notes||void 0,proofOfDisbursement:o.value.proofOfDisbursement};o.value.programType==="offer"?(b.offerId=o.value.programId,b.offerTitle=(t=v.value.find(h=>h.id===o.value.programId))==null?void 0:t.title):(b.scholarshipId=o.value.programId,b.scholarshipTitle=(a=v.value.find(h=>h.id===o.value.programId))==null?void 0:a.title),o.value.disbursementType==="monetary"&&(b.amount=parseFloat(o.value.amount)),await C.createDisbursement(b),k.showSuccess("Disbursement recorded successfully"),S.push("/sponsor/disbursements")}catch{k.showError("Failed to record disbursement")}finally{m.value=!1}};return(r,t)=>(i(),B(le,{"navigation-items":c(ae),"page-title":"Record Disbursement"},{default:te(()=>[e("div",Ke,[e("div",Qe,[t[30]||(t[30]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Record Disbursement"),e("p",{class:"mt-2 text-sm text-gray-600"}," Record a new disbursement for an offer or scholarship beneficiary ")],-1)),e("form",{onSubmit:T(f,["prevent"]),class:"space-y-8"},[e("div",He,[t[17]||(t[17]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Program Information",-1)),e("div",We,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Program Type* ",-1)),e("div",Ye,[e("label",Ze,[p(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>o.value.programType=a),value:"offer",class:"h-4 w-4 text-coral-600 focus:ring-coral-500"},null,512),[[F,o.value.programType]]),t[12]||(t[12]=e("span",{class:"ml-2 text-sm text-gray-700"},"Offer",-1))]),e("label",et,[p(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>o.value.programType=a),value:"scholarship",class:"h-4 w-4 text-coral-600 focus:ring-coral-500"},null,512),[[F,o.value.programType]]),t[13]||(t[13]=e("span",{class:"ml-2 text-sm text-gray-700"},"Scholarship",-1))])])]),o.value.programType?(i(),d("div",tt,[e("label",{for:o.value.programType,class:"block text-sm font-medium text-gray-700"}," Select "+u(o.value.programType==="offer"?"Offer":"Scholarship")+"* ",9,st),p(e("select",{id:o.value.programType,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.programId=a),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},[e("option",at,"Select a "+u(o.value.programType),1),(i(!0),d(V,null,M(v.value,a=>(i(),d("option",{key:a.id,value:a.id},u(a.title),9,lt))),128))],8,ot),[[P,o.value.programId]])])):w("",!0),o.value.programId?(i(),d("div",rt,[t[16]||(t[16]=e("label",{for:"beneficiary",class:"block text-sm font-medium text-gray-700"}," Select Beneficiary* ",-1)),p(e("select",{id:"beneficiary","onUpdate:modelValue":t[3]||(t[3]=a=>o.value.beneficiaryId=a),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},[t[15]||(t[15]=e("option",{value:""},"Select a beneficiary",-1)),(i(!0),d(V,null,M(g.value,a=>(i(),d("option",{key:a.id,value:a.id},u(a.name),9,nt))),128))],512),[[P,o.value.beneficiaryId]])])):w("",!0)])]),e("div",it,[t[27]||(t[27]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Disbursement Details",-1)),e("div",dt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Disbursement Type* ",-1)),e("div",ut,[e("label",mt,[p(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.disbursementType=a),value:"monetary",class:"h-4 w-4 text-coral-600 focus:ring-coral-500"},null,512),[[F,o.value.disbursementType]]),t[18]||(t[18]=e("span",{class:"ml-2 text-sm text-gray-700"},"Monetary",-1))]),e("label",ct,[p(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.disbursementType=a),value:"non-monetary",class:"h-4 w-4 text-coral-600 focus:ring-coral-500"},null,512),[[F,o.value.disbursementType]]),t[19]||(t[19]=e("span",{class:"ml-2 text-sm text-gray-700"},"Non-Monetary",-1))])])]),o.value.disbursementType==="monetary"?(i(),d("div",pt,[t[21]||(t[21]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700"}," Amount ($)* ",-1)),p(e("input",{type:"number",id:"amount","onUpdate:modelValue":t[6]||(t[6]=a=>o.value.amount=a),min:"0",step:"0.01",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,512),[[$,o.value.amount]])])):w("",!0),e("div",null,[t[22]||(t[22]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description* ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=a=>o.value.description=a),rows:"3",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"Describe the disbursement details"},null,512),[[$,o.value.description]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"disbursementDate",class:"block text-sm font-medium text-gray-700"}," Disbursement Date* ",-1)),p(e("input",{type:"date",id:"disbursementDate","onUpdate:modelValue":t[8]||(t[8]=a=>o.value.disbursementDate=a),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,512),[[$,o.value.disbursementDate]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"proofUpload",class:"block text-sm font-medium text-gray-700"}," Proof of Disbursement ",-1)),y(Xe,{id:"proofUpload",modelValue:o.value.proofOfDisbursement,"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.proofOfDisbursement=a),accept:".pdf,.jpg,.jpeg,.png",maxSize:5},null,8,["modelValue"]),t[25]||(t[25]=e("p",{class:"mt-2 text-xs text-gray-500"}," Upload proof of disbursement (receipts, reports, etc.). Max 5MB. ",-1))]),e("div",null,[t[26]||(t[26]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Additional Notes ",-1)),p(e("textarea",{id:"notes","onUpdate:modelValue":t[10]||(t[10]=a=>o.value.notes=a),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"Any additional information about the disbursement"},null,512),[[$,o.value.notes]])])])]),e("div",ft,[e("button",{type:"button",onClick:t[11]||(t[11]=a=>c(S).push("/sponsor/disbursements")),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:m.value,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-coral-600 hover:bg-coral-700 disabled:opacity-50"},[m.value?(i(),d("span",vt,t[28]||(t[28]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1)]))):w("",!0),t[29]||(t[29]=A(" Record Disbursement "))],8,yt)])],32)])])]),_:1},8,["navigation-items"]))}};export{Nt as default};
