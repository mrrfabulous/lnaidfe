import{s as Y,u as E,b as z,r as b,x as J,e as G,f as Q,g as W,o as n,h as q,a as e,A as X,m as r,v as a,t as i,H as k,c as d,F as y,q as v,k as w,B as M,p as L,i as p,l as Z,j as ee,_ as te}from"./index-CXEPaLLm.js";import{u as oe}from"./offers-DDnHsAj8.js";const se={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ie={class:"space-y-6"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"text-sm text-gray-500 mt-1"},ne={class:"space-y-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"space-y-2"},ue={class:"flex"},me={class:"flex flex-wrap gap-2"},ce=["onClick"],ge={class:"space-y-2"},pe={class:"flex"},fe={class:"flex flex-wrap gap-2"},xe=["onClick"],be={class:"space-y-2"},ye=["id","value"],ve=["for"],ke={class:"grid grid-cols-2 gap-4"},we={class:"space-y-2"},Ae={class:"inline-flex items-center"},he={class:"grid grid-cols-2 gap-4 max-w-md"},Pe={class:"space-y-6"},Ce={class:"space-y-2"},Se={class:"flex"},Be={class:"space-y-2"},Re={class:"text-sm text-gray-900"},Ve=["onClick"],Ge={class:"space-y-6 border-t pt-6"},qe={class:"bg-gray-50 rounded-lg p-6"},Me={class:"flex justify-between items-start mb-4"},Le={class:"text-lg font-semibold text-gray-900"},Ue={class:"text-sm text-gray-600"},Ne={class:"text-right"},_e={class:"text-2xl font-bold text-green-600"},De={class:"text-gray-700 mb-4"},Oe={class:"grid grid-cols-2 gap-4 text-sm"},Te={class:"ml-2"},Fe={class:"ml-2"},$e={class:"ml-2"},je={class:"ml-2"},He={key:0,class:"mt-4 pt-4 border-t"},Ie={class:"flex flex-wrap gap-2"},Ke={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded"},Ye={key:1,class:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded"},Ee={key:2,class:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded"},ze={key:3,class:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded"},Je={key:4,class:"px-2 py-1 bg-pink-100 text-pink-800 text-xs rounded"},Qe={class:"border-t pt-6"},We={class:"flex justify-end space-x-4"},Xe=["disabled"],ot={__name:"create-offer",setup(Ze){const U=Y(),f=E(),N=oe(),A=z(),x=b(!1),m=b(""),c=b(""),g=b(""),_=["100 Level","200 Level","300 Level","400 Level","500 Level","Postgraduate"],o=J({title:"",description:"",amount:"",totalBudget:"",deadline:"",criteria:{schools:[],courses:[],levels:[],minGPA:"",maxGPA:"",gender:"any",financialNeed:!1,ageRange:{min:"",max:""}},requirements:["Academic transcript","Cover letter"],selectionProcess:"merit_based"}),D=G(()=>o.title&&o.description&&o.amount&&o.totalBudget&&o.deadline&&o.amount<=o.totalBudget),O=G(()=>o.criteria.schools.length>0||o.criteria.courses.length>0||o.criteria.levels.length>0||o.criteria.minGPA||o.criteria.gender!=="any"||o.criteria.financialNeed),h=()=>{m.value.trim()&&!o.criteria.schools.includes(m.value.trim())&&(o.criteria.schools.push(m.value.trim()),m.value="")},T=l=>{o.criteria.schools.splice(l,1)},P=()=>{c.value.trim()&&!o.criteria.courses.includes(c.value.trim())&&(o.criteria.courses.push(c.value.trim()),c.value="")},F=l=>{o.criteria.courses.splice(l,1)},C=()=>{g.value.trim()&&!o.requirements.includes(g.value.trim())&&(o.requirements.push(g.value.trim()),g.value="")},$=l=>{o.requirements.splice(l,1)},j=l=>l?new Date(l).toLocaleDateString():"",H=l=>({first_come_first_serve:"First Come, First Serve",merit_based:"Merit-Based",holistic:"Holistic Review",lottery:"Random Selection"})[l]||l,I=async()=>{x.value=!0;try{const l={sponsorId:f.user.id,sponsorName:f.user.name,sponsorAvatar:f.user.avatar,title:o.title,description:o.description,amount:o.amount,totalBudget:o.totalBudget,maxRecipients:Math.floor(o.totalBudget/o.amount),criteria:{...o.criteria,ageRange:o.criteria.ageRange.min&&o.criteria.ageRange.max?o.criteria.ageRange:null},requirements:o.requirements,selectionProcess:o.selectionProcess,deadline:o.deadline},t=N.createOffer(l);A.addNotification({type:"success",title:"Offer created successfully!",message:"Your funding offer is now live and visible to eligible students."}),U.push(`/offers/${t.id}`)}catch{A.addNotification({type:"error",title:"Failed to create offer",message:"An error occurred while creating your offer. Please try again."})}finally{x.value=!1}};return(l,t)=>{const K=Q("router-link");return n(),W(te,null,{default:q(()=>{var S,B,R;return[e("div",se,[t[55]||(t[55]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Create Funding Offer"),e("p",{class:"text-gray-600 mt-2"},"Set up a targeted funding offer for students based on specific criteria")],-1)),e("form",{onSubmit:X(I,["prevent"]),class:"bg-white rounded-lg shadow p-8 space-y-8"},[e("div",ie,[t[21]||(t[21]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b pb-2"},"Basic Information",-1)),e("div",re,[e("div",null,[t[16]||(t[16]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Offer Title *",-1)),r(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>o.title=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Tech Innovation Grant"},null,512),[[a,o.title]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700 mb-2"},"Amount per Student (₦) *",-1)),r(e("input",{id:"amount","onUpdate:modelValue":t[1]||(t[1]=s=>o.amount=s),type:"number",required:"",min:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"100000"},null,512),[[a,o.amount,void 0,{number:!0}]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"totalBudget",class:"block text-sm font-medium text-gray-700 mb-2"},"Total Budget (₦) *",-1)),r(e("input",{id:"totalBudget","onUpdate:modelValue":t[2]||(t[2]=s=>o.totalBudget=s),type:"number",required:"",min:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"500000"},null,512),[[a,o.totalBudget,void 0,{number:!0}]]),e("p",le," Maximum "+i(Math.floor(o.totalBudget/o.amount)||0)+" students can benefit ",1)]),e("div",null,[t[19]||(t[19]=e("label",{for:"deadline",class:"block text-sm font-medium text-gray-700 mb-2"},"Application Deadline *",-1)),r(e("input",{id:"deadline","onUpdate:modelValue":t[3]||(t[3]=s=>o.deadline=s),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[a,o.deadline]])])]),e("div",null,[t[20]||(t[20]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),r(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=s=>o.description=s),required:"",rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe the purpose of this offer, what you're looking for in applicants, and how the funds should be used..."},null,512),[[a,o.description]])])]),e("div",ne,[t[39]||(t[39]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b pb-2"},"Targeting Criteria",-1)),t[40]||(t[40]=e("p",{class:"text-gray-600"},"Define who can apply for this offer. Leave fields empty to include all students.",-1)),e("div",de,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Schools",-1)),e("div",ae,[e("div",ue,[r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.value=s),type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"University name",onKeyup:k(h,["enter"])},null,544),[[a,m.value]]),e("button",{type:"button",onClick:h,class:"px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700"}," Add ")]),e("div",me,[(n(!0),d(y,null,v(o.criteria.schools,(s,u)=>(n(),d("span",{key:u,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800"},[w(i(s)+" ",1),e("button",{type:"button",onClick:V=>T(u),class:"ml-2 text-blue-600 hover:text-blue-800"}," × ",8,ce)]))),128))]),t[22]||(t[22]=e("p",{class:"text-xs text-gray-500"},"Leave empty to include all schools",-1))])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Courses",-1)),e("div",ge,[e("div",pe,[r(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value=s),type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Course name",onKeyup:k(P,["enter"])},null,544),[[a,c.value]]),e("button",{type:"button",onClick:P,class:"px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700"}," Add ")]),e("div",fe,[(n(!0),d(y,null,v(o.criteria.courses,(s,u)=>(n(),d("span",{key:u,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800"},[w(i(s)+" ",1),e("button",{type:"button",onClick:V=>F(u),class:"ml-2 text-green-600 hover:text-green-800"}," × ",8,xe)]))),128))]),t[24]||(t[24]=e("p",{class:"text-xs text-gray-500"},"Leave empty to include all courses",-1))])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Levels",-1)),e("div",be,[(n(),d(y,null,v(_,s=>e("div",{key:s,class:"flex items-center"},[r(e("input",{id:`level-${s}`,"onUpdate:modelValue":t[7]||(t[7]=u=>o.criteria.levels=u),value:s,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,ye),[[M,o.criteria.levels]]),e("label",{for:`level-${s}`,class:"ml-2 block text-sm text-gray-900"},i(s),9,ve)])),64)),t[26]||(t[26]=e("p",{class:"text-xs text-gray-500"},"Select none to include all levels",-1))])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GPA Requirements",-1)),e("div",ke,[e("div",null,[t[28]||(t[28]=e("label",{for:"minGPA",class:"block text-xs text-gray-500 mb-1"},"Minimum GPA",-1)),r(e("input",{id:"minGPA","onUpdate:modelValue":t[8]||(t[8]=s=>o.criteria.minGPA=s),type:"number",step:"0.01",min:"0",max:"5",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"},null,512),[[a,o.criteria.minGPA,void 0,{number:!0}]])]),e("div",null,[t[29]||(t[29]=e("label",{for:"maxGPA",class:"block text-xs text-gray-500 mb-1"},"Maximum GPA",-1)),r(e("input",{id:"maxGPA","onUpdate:modelValue":t[9]||(t[9]=s=>o.criteria.maxGPA=s),type:"number",step:"0.01",min:"0",max:"5",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"5.00"},null,512),[[a,o.criteria.maxGPA,void 0,{number:!0}]])])]),t[31]||(t[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty for no GPA restrictions",-1))]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gender Preference",-1)),r(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.criteria.gender=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},t[32]||(t[32]=[e("option",{value:"any"},"Any Gender",-1),e("option",{value:"male"},"Male Only",-1),e("option",{value:"female"},"Female Only",-1)]),512),[[L,o.criteria.gender]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Financial Need",-1)),e("div",we,[e("label",Ae,[r(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.criteria.financialNeed=s),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[M,o.criteria.financialNeed]]),t[34]||(t[34]=e("span",{class:"ml-2 text-sm text-gray-900"},"Require proof of financial need",-1))])])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Age Range",-1)),e("div",he,[e("div",null,[t[36]||(t[36]=e("label",{for:"minAge",class:"block text-xs text-gray-500 mb-1"},"Minimum Age",-1)),r(e("input",{id:"minAge","onUpdate:modelValue":t[12]||(t[12]=s=>o.criteria.ageRange.min=s),type:"number",min:"16",max:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"18"},null,512),[[a,o.criteria.ageRange.min,void 0,{number:!0}]])]),e("div",null,[t[37]||(t[37]=e("label",{for:"maxAge",class:"block text-xs text-gray-500 mb-1"},"Maximum Age",-1)),r(e("input",{id:"maxAge","onUpdate:modelValue":t[13]||(t[13]=s=>o.criteria.ageRange.max=s),type:"number",min:"16",max:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"30"},null,512),[[a,o.criteria.ageRange.max,void 0,{number:!0}]])])])])]),e("div",Pe,[t[46]||(t[46]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b pb-2"},"Application Requirements",-1)),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Required Documents/Information",-1)),e("div",Ce,[e("div",Se,[r(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>g.value=s),type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Academic transcript",onKeyup:k(C,["enter"])},null,544),[[a,g.value]]),e("button",{type:"button",onClick:C,class:"px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700"}," Add ")]),e("div",Be,[(n(!0),d(y,null,v(o.requirements,(s,u)=>(n(),d("div",{key:u,class:"flex items-center justify-between p-3 bg-gray-50 rounded-md"},[e("span",Re,i(s),1),e("button",{type:"button",onClick:V=>$(u),class:"text-red-600 hover:text-red-800"},t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ve)]))),128))])])]),e("div",null,[t[44]||(t[44]=e("label",{for:"selectionProcess",class:"block text-sm font-medium text-gray-700 mb-2"},"Selection Process",-1)),r(e("select",{id:"selectionProcess","onUpdate:modelValue":t[15]||(t[15]=s=>o.selectionProcess=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},t[43]||(t[43]=[e("option",{value:"first_come_first_serve"},"First Come, First Serve",-1),e("option",{value:"merit_based"},"Merit-Based Selection",-1),e("option",{value:"holistic"},"Holistic Review",-1),e("option",{value:"lottery"},"Random Selection (Lottery)",-1)]),512),[[L,o.selectionProcess]]),t[45]||(t[45]=e("p",{class:"text-sm text-gray-500 mt-1"}," How will you select recipients from eligible applicants? ",-1))])]),e("div",Ge,[t[53]||(t[53]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Preview",-1)),e("div",qe,[e("div",Me,[e("div",null,[e("h3",Le,i(o.title||"Offer Title"),1),e("p",Ue,"by "+i(((S=Z(f).user)==null?void 0:S.name)||"Your Name"),1)]),e("div",Ne,[e("div",_e,"₦"+i(((B=o.amount)==null?void 0:B.toLocaleString())||"0"),1),t[47]||(t[47]=e("div",{class:"text-sm text-gray-500"},"per student",-1))])]),e("p",De,i(o.description||"Offer description will appear here..."),1),e("div",Oe,[e("div",null,[t[48]||(t[48]=e("span",{class:"font-medium text-gray-900"},"Total Budget:",-1)),e("span",Te,"₦"+i(((R=o.totalBudget)==null?void 0:R.toLocaleString())||"0"),1)]),e("div",null,[t[49]||(t[49]=e("span",{class:"font-medium text-gray-900"},"Max Recipients:",-1)),e("span",Fe,i(Math.floor(o.totalBudget/o.amount)||0)+" students",1)]),e("div",null,[t[50]||(t[50]=e("span",{class:"font-medium text-gray-900"},"Deadline:",-1)),e("span",$e,i(j(o.deadline)||"Not set"),1)]),e("div",null,[t[51]||(t[51]=e("span",{class:"font-medium text-gray-900"},"Selection:",-1)),e("span",je,i(H(o.selectionProcess)),1)])]),O.value?(n(),d("div",He,[t[52]||(t[52]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Targeting Criteria:",-1)),e("div",Ie,[o.criteria.schools.length?(n(),d("span",Ke,i(o.criteria.schools.length)+" school(s) ",1)):p("",!0),o.criteria.courses.length?(n(),d("span",Ye,i(o.criteria.courses.length)+" course(s) ",1)):p("",!0),o.criteria.levels.length?(n(),d("span",Ee,i(o.criteria.levels.length)+" level(s) ",1)):p("",!0),o.criteria.minGPA?(n(),d("span",ze," Min GPA: "+i(o.criteria.minGPA),1)):p("",!0),o.criteria.gender!=="any"?(n(),d("span",Je,i(o.criteria.gender)+" only ",1)):p("",!0)])])):p("",!0)])]),e("div",Qe,[e("div",We,[ee(K,{to:"/sponsor/dashboard",class:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:q(()=>t[54]||(t[54]=[w(" Cancel ")])),_:1,__:[54]}),e("button",{type:"submit",disabled:x.value||!D.value,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},i(x.value?"Creating Offer...":"Create Offer"),9,Xe)])])],32)])]}),_:1})}}};export{ot as default};
