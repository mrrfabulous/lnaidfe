import{x as E,s as L,a as U,r as b,y as q,o as M,b as V,d as C,e as i,f as c,g as e,p as d,i as m,k as g,j as k,A as D,l as r,v as n,m as v,t as P}from"./index-EqsJQukp.js";import{u as B}from"./appeals-CM2mXlLj.js";import{s as N,_ as F}from"./navItems-BcGEYHfz.js";import{A as I}from"./arrow-left-D6W7qwCh.js";import"./authHeader-DkpUnqMe.js";const j={class:"min-h-screen bg-gray-50"},R={class:"bg-white border-b border-gray-200"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},O={class:"flex items-center justify-between h-16"},Y={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},$={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},z={class:"text-center"},G={key:2,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},H={class:"space-y-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={class:"flex justify-between items-center mt-2"},Q={class:"text-sm text-gray-500"},W={class:"space-y-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={class:"space-y-6"},_={class:"border-t border-gray-200 pt-6"},ee={class:"flex justify-end space-x-4"},te=["disabled"],oe={key:0},se={key:1},ue={__name:"[id]",setup(le){const w=E(),f=L(),u=B(),x=U(),A=b(!0),p=b(!1),l=b(null),o=q({title:"",category:"",targetAmount:0,description:"",school:"",course:"",level:"",gpa:"",status:"active"});M(async()=>{await h()});const h=async()=>{try{u.appeals.length===0&&u.initializeAppeals();const a=f.params.id;l.value=u.getAppealById(parseInt(a)),l.value&&Object.assign(o,{title:l.value.title||"",category:l.value.category||"",targetAmount:l.value.targetAmount||0,description:l.value.description||"",school:l.value.school||"",course:l.value.course||"",level:l.value.level||"",gpa:l.value.gpa||"",status:l.value.status||"active"}),A.value=!1}catch(a){console.error("Error loading appeal:",a),x.addNotification({type:"error",title:"Error loading appeal",message:"Could not load appeal data. Please try again."}),w.push("/student/appeals")}},S=async()=>{p.value=!0;try{const a={title:o.title,category:o.category,targetAmount:o.targetAmount,description:o.description,school:o.school,course:o.course,level:o.level,gpa:o.gpa,status:o.status,updatedAt:new Date().toISOString()};u.updateAppeal(l.value.id,a),x.addNotification({type:"success",title:"Appeal updated",message:"Your appeal has been successfully updated."}),w.push(`/student/appeals/${l.value.id}`)}catch(a){console.error("Error updating appeal:",a),x.addNotification({type:"error",title:"Update failed",message:"Failed to update your appeal. Please try again."})}finally{p.value=!1}};return(a,t)=>{const y=V("router-link");return i(),C(F,{"page-title":"Edit Funding Appeal","page-subtitle":"","navigation-items":g(N)},{default:c(()=>[e("div",j,[e("div",R,[e("div",T,[e("div",O,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Appeal"),e("p",{class:"text-sm text-gray-500"},"Update your funding appeal details")],-1)),m(y,{to:`/student/appeals/${g(f).params.id}`,class:"text-gray-600 hover:text-gray-800 transition-colors duration-200 flex items-center space-x-2"},{default:c(()=>[m(g(I),{class:"h-5 w-5"}),t[9]||(t[9]=e("span",null,"Back to Appeal",-1))]),_:1,__:[9]},8,["to"])])])]),A.value?(i(),d("div",Y,t[11]||(t[11]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-coral-500 mx-auto"}),e("p",{class:"text-gray-600 mt-4"},"Loading appeal...")],-1)]))):l.value?(i(),d("div",G,[e("form",{onSubmit:D(S,["prevent"]),class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8"},[e("div",H,[t[20]||(t[20]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Basic Information",-1)),e("div",null,[t[15]||(t[15]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Title *",-1)),r(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>o.title=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"e.g., Computer Science Textbooks for Final Year Project"},null,512),[[n,o.title]])]),e("div",J,[e("div",null,[t[17]||(t[17]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),r(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=s=>o.category=s),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[16]||(t[16]=[e("option",{value:""},"Select a category",-1),e("option",{value:"Education Materials"},"Education Materials",-1),e("option",{value:"Research Equipment"},"Research Equipment",-1),e("option",{value:"Laboratory Equipment"},"Laboratory Equipment",-1),e("option",{value:"School Fees"},"School Fees",-1),e("option",{value:"Medical Equipment"},"Medical Equipment",-1),e("option",{value:"Research Materials"},"Research Materials",-1),e("option",{value:"Professional Development"},"Professional Development",-1),e("option",{value:"Other"},"Other",-1)]),512),[[v,o.category]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"targetAmount",class:"block text-sm font-medium text-gray-700 mb-2"},"Target Amount (â‚¦) *",-1)),r(e("input",{id:"targetAmount","onUpdate:modelValue":t[2]||(t[2]=s=>o.targetAmount=s),type:"number",required:"",min:"1000",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"50,000"},null,512),[[n,o.targetAmount,void 0,{number:!0}]])])]),e("div",null,[t[19]||(t[19]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),r(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=s=>o.description=s),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors resize-none",placeholder:"Explain your funding needs, how the money will be used, and why it's important for your education..."},null,512),[[n,o.description]]),e("div",K,[e("p",Q,P(o.description.length)+"/2000 characters",1)])])]),e("div",W,[t[26]||(t[26]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Academic Information",-1)),e("div",X,[e("div",null,[t[21]||(t[21]=e("label",{for:"school",class:"block text-sm font-medium text-gray-700 mb-2"},"School/University *",-1)),r(e("input",{id:"school","onUpdate:modelValue":t[4]||(t[4]=s=>o.school=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"University of Lagos"},null,512),[[n,o.school]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study *",-1)),r(e("input",{id:"course","onUpdate:modelValue":t[5]||(t[5]=s=>o.course=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"Computer Science"},null,512),[[n,o.course]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"level",class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level *",-1)),r(e("select",{id:"level","onUpdate:modelValue":t[6]||(t[6]=s=>o.level=s),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[23]||(t[23]=[e("option",{value:""},"Select level",-1),e("option",{value:"100 Level"},"100 Level",-1),e("option",{value:"200 Level"},"200 Level",-1),e("option",{value:"300 Level"},"300 Level",-1),e("option",{value:"400 Level"},"400 Level",-1),e("option",{value:"Final Year"},"Final Year",-1),e("option",{value:"Masters"},"Masters",-1),e("option",{value:"PhD"},"PhD",-1)]),512),[[v,o.level]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"gpa",class:"block text-sm font-medium text-gray-700 mb-2"},"Current GPA (Optional)",-1)),r(e("input",{id:"gpa","onUpdate:modelValue":t[7]||(t[7]=s=>o.gpa=s),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors",placeholder:"4.5/5.0"},null,512),[[n,o.gpa]])])])]),e("div",Z,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-gray-900 border-b border-gray-200 pb-3"},"Appeal Status",-1)),e("div",null,[t[28]||(t[28]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),r(e("select",{id:"status","onUpdate:modelValue":t[8]||(t[8]=s=>o.status=s),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 transition-colors"},t[27]||(t[27]=[e("option",{value:"active"},"Active",-1),e("option",{value:"paused"},"Paused",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"draft"},"Draft",-1)]),512),[[v,o.status]]),t[29]||(t[29]=e("p",{class:"text-sm text-gray-500 mt-1"},' Choose "Active" to make your appeal visible to sponsors, "Paused" to temporarily hide it, or "Draft" to save without publishing. ',-1))])]),e("div",_,[e("div",ee,[m(y,{to:`/student/appeals/${g(f).params.id}`,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors duration-200"},{default:c(()=>t[31]||(t[31]=[k(" Cancel ")])),_:1,__:[31]},8,["to"]),e("button",{type:"submit",disabled:p.value,class:"px-6 py-3 bg-coral-500 text-white rounded-xl hover:bg-coral-600 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[p.value?(i(),d("span",oe,"Updating...")):(i(),d("span",se,"Update Appeal"))],8,te)])])],32)])):(i(),d("div",$,[e("div",z,[t[13]||(t[13]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Appeal not found",-1)),t[14]||(t[14]=e("p",{class:"text-gray-600 mt-2"},"The appeal you're trying to edit doesn't exist or has been removed.",-1)),m(y,{to:"/student/appeals",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 inline-block mt-4"},{default:c(()=>t[12]||(t[12]=[k(" Back to My Appeals ")])),_:1,__:[12]})])]))])]),_:1},8,["navigation-items"])}}};export{ue as default};
