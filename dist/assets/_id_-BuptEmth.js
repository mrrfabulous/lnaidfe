import{s as A,x as P,a as $,r as y,c as I,o as F,d as N,e as n,f as R,g as t,p as d,A as G,l,v as u,F as w,q as k,t as L,m as h,i as p,k as m,j}from"./index-EqsJQukp.js";import{u as z}from"./offers-CMuGKdpP.js";import{a as H,_ as J}from"./navItems-BcGEYHfz.js";import{m as v}from"./mockOffers-tLQoW2PK.js";import{r as B}from"./TrashIcon-Cchdm1gJ.js";import{r as q}from"./PlusIcon-BtIAwDfQ.js";import{r as K}from"./ExclamationCircleIcon-CstLx_JE.js";import"./authHeader-DkpUnqMe.js";const Q={class:"min-h-screen bg-gray-50"},W={key:0,class:"flex justify-center items-center h-64"},X={key:1,class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Y={class:"bg-white shadow-sm rounded-lg p-6"},Z={class:"space-y-6"},_={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ee={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},te=["value"],oe={class:"bg-white shadow-sm rounded-lg p-6"},se={class:"space-y-6"},re={class:"space-y-2"},ae=["onUpdate:modelValue"],le=["onClick"],ie={class:"space-y-2"},ne=["onUpdate:modelValue"],de=["onClick"],ue={class:"bg-white shadow-sm rounded-lg p-6"},me={class:"space-y-6"},fe=["min"],pe={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ce={class:"text-center"},ge={class:"mt-6"},qe={__name:"[id]",setup(ve){const c=A(),b=P();z();const g=$(),x=y(!0),r=y(null),M=["Internship Support","Fellowship","Research Grant","Travel Grant","Project Funding","Professional Development","Study Abroad","Other"],o=y({offerTitle:"",description:"",amount:0,duration:"",type:"",requirements:"",deadline:"",status:"draft",applicationProcess:"Direct",targetMajors:[""],additionalBenefits:[""]}),T=I(()=>new Date().toISOString().split("T")[0]),S=async()=>{try{x.value=!0,r.value=v.find(a=>a.id===parseInt(c.params.id)),r.value?o.value={offerTitle:r.value.offerTitle,description:r.value.description,amount:r.value.amount,duration:r.value.duration,type:r.value.type,requirements:r.value.requirements,deadline:r.value.deadline.split("T")[0],status:r.value.status,applicationProcess:r.value.applicationProcess,targetMajors:[...r.value.targetMajors],additionalBenefits:[...r.value.additionalBenefits]}:g.showError("Offer not found")}catch{g.showError("Failed to load offer details")}finally{x.value=!1}},V=()=>{o.value.targetMajors.push("")},C=a=>{o.value.targetMajors.length>1&&(o.value.targetMajors=o.value.targetMajors.filter((e,s)=>s!==a))},D=()=>{o.value.additionalBenefits.push("")},U=a=>{o.value.additionalBenefits.length>1&&(o.value.additionalBenefits=o.value.additionalBenefits.filter((e,s)=>s!==a))},O=async()=>{try{o.value.targetMajors=o.value.targetMajors.filter(e=>e.trim()),o.value.additionalBenefits=o.value.additionalBenefits.filter(e=>e.trim());const a=v.findIndex(e=>e.id===parseInt(c.params.id));a!==-1&&(v[a]={...v[a],...o.value}),g.showSuccess("Offer updated successfully"),b.push(`/sponsor/offers/${c.params.id}`)}catch{g.showError("Failed to update offer")}},E=()=>{b.push(`/sponsor/offers/${c.params.id}`)};return F(()=>{S()}),(a,e)=>(n(),N(J,{"navigation-items":m(H),"page-title":"Edit Offer"},{default:R(()=>[t("div",Q,[x.value?(n(),d("div",W,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-coral-600"},null,-1)]))):r.value?(n(),d("div",X,[e[31]||(e[31]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Offer"),t("p",{class:"mt-2 text-sm text-gray-600"}," Update your offer details and requirements ")],-1)),t("form",{onSubmit:G(O,["prevent"]),class:"space-y-8"},[t("div",Y,[e[18]||(e[18]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),t("div",Z,[t("div",null,[e[11]||(e[11]=t("label",{for:"offerTitle",class:"block text-sm font-medium text-gray-700"}," Offer Title* ",-1)),l(t("input",{type:"text",id:"offerTitle","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.offerTitle=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"e.g., Software Engineering Internship Grant"},null,512),[[u,o.value.offerTitle]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description* ",-1)),l(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.description=s),rows:"4",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"Describe the purpose and benefits of this offer"},null,512),[[u,o.value.description]])]),t("div",_,[t("div",null,[e[13]||(e[13]=t("label",{for:"amount",class:"block text-sm font-medium text-gray-700"}," Amount ($)* ",-1)),l(t("input",{type:"number",id:"amount","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.amount=s),min:"0",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,512),[[u,o.value.amount]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"duration",class:"block text-sm font-medium text-gray-700"}," Duration* ",-1)),l(t("input",{type:"text",id:"duration","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.duration=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"e.g., 3 months, 1 year"},null,512),[[u,o.value.duration]])])]),t("div",ee,[t("div",null,[e[15]||(e[15]=t("label",{for:"type",class:"block text-sm font-medium text-gray-700"}," Offer Type* ",-1)),l(t("select",{id:"type","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.type=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},[(n(),d(w,null,k(M,s=>t("option",{key:s,value:s},L(s),9,te)),64))],512),[[h,o.value.type]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"applicationProcess",class:"block text-sm font-medium text-gray-700"}," Application Process* ",-1)),l(t("select",{id:"applicationProcess","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.applicationProcess=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},e[16]||(e[16]=[t("option",{value:"Direct"},"Direct",-1),t("option",{value:"Competitive"},"Competitive",-1)]),512),[[h,o.value.applicationProcess]])])])])]),t("div",oe,[e[24]||(e[24]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Requirements and Eligibility",-1)),t("div",se,[t("div",null,[e[19]||(e[19]=t("label",{for:"requirements",class:"block text-sm font-medium text-gray-700"}," Requirements* ",-1)),l(t("textarea",{id:"requirements","onUpdate:modelValue":e[6]||(e[6]=s=>o.value.requirements=s),rows:"4",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"List specific requirements and eligibility criteria"},null,512),[[u,o.value.requirements]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Target Majors* ",-1)),t("div",re,[(n(!0),d(w,null,k(o.value.targetMajors,(s,i)=>(n(),d("div",{key:i,class:"flex items-center gap-2"},[l(t("input",{type:"text","onUpdate:modelValue":f=>o.value.targetMajors[i]=f,class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"Enter major"},null,8,ae),[[u,o.value.targetMajors[i]]]),t("button",{type:"button",onClick:f=>C(i),class:"text-red-600 hover:text-red-800"},[p(m(B),{class:"h-5 w-5"})],8,le)]))),128)),t("button",{type:"button",onClick:V,class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[p(m(q),{class:"h-4 w-4 mr-1"}),e[20]||(e[20]=j(" Add Major "))])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Benefits ",-1)),t("div",ie,[(n(!0),d(w,null,k(o.value.additionalBenefits,(s,i)=>(n(),d("div",{key:i,class:"flex items-center gap-2"},[l(t("input",{type:"text","onUpdate:modelValue":f=>o.value.additionalBenefits[i]=f,class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm",placeholder:"Enter benefit"},null,8,ne),[[u,o.value.additionalBenefits[i]]]),t("button",{type:"button",onClick:f=>U(i),class:"text-red-600 hover:text-red-800"},[p(m(B),{class:"h-5 w-5"})],8,de)]))),128)),t("button",{type:"button",onClick:D,class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[p(m(q),{class:"h-4 w-4 mr-1"}),e[22]||(e[22]=j(" Add Benefit "))])])])])]),t("div",ue,[e[29]||(e[29]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Deadline and Status",-1)),t("div",me,[t("div",null,[e[25]||(e[25]=t("label",{for:"deadline",class:"block text-sm font-medium text-gray-700"}," Application Deadline* ",-1)),l(t("input",{type:"date",id:"deadline","onUpdate:modelValue":e[7]||(e[7]=s=>o.value.deadline=s),required:"",min:T.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},null,8,fe),[[u,o.value.deadline]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),l(t("select",{id:"status","onUpdate:modelValue":e[8]||(e[8]=s=>o.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-coral-500 focus:ring-coral-500 sm:text-sm"},e[26]||(e[26]=[t("option",{value:"draft"},"Draft",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"closed"},"Closed",-1)]),512),[[h,o.value.status]]),e[28]||(e[28]=t("p",{class:"mt-2 text-sm text-gray-500"},' Changing status to "Active" will make the offer visible to students ',-1))])])]),t("div",{class:"flex items-center justify-end space-x-4"},[t("button",{type:"button",onClick:E,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-coral-500"}," Cancel "),e[30]||(e[30]=t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-coral-600 hover:bg-coral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-coral-500"}," Save Changes ",-1))])],32)])):(n(),d("div",pe,[t("div",ce,[p(m(K),{class:"mx-auto h-12 w-12 text-gray-400"}),e[32]||(e[32]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Offer not found",-1)),e[33]||(e[33]=t("p",{class:"mt-1 text-sm text-gray-500"}," The offer you're trying to edit doesn't exist or you don't have permission to edit it. ",-1)),t("div",ge,[t("button",{onClick:e[9]||(e[9]=s=>m(b).push("/sponsor/offers")),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-coral-600 hover:bg-coral-700"}," Back to Offers ")])])]))])]),_:1},8,["navigation-items"]))}};export{qe as default};
