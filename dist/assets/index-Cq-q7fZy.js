import{c as i,o as a,a as e,u as le,b as re,r as m,d as ae,e as g,w as ie,f as de,g as $,h as F,i as b,n as U,j as c,k as L,l as v,t as r,m as x,v as ue,p as y,F as R,q as E}from"./index-CXEPaLLm.js";import{u as ce}from"./scholarships-BZpBSjz2.js";import{u as pe}from"./applications-i8ziy2bG.js";import{_ as me}from"./StudentSidebar-UotSKljk.js";import{_ as ge}from"./ApplicationModal-np25LOSV.js";import{r as I,a as O,b as ve}from"./MagnifyingGlassIcon-Ti1jE2Dj.js";import"./x-BPlPAr5W.js";import"./upload-Cc4nevQT.js";function fe(D,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function xe(D,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function be(D,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const ye={class:"min-h-screen bg-gray-50"},he={class:"bg-white border-b border-gray-200"},we={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},_e={class:"flex items-center justify-between"},Se={class:"flex items-center space-x-4"},ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ae={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Ce={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Me={class:"flex items-center"},De={class:"p-2 bg-blue-100 rounded-lg"},Ne={class:"ml-4"},Te={class:"text-2xl font-bold text-gray-900"},Ue={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ve={class:"flex items-center"},je={class:"p-2 bg-green-100 rounded-lg"},Be={class:"ml-4"},Pe={class:"text-2xl font-bold text-gray-900"},$e={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Fe={class:"flex items-center"},Le={class:"p-2 bg-purple-100 rounded-lg"},Re={class:"ml-4"},Ee={class:"text-2xl font-bold text-gray-900"},Ie={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Oe={class:"flex items-center"},Ye={class:"p-2 bg-amber-100 rounded-lg"},Ge={class:"ml-4"},Ze={class:"text-2xl font-bold text-gray-900"},ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Je={class:"flex flex-col lg:flex-row gap-8"},We={class:"lg:w-80 flex-shrink-0"},qe={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6"},Qe={class:"mb-6"},He={class:"relative"},Ke={class:"mb-6"},Xe={class:"mb-6"},et={class:"mb-6"},tt={class:"mb-6"},st={class:"mb-6"},ot={class:"flex-1"},nt={class:"flex items-center justify-between mb-6"},lt={class:"text-gray-600"},rt={class:"flex items-center space-x-4"},at={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},it={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dt={class:"p-6"},ut={class:"flex items-start justify-between mb-4"},ct={class:"flex items-center space-x-3"},pt=["src","alt"],mt={class:"font-semibold text-gray-900"},gt={class:"text-sm text-gray-600"},vt={class:"flex items-center space-x-2"},ft={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},xt={key:1,class:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full"},bt=["onClick"],yt={class:"text-gray-600 text-sm mb-4 line-clamp-2"},ht={class:"space-y-2 mb-4"},wt={class:"flex items-center justify-between text-sm"},_t={class:"font-semibold text-gray-900"},St={class:"flex items-center justify-between text-sm"},kt={class:"font-medium text-gray-900"},At={class:"flex items-center justify-between text-sm"},Ct={class:"font-medium text-gray-900"},Mt={class:"flex items-center justify-between text-sm"},Dt={class:"font-medium text-gray-900"},Nt={class:"mb-4"},Tt={class:"flex items-center space-x-3"},Ut=["onClick"],Vt={key:2,class:"text-center py-12"},jt={key:3,class:"text-center mt-8"},Bt=6,Yt={__name:"index",setup(D){const u=ce(),V=le(),S=re(),Y=pe(),k=m(!0),A=m(!1),C=m(!1),f=m(null),M=m(1),n=m({search:"",amountRange:"",type:"",duration:"",school:"",course:""}),N=m("deadline"),p=m([]);ae(async()=>{await u.initializeScholarships();const o=localStorage.getItem("saved_scholarships");o&&(p.value=JSON.parse(o)),k.value=!1});const G=g(()=>u.getScholarships.length),Z=g(()=>V.user?u.getScholarships.filter(t=>w(t)).length:0),z=g(()=>u.getScholarships.reduce((o,t)=>o+t.amount,0)),J=g(()=>{const o=new Date(Date.now()+6048e5);return u.getScholarships.filter(t=>new Date(t.deadline)<=o).length}),W=g(()=>A.value?u.getScholarships.filter(o=>p.value.includes(o.id)):u.getScholarships),h=g(()=>{let o=W.value.filter(t=>{var l,s;if(n.value.search){const d=n.value.search.toLowerCase();if(!t.title.toLowerCase().includes(d)&&!t.description.toLowerCase().includes(d)&&!t.sponsorName.toLowerCase().includes(d))return!1}if(n.value.amountRange){const[d,_]=n.value.amountRange.split("-").map(ne=>ne.replace("+","")),T=t.amount;if(_){if(T<parseInt(d)||T>parseInt(_))return!1}else if(T<parseInt(d))return!1}return!(n.value.type&&t.type!==n.value.type||n.value.duration&&t.duration!==n.value.duration||n.value.school&&(!((l=t.criteria.schools)!=null&&l.length)||!t.criteria.schools.includes(n.value.school))||n.value.course&&(!((s=t.criteria.courses)!=null&&s.length)||!t.criteria.courses.includes(n.value.course)))});return o.sort((t,l)=>{switch(N.value){case"amount":return l.amount-t.amount;case"created":return new Date(l.createdAt)-new Date(t.createdAt);case"match":const s=w(t)?1:0;return(w(l)?1:0)-s;case"deadline":default:return new Date(t.deadline)-new Date(l.deadline)}}),o}),j=g(()=>{const t=M.value*Bt;return h.value.slice(0,t)}),q=g(()=>j.value.length<h.value.length),w=o=>{var s,d,_;const t=V.user;if(!t||t.role!=="student")return!1;const l=o.criteria;return!((s=l.schools)!=null&&s.length&&!l.schools.includes(t.school)||(d=l.courses)!=null&&d.length&&!l.courses.includes(t.course)||(_=l.levels)!=null&&_.length&&!l.levels.includes(t.level)||l.minGPA&&t.gpa<l.minGPA||l.gender&&l.gender!=="any"&&t.gender!==l.gender||l.financialNeed&&!t.financialNeed)},Q=o=>{const t=new Date(o.deadline),l=new Date(Date.now()+7*24*60*60*1e3);return t<=l},H=o=>{const t=p.value.indexOf(o);t>-1?(p.value.splice(t,1),S.addNotification({type:"info",title:"Scholarship Removed",message:"Scholarship removed from saved list"})):(p.value.push(o),S.addNotification({type:"success",title:"Scholarship Saved",message:"Scholarship added to saved list"})),localStorage.setItem("saved_scholarships",JSON.stringify(p.value))},K=o=>{f.value=o,C.value=!0},B=()=>{C.value=!1,f.value=null},X=async o=>{try{await Y.createApplication({...o,type:"scholarship",scholarshipId:f.value.id,scholarshipTitle:f.value.title,sponsorName:f.value.sponsorName}),S.addNotification({type:"success",title:"Application Submitted",message:`Your application for ${f.value.title} has been submitted successfully.`}),B()}catch{S.addNotification({type:"error",title:"Application Failed",message:"There was an error submitting your application. Please try again."})}},P=()=>{n.value={search:"",amountRange:"",type:"",duration:"",school:"",course:""},M.value=1},ee=()=>{M.value++},te=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),se=o=>({full_tuition:"Full Tuition",partial_tuition:"Partial Tuition",stipend:"Stipend",research:"Research Grant"})[o]||o,oe=o=>({full_tuition:"bg-green-100 text-green-800",partial_tuition:"bg-blue-100 text-blue-800",stipend:"bg-purple-100 text-purple-800",research:"bg-orange-100 text-orange-800"})[o]||"bg-gray-100 text-gray-800";return ie(n,()=>{M.value=1},{deep:!0}),(o,t)=>{const l=de("router-link");return a(),$(me,null,{default:F(()=>[e("div",ye,[e("div",he,[e("div",we,[e("div",_e,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Browse Scholarships"),e("p",{class:"text-gray-600 mt-1"},"Discover scholarship opportunities that match your profile")],-1)),e("div",Se,[e("button",{onClick:t[0]||(t[0]=s=>A.value=!A.value),class:U(["px-4 py-2 rounded-lg font-medium transition-colors",A.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[c(v(I),{class:"w-4 h-4 inline mr-2"}),L(" Saved ("+r(p.value.length)+") ",1)],2)])])])]),e("div",ke,[e("div",Ae,[e("div",Ce,[e("div",Me,[e("div",De,[c(v(O),{class:"w-6 h-6 text-blue-600"})]),e("div",Ne,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Scholarships",-1)),e("p",Te,r(G.value),1)])])]),e("div",Ue,[e("div",Ve,[e("div",je,[c(v(fe),{class:"w-6 h-6 text-green-600"})]),e("div",Be,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Perfect Matches",-1)),e("p",Pe,r(Z.value),1)])])]),e("div",$e,[e("div",Fe,[e("div",Le,[c(v(be),{class:"w-6 h-6 text-purple-600"})]),e("div",Re,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Value",-1)),e("p",Ee,"₦"+r(z.value.toLocaleString()),1)])])]),e("div",Ie,[e("div",Oe,[e("div",Ye,[c(v(xe),{class:"w-6 h-6 text-amber-600"})]),e("div",Ge,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Ending Soon",-1)),e("p",Ze,r(J.value),1)])])])])]),e("div",ze,[e("div",Je,[e("div",We,[e("div",qe,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),e("div",Qe,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),e("div",He,[x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.search=s),type:"text",placeholder:"Search scholarships...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[ue,n.value.search]]),c(v(ve),{class:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})])]),e("div",Ke,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.amountRange=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[14]||(t[14]=[e("option",{value:""},"Any Amount",-1),e("option",{value:"0-100000"},"₦0 - ₦100,000",-1),e("option",{value:"100000-300000"},"₦100,000 - ₦300,000",-1),e("option",{value:"300000-500000"},"₦300,000 - ₦500,000",-1),e("option",{value:"500000+"},"₦500,000+",-1)]),512),[[y,n.value.amountRange]])]),e("div",Xe,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[16]||(t[16]=[e("option",{value:""},"All Types",-1),e("option",{value:"full_tuition"},"Full Tuition",-1),e("option",{value:"partial_tuition"},"Partial Tuition",-1),e("option",{value:"stipend"},"Stipend",-1),e("option",{value:"research"},"Research Grant",-1)]),512),[[y,n.value.type]])]),e("div",et,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duration",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.duration=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[18]||(t[18]=[e("option",{value:""},"Any Duration",-1),e("option",{value:"1 year"},"1 Year",-1),e("option",{value:"2 years"},"2 Years",-1),e("option",{value:"3 years"},"3 Years",-1),e("option",{value:"4 years"},"4 Years",-1)]),512),[[y,n.value.duration]])]),e("div",tt,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>n.value.school=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[20]||(t[20]=[e("option",{value:""},"Any School",-1),e("option",{value:"University of Lagos"},"University of Lagos",-1),e("option",{value:"Obafemi Awolowo University"},"Obafemi Awolowo University",-1),e("option",{value:"University of Ibadan"},"University of Ibadan",-1),e("option",{value:"Ahmadu Bello University"},"Ahmadu Bello University",-1)]),512),[[y,n.value.school]])]),e("div",st,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>n.value.course=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[22]||(t[22]=[e("option",{value:""},"Any Course",-1),e("option",{value:"Computer Science"},"Computer Science",-1),e("option",{value:"Engineering"},"Engineering",-1),e("option",{value:"Medicine"},"Medicine",-1),e("option",{value:"Mathematics"},"Mathematics",-1),e("option",{value:"Physics"},"Physics",-1)]),512),[[y,n.value.course]])]),e("button",{onClick:P,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Clear All Filters ")])]),e("div",ot,[e("div",nt,[e("div",null,[e("p",lt,r(h.value.length)+" scholarship"+r(h.value.length!==1?"s":"")+" found ",1)]),e("div",rt,[x(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>N.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[25]||(t[25]=[e("option",{value:"deadline"},"Sort by Deadline",-1),e("option",{value:"amount"},"Sort by Amount",-1),e("option",{value:"created"},"Sort by Newest",-1),e("option",{value:"match"},"Sort by Match",-1)]),512),[[y,N.value]])])]),k.value?(a(),i("div",at,[(a(),i(R,null,E(6,s=>e("div",{key:s,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse"},t[26]||(t[26]=[e("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-4"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-full mb-2"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-2/3"},null,-1)]))),64))])):(a(),i("div",it,[(a(!0),i(R,null,E(j.value,s=>(a(),i("div",{key:s.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow"},[e("div",dt,[e("div",ut,[e("div",ct,[e("img",{src:s.sponsorAvatar,alt:s.sponsorName,class:"w-10 h-10 rounded-full"},null,8,pt),e("div",null,[e("h3",mt,r(s.title),1),e("p",gt,r(s.sponsorName),1)])]),e("div",vt,[w(s)?(a(),i("span",ft," Perfect Match ")):b("",!0),Q(s)?(a(),i("span",xt," Ending Soon ")):b("",!0),e("button",{onClick:d=>H(s.id),class:U(["p-2 rounded-lg transition-colors",p.value.includes(s.id)?"text-blue-600 bg-blue-100":"text-gray-400 hover:text-gray-600"])},[c(v(I),{class:"w-4 h-4"})],10,bt)])]),e("p",yt,r(s.description),1),e("div",ht,[e("div",wt,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Amount:",-1)),e("span",_t,"₦"+r(s.amount.toLocaleString()),1)]),e("div",St,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"Duration:",-1)),e("span",kt,r(s.duration),1)]),e("div",At,[t[29]||(t[29]=e("span",{class:"text-gray-600"},"Awards Available:",-1)),e("span",Ct,r(s.remainingAwards)+"/"+r(s.numberOfAwards),1)]),e("div",Mt,[t[30]||(t[30]=e("span",{class:"text-gray-600"},"Deadline:",-1)),e("span",Dt,r(te(s.deadline)),1)])]),e("div",Nt,[e("span",{class:U([oe(s.type),"px-2 py-1 text-xs font-medium rounded-full"])},r(se(s.type)),3)]),e("div",Tt,[c(l,{to:`/student/scholarships/${s.id}`,class:"flex-1 px-4 py-2 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700 transition-colors font-medium"},{default:F(()=>t[31]||(t[31]=[L(" View Details ")])),_:2,__:[31]},1032,["to"]),w(s)?(a(),i("button",{key:0,onClick:d=>K(s),class:"px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-medium"}," Quick Apply ",8,Ut)):b("",!0)])])]))),128))])),!k.value&&h.value.length===0?(a(),i("div",Vt,[c(v(O),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t[32]||(t[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No scholarships found",-1)),t[33]||(t[33]=e("p",{class:"text-gray-600 mb-4"},"Try adjusting your filters to see more results",-1)),e("button",{onClick:P,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," Clear Filters ")])):b("",!0),q.value&&!k.value?(a(),i("div",jt,[e("button",{onClick:ee,class:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Load More Scholarships ")])):b("",!0)])])]),C.value?(a(),$(ge,{key:0,show:C.value,type:"scholarship",item:f.value,onClose:B,onSubmit:X},null,8,["show","item"])):b("",!0)])]),_:1})}}};export{Yt as default};
