import{x as B,u as q,a as Y,y as C,o as H,c as g,b as O,d as S,e as p,f,g as t,p as x,h,i as a,k as r,t as i,l as w,v as W,m as $,F as X,q as Z,n as G,z as J}from"./index-EqsJQukp.js";import{u as K}from"./appeals-CM2mXlLj.js";import{c as Q,H as j,S as tt,s as et,_ as st}from"./navItems-BcGEYHfz.js";import{P as L}from"./plus-CSARlkxq.js";import{D as ot}from"./dollar-sign-C1C06PUc.js";import{T as at}from"./trending-up-D3ODJZ_R.js";import{C as rt}from"./calendar-QZZnOdG5.js";import{E as lt}from"./eye-4dZziO83.js";import{S as nt,P as it,a as dt,C as ct}from"./square-pen-Dxp_N-5w.js";import{S as ut}from"./share-2-DpALoOqW.js";import{X as pt}from"./x-c6Y77DFi.js";import"./authHeader-DkpUnqMe.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=Q("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mt={class:"min-h-screen bg-gray-50"},gt={class:"bg-white border-b border-gray-200"},ft={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},bt={class:"flex items-center justify-between h-16"},yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ht={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},vt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},wt={class:"flex items-center justify-between"},_t={class:"text-3xl font-bold text-gray-900 mt-2"},kt={class:"p-3 bg-blue-100 rounded-xl"},At={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Ct={class:"flex items-center justify-between"},St={class:"text-3xl font-bold text-gray-900 mt-2"},$t={class:"p-3 bg-green-100 rounded-xl"},jt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Lt={class:"flex items-center justify-between"},Nt={class:"text-3xl font-bold text-gray-900 mt-2"},Ut={class:"p-3 bg-coral-100 rounded-xl"},Dt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Mt={class:"flex items-center justify-between"},Rt={class:"text-3xl font-bold text-gray-900 mt-2"},Tt={class:"p-3 bg-purple-100 rounded-xl"},Ft={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8"},Pt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0"},Et={class:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1"},Vt={class:"relative"},zt={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center"},It={class:"text-gray-600 mb-6"},Bt={key:1,class:"grid gap-6"},qt={class:"p-6"},Yt={class:"flex items-start justify-between mb-4"},Ht={class:"flex-1"},Ot={class:"flex items-center space-x-3 mb-2"},Wt={class:"text-xl font-semibold text-gray-900"},Xt={class:"text-gray-600 mb-2"},Zt={class:"text-gray-700 line-clamp-2"},Gt={class:"text-right ml-6"},Jt={class:"text-2xl font-bold text-gray-900"},Kt={class:"text-sm text-gray-500"},Qt={class:"mb-4"},te={class:"flex justify-between text-sm text-gray-600 mb-1"},ee={class:"w-full bg-gray-200 rounded-full h-2"},se={class:"flex items-center justify-between pt-4 border-t border-gray-100"},oe={class:"flex items-center space-x-2 text-sm text-gray-500"},ae={class:"flex items-center space-x-2"},re=["onClick"],le=["onClick"],ne=["onClick"],ie={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},de={class:"bg-white rounded-2xl p-8 max-w-md w-full mx-4"},ce={class:"flex items-center justify-between mb-6"},ue={class:"space-y-4"},pe={class:"flex"},xe=["value"],me={class:"grid grid-cols-3 gap-3"},je={__name:"index",setup(ge){B();const N=q(),b=K(),y=Y(),l=C({status:"",category:"",search:""}),c=C({show:!1,appeal:null,link:""});H(()=>{b.getAppeals()});const u=g(()=>{var o;return b.getUserAppeals((o=N.user)==null?void 0:o.id)||[]}),U=g(()=>u.value.filter(o=>o.status==="active")),D=g(()=>u.value.reduce((o,e)=>o+(e.raisedAmount||0),0)),M=g(()=>{if(u.value.length===0)return 0;const o=u.value.filter(e=>(e.raisedAmount||0)>=(e.targetAmount||1)*.8).length;return Math.round(o/u.value.length*100)}),_=g(()=>{let o=u.value;if(l.status&&(o=o.filter(e=>e.status===l.status)),l.category&&(o=o.filter(e=>e.category===l.category)),l.search){const e=l.search.toLowerCase();o=o.filter(n=>{var s,d,m;return((s=n.title)==null?void 0:s.toLowerCase().includes(e))||((d=n.description)==null?void 0:d.toLowerCase().includes(e))||((m=n.story)==null?void 0:m.toLowerCase().includes(e))})}return o.sort((e,n)=>new Date(n.updatedAt||n.createdAt)-new Date(e.updatedAt||e.createdAt))}),R=o=>({active:"bg-green-100 text-green-700",completed:"bg-blue-100 text-blue-700",paused:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",draft:"bg-gray-100 text-gray-700"})[o]||"bg-gray-100 text-gray-700",T=o=>o.charAt(0).toUpperCase()+o.slice(1),F=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",P=()=>{l.status="",l.category="",l.search=""},E=o=>{c.appeal=o,c.link=`${window.location.origin}/appeals/${o.id}`,c.show=!0},V=async()=>{try{await navigator.clipboard.writeText(c.link),y.addNotification({type:"success",title:"Link copied",message:"Appeal link has been copied to clipboard"})}catch{y.addNotification({type:"error",title:"Copy failed",message:"Failed to copy link to clipboard"})}},v=o=>{const e=c.appeal,n=c.link,s=`Help me raise funds for ${e.title}. ${(e.description||"").substring(0,100)}...`;let d="";switch(o){case"twitter":d=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(n)}`;break;case"facebook":d=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;break;case"whatsapp":d=`https://wa.me/?text=${encodeURIComponent(s+" "+n)}`;break}d&&window.open(d,"_blank","width=600,height=400")},z=o=>{b.updateAppeal(o.id,{status:"paused"}),y.addNotification({type:"info",title:"Appeal paused",message:"Your appeal has been paused and is no longer visible to donors."})},I=o=>{b.updateAppeal(o.id,{status:"active"}),y.addNotification({type:"success",title:"Appeal resumed",message:"Your appeal is now active and visible to donors again."})};return(o,e)=>{const n=O("router-link");return p(),S(st,{"page-title":"Appeals","page-subtitle":"manage your funding appeals","navigation-items":r(et)},{default:f(()=>[t("div",mt,[t("div",gt,[t("div",ft,[t("div",bt,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"My Appeals"),t("p",{class:"text-sm text-gray-500"}," Manage your funding appeals and track their progress ")],-1)),a(n,{to:"/student/appeals/create",class:"bg-coral-500 text-white px-6 py-2 rounded-lg hover:bg-coral-600 transition-colors duration-200 flex items-center space-x-2"},{default:f(()=>[a(r(L),{class:"h-5 w-5"}),e[7]||(e[7]=t("span",null,"Create Appeal",-1))]),_:1,__:[7]})])])]),t("div",yt,[t("div",ht,[t("div",vt,[t("div",wt,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Appeals",-1)),t("p",_t,i(u.value.length),1)]),t("div",kt,[a(r(j),{class:"w-6 h-6 text-blue-600"})])])]),t("div",At,[t("div",Ct,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Active Appeals",-1)),t("p",St,i(U.value.length),1)]),t("div",$t,[a(r(xt),{class:"w-6 h-6 text-green-600"})])])]),t("div",jt,[t("div",Lt,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Raised",-1)),t("p",Nt," ₦"+i(D.value.toLocaleString()),1)]),t("div",Ut,[a(r(ot),{class:"w-6 h-6 text-coral-600"})])])]),t("div",Dt,[t("div",Mt,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Success Rate",-1)),t("p",Rt,i(M.value)+"% ",1)]),t("div",Tt,[a(r(at),{class:"w-6 h-6 text-purple-600"})])])])]),t("div",Ft,[t("div",Pt,[t("div",Et,[t("div",Vt,[a(r(tt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.search=s),type:"text",placeholder:"Search appeals...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500 w-full sm:w-64"},null,512),[[W,l.search]])]),w(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.status=s),class:"px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500"},e[13]||(e[13]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"paused"},"Paused",-1),t("option",{value:"draft"},"Draft",-1)]),512),[[$,l.status]]),w(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.category=s),class:"px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500"},e[14]||(e[14]=[t("option",{value:""},"All Categories",-1),t("option",{value:"tuition"},"Tuition Fees",-1),t("option",{value:"books"},"Books & Supplies",-1),t("option",{value:"accommodation"},"Accommodation",-1),t("option",{value:"living"},"Living Expenses",-1),t("option",{value:"technology"},"Technology & Equipment",-1),t("option",{value:"emergency"},"Emergency Funding",-1),t("option",{value:"other"},"Other",-1)]),512),[[$,l.category]])]),t("div",{class:"flex items-center space-x-3"},[t("button",{onClick:P,class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Clear Filters ")])])]),_.value.length===0?(p(),x("div",zt,[a(r(j),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e[16]||(e[16]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"}," No appeals found ",-1)),t("p",It,i(u.value.length===0?"You haven't created any appeals yet.":"No appeals match your current filters."),1),u.value.length===0?(p(),S(n,{key:0,to:"/student/appeals/create",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 inline-flex items-center space-x-2"},{default:f(()=>[a(r(L),{class:"h-5 w-5"}),e[15]||(e[15]=t("span",null,"Create Your First Appeal",-1))]),_:1,__:[15]})):h("",!0)])):(p(),x("div",Bt,[(p(!0),x(X,null,Z(_.value,s=>{var d,m,k;return p(),x("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200"},[t("div",qt,[t("div",Yt,[t("div",Ht,[t("div",Ot,[t("h3",Wt,i(s.title),1),t("span",{class:G([R(s.status),"px-3 py-1 rounded-full text-xs font-medium"])},i(T(s.status)),3)]),t("p",Xt,i(s.category),1),t("p",Zt,i(s.shortDescription||s.description||s.story),1)]),t("div",Gt,[t("p",Jt," ₦"+i(((d=s.raisedAmount)==null?void 0:d.toLocaleString())||0),1),t("p",Kt," of ₦"+i(((m=s.targetAmount)==null?void 0:m.toLocaleString())||0),1)])]),t("div",Qt,[t("div",te,[t("span",null,i(Math.round((s.raisedAmount||0)/(s.targetAmount||1)*100))+"% funded",1),t("span",null,i(((k=s.donations)==null?void 0:k.length)||0)+" donors",1)]),t("div",ee,[t("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:J({width:Math.min((s.raisedAmount||0)/(s.targetAmount||1)*100,100)+"%"})},null,4)])]),t("div",se,[t("div",oe,[a(r(rt),{class:"h-4 w-4"}),t("span",null,"Created "+i(F(s.createdAt)),1)]),t("div",ae,[a(n,{to:`/student/appeals/${s.id}`,class:"px-4 py-2 text-coral-600 hover:bg-coral-50 rounded-lg transition-colors duration-200 flex items-center space-x-1"},{default:f(()=>[a(r(lt),{class:"h-4 w-4"}),e[17]||(e[17]=t("span",null,"View",-1))]),_:2,__:[17]},1032,["to"]),a(n,{to:`/student/appeals/edit/${s.id}`,class:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center space-x-1"},{default:f(()=>[a(r(nt),{class:"h-4 w-4"}),e[18]||(e[18]=t("span",null,"Edit",-1))]),_:2,__:[18]},1032,["to"]),t("button",{onClick:A=>E(s),class:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200 flex items-center space-x-1"},[a(r(ut),{class:"h-4 w-4"}),e[19]||(e[19]=t("span",null,"Share",-1))],8,re),s.status==="active"?(p(),x("button",{key:0,onClick:A=>z(s),class:"px-3 py-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors duration-200 flex items-center space-x-1"},[a(r(it),{class:"h-4 w-4"}),e[20]||(e[20]=t("span",null,"Pause",-1))],8,le)):h("",!0),s.status==="paused"?(p(),x("button",{key:1,onClick:A=>I(s),class:"px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors duration-200 flex items-center space-x-1"},[a(r(dt),{class:"h-4 w-4"}),e[21]||(e[21]=t("span",null,"Resume",-1))],8,ne)):h("",!0)])])])])}),128))]))]),c.show?(p(),x("div",ie,[t("div",de,[t("div",ce,[e[22]||(e[22]=t("h3",{class:"text-xl font-bold text-gray-900"},"Share Appeal",-1)),t("button",{onClick:e[3]||(e[3]=s=>c.show=!1),class:"text-gray-400 hover:text-gray-600"},[a(r(pt),{class:"h-6 w-6"})])]),e[27]||(e[27]=t("p",{class:"text-gray-600 mb-6"}," Share your appeal to reach more potential supporters ",-1)),t("div",ue,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Appeal Link",-1)),t("div",pe,[t("input",{value:c.link,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-l-xl bg-gray-50 text-sm"},null,8,xe),t("button",{onClick:V,class:"px-4 py-2 bg-coral-500 text-white rounded-r-xl hover:bg-coral-600 transition-colors"},[a(r(ct),{class:"h-4 w-4"})])])]),t("div",me,[t("button",{onClick:e[4]||(e[4]=s=>v("twitter")),class:"flex items-center justify-center px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors"},e[24]||(e[24]=[t("span",{class:"text-sm font-medium"},"Twitter",-1)])),t("button",{onClick:e[5]||(e[5]=s=>v("facebook")),class:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors"},e[25]||(e[25]=[t("span",{class:"text-sm font-medium"},"Facebook",-1)])),t("button",{onClick:e[6]||(e[6]=s=>v("whatsapp")),class:"flex items-center justify-center px-4 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors"},e[26]||(e[26]=[t("span",{class:"text-sm font-medium"},"WhatsApp",-1)]))])])])])):h("",!0)])]),_:1},8,["navigation-items"])}}};export{je as default};
