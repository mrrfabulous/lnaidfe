import{u as Z,a as H,r as f,c as z,w as J,o as K,p as r,h as V,e as d,g as e,t as a,i as L,k as C,z as Q,A as ee,l as u,Z as N,v as x,R as te,m as oe,F as B,q as G,j as D,O as se}from"./index-EqsJQukp.js";import{u as le}from"./applications-CVJmNFuW.js";import{X as ae}from"./x-c6Y77DFi.js";import{U as ie}from"./upload-C3RSQhGF.js";import{C as R}from"./circle-check-big-BfLp0Q0m.js";const ne={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},re={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},de={class:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},ue={class:"flex items-center justify-between mb-6"},ce={class:"text-2xl font-bold text-gray-900"},me={key:0,class:"text-gray-600 mt-1"},pe={class:"mb-8"},ve={class:"flex items-center justify-between mb-4"},fe={class:"text-sm font-medium text-gray-900"},ge={class:"text-sm text-gray-600"},xe={class:"w-full bg-gray-200 rounded-full h-2"},ye={class:"space-y-6"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"space-y-6"},we={class:"flex justify-between items-center mt-2"},Se={class:"text-sm text-gray-500"},ke={class:"space-y-6"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={class:"text-center"},Ne={class:"mt-4"},_e={class:"text-sm font-medium text-gray-900"},Ae={class:"text-xs text-gray-500 mt-1"},Ee={class:"mt-4"},Ue=["id","onChange"],Ve=["for"],De={key:0,class:"mt-2"},Pe={class:"flex items-center text-sm text-green-600"},je={class:"space-y-6"},qe={class:"bg-gray-50 rounded-xl p-6 space-y-4"},Ie={class:"grid grid-cols-2 gap-4 text-sm"},Me={class:"ml-2 font-medium"},Oe={class:"ml-2 font-medium"},Fe={class:"ml-2 font-medium"},ze={class:"ml-2 font-medium"},Be={class:"ml-2 font-medium"},Ge={class:"ml-2 font-medium"},Re={class:"bg-white rounded-lg p-4 text-sm text-gray-700 max-h-32 overflow-y-auto"},$e={class:"space-y-2"},Ye={class:"ml-2 text-gray-500"},Te={class:"flex items-start space-x-3"},We={class:"flex justify-between items-center pt-6 border-t border-gray-200"},Xe={key:1},Ze={class:"flex space-x-3"},He=["disabled"],Je=["disabled"],Ke={key:0},Qe={key:1},at={__name:"ApplicationModal",props:{isOpen:Boolean,mode:{type:String,default:"create",validator:m=>["create","edit"].includes(m)},item:Object,application:Object},emits:["close","success"],setup(m,{emit:$}){const n=m,P=$,j=Z(),q=le(),_=H(),i=f(1),y=f(4),b=f(!1),S=f(!1),o=f({studentName:"",studentEmail:"",school:"",course:"",level:"",gpa:null,coverLetter:""}),p=f({}),A=f([{id:"transcript",name:"Academic Transcript",description:"Official academic transcript or report card"},{id:"recommendation",name:"Letter of Recommendation",description:"Letter from a teacher, professor, or mentor"},{id:"statement",name:"Personal Statement",description:"Statement of purpose or personal essay"},{id:"identification",name:"Valid ID",description:"Government-issued ID or passport"}]),E=z(()=>{switch(i.value){case 1:return o.value.studentName&&o.value.studentEmail&&o.value.school&&o.value.course&&o.value.level&&o.value.gpa;case 2:return o.value.coverLetter&&o.value.coverLetter.length>=100;case 3:return Object.keys(p.value).length>=2;default:return!0}}),I=z(()=>E.value&&S.value),M=()=>{if(n.mode==="edit"&&n.application)o.value={...n.application};else{const l=j.user;o.value={studentName:(l==null?void 0:l.name)||"",studentEmail:(l==null?void 0:l.email)||"",school:(l==null?void 0:l.school)||"",course:(l==null?void 0:l.course)||"",level:(l==null?void 0:l.level)||"",gpa:(l==null?void 0:l.gpa)||null,coverLetter:""}}},Y=()=>{E.value&&i.value<y.value&&i.value++},T=(l,t)=>{const c=l.target.files[0];c&&(p.value[t]={name:c.name,size:c.size,type:c.type,file:c})},W=async()=>{var l,t,c,h,w,s,v;if(I.value){b.value=!0;try{const g={...o.value,type:((l=n.item)==null?void 0:l.type)||"scholarship",itemId:(t=n.item)==null?void 0:t.id,title:(c=n.item)==null?void 0:c.title,amount:(h=n.item)==null?void 0:h.amount,sponsorName:(w=n.item)==null?void 0:w.sponsorName,documents:Object.entries(p.value).map(([U,O])=>{var F;return{name:(F=A.value.find(X=>X.id===U))==null?void 0:F.name,type:O.type,size:`${(O.size/1048576).toFixed(2)} MB`,status:"pending"}}),status:"pending",studentId:(s=j.user)==null?void 0:s.id};n.mode==="create"?(await q.createApplication(g),_.addNotification({type:"success",title:"Application Submitted",message:`Your application for "${(v=n.item)==null?void 0:v.title}" has been submitted successfully.`})):(await q.updateApplication(n.application.id,g),_.addNotification({type:"success",title:"Application Updated",message:"Your application has been updated successfully."})),P("success"),k()}catch{_.addNotification({type:"error",title:"Submission Failed",message:"Failed to submit application. Please try again."})}finally{b.value=!1}}},k=()=>{i.value=1,S.value=!1,p.value={},b.value=!1,P("close")};return J(()=>n.isOpen,l=>{l&&M()}),K(()=>{n.isOpen&&M()}),(l,t)=>{var c,h,w;return m.isOpen?(d(),r("div",ne,[e("div",re,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:k}),e("div",de,[e("div",ue,[e("div",null,[e("h3",ce,a(m.mode==="create"?"Apply for":"Edit Application"),1),m.mode==="create"?(d(),r("p",me,a(((c=m.item)==null?void 0:c.title)||((h=m.item)==null?void 0:h.offerTitle)||"Scholarship/Offer"),1)):V("",!0)]),e("button",{onClick:k,class:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100"},[L(C(ae),{class:"w-6 h-6"})])]),e("div",pe,[e("div",ve,[e("span",fe,"Step "+a(i.value)+" of "+a(y.value),1),e("span",ge,a(Math.round(i.value/y.value*100))+"% Complete",1)]),e("div",xe,[e("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:Q({width:`${i.value/y.value*100}%`})},null,4)])]),e("form",{onSubmit:ee(W,["prevent"]),class:"space-y-6"},[u(e("div",ye,[t[16]||(t[16]=e("h4",{class:"text-lg font-semibold text-gray-900"}," Personal Information ",-1)),e("div",be,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.studentName=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your full name"},null,512),[[x,o.value.studentName]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.studentEmail=s),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your email"},null,512),[[x,o.value.studentEmail]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School/Institution",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.school=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your school name"},null,512),[[x,o.value.school]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course of Study",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.course=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"Enter your course"},null,512),[[x,o.value.course]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Academic Level",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.level=s),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500"},t[13]||(t[13]=[te('<option value="">Select level</option><option value="100 Level">100 Level</option><option value="200 Level">200 Level</option><option value="300 Level">300 Level</option><option value="400 Level">400 Level</option><option value="500 Level">500 Level</option><option value="Graduate">Graduate</option><option value="Masters">Masters</option><option value="PhD">PhD</option>',9)]),512),[[oe,o.value.level]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GPA/CGPA",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.gpa=s),type:"number",step:"0.01",min:"0",max:"5",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:"e.g., 3.85"},null,512),[[x,o.value.gpa,void 0,{number:!0}]])])])],512),[[N,i.value===1]]),u(e("div",he,[t[19]||(t[19]=e("h4",{class:"text-lg font-semibold text-gray-900"},"Cover Letter",-1)),t[20]||(t[20]=e("p",{class:"text-gray-600"}," Write a compelling cover letter explaining why you deserve this opportunity. ",-1)),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cover Letter",-1)),u(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.coverLetter=s),rows:"12",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-coral-500",placeholder:`Dear Selection Committee,

I am writing to express my strong interest in this opportunity. I believe I am an ideal candidate because...`},null,512),[[x,o.value.coverLetter]]),e("div",we,[e("span",Se,a(((w=o.value.coverLetter)==null?void 0:w.length)||0)+" characters",1),t[17]||(t[17]=e("span",{class:"text-sm text-gray-500"},"Recommended: 500-1000 characters",-1))])])],512),[[N,i.value===2]]),u(e("div",ke,[t[21]||(t[21]=e("h4",{class:"text-lg font-semibold text-gray-900"}," Required Documents ",-1)),t[22]||(t[22]=e("p",{class:"text-gray-600"}," Upload the required documents for your application. ",-1)),e("div",Le,[(d(!0),r(B,null,G(A.value,s=>(d(),r("div",{key:s.name,class:"border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-coral-500 transition-colors"},[e("div",Ce,[L(C(ie),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",Ne,[e("h5",_e,a(s.name),1),e("p",Ae,a(s.description),1)]),e("div",Ee,[e("input",{type:"file",id:s.id,class:"hidden",accept:".pdf,.doc,.docx,.jpg,.png",onChange:v=>T(v,s.id)},null,40,Ue),e("label",{for:s.id,class:"cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-coral-500"}," Choose File ",8,Ve),p.value[s.id]?(d(),r("div",De,[e("div",Pe,[L(C(R),{class:"w-4 h-4 mr-1"}),D(" "+a(p.value[s.id].name),1)])])):V("",!0)])])]))),128))])],512),[[N,i.value===3]]),u(e("div",je,[t[33]||(t[33]=e("h4",{class:"text-lg font-semibold text-gray-900"}," Review Your Application ",-1)),t[34]||(t[34]=e("p",{class:"text-gray-600"}," Please review all information before submitting your application. ",-1)),e("div",qe,[e("div",null,[t[29]||(t[29]=e("h5",{class:"font-medium text-gray-900 mb-2"}," Personal Information ",-1)),e("div",Ie,[e("div",null,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",Me,a(o.value.studentName),1)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Email:",-1)),e("span",Oe,a(o.value.studentEmail),1)]),e("div",null,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"School:",-1)),e("span",Fe,a(o.value.school),1)]),e("div",null,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Course:",-1)),e("span",ze,a(o.value.course),1)]),e("div",null,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Level:",-1)),e("span",Be,a(o.value.level),1)]),e("div",null,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"GPA:",-1)),e("span",Ge,a(o.value.gpa),1)])])]),e("div",null,[t[30]||(t[30]=e("h5",{class:"font-medium text-gray-900 mb-2"}," Cover Letter Preview ",-1)),e("div",Re,a(o.value.coverLetter),1)]),e("div",null,[t[31]||(t[31]=e("h5",{class:"font-medium text-gray-900 mb-2"}," Uploaded Documents ",-1)),e("div",$e,[(d(!0),r(B,null,G(p.value,(s,v)=>{var g;return d(),r("div",{key:v,class:"flex items-center text-sm"},[L(C(R),{class:"w-4 h-4 text-green-500 mr-2"}),e("span",null,a((g=A.value.find(U=>U.id===v))==null?void 0:g.name),1),e("span",Ye,"("+a(s.name)+")",1)])}),128))])])]),e("div",Te,[u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>S.value=s),type:"checkbox",class:"mt-1 h-4 w-4 text-coral-600 focus:ring-coral-500 border-gray-300 rounded"},null,512),[[se,S.value]]),t[32]||(t[32]=e("label",{class:"text-sm text-gray-700"},[D(" I agree to the "),e("a",{href:"#",class:"text-coral-600 hover:text-coral-700 font-medium"},"Terms and Conditions"),D(" and confirm that all information provided is accurate and complete. ")],-1))])],512),[[N,i.value===4]]),e("div",We,[i.value>1?(d(),r("button",{key:0,type:"button",onClick:t[8]||(t[8]=s=>i.value--),class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors"}," Previous ")):(d(),r("div",Xe)),e("div",Ze,[e("button",{type:"button",onClick:k,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors"}," Cancel "),i.value<y.value?(d(),r("button",{key:0,type:"button",onClick:Y,disabled:!E.value,class:"px-6 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,He)):(d(),r("button",{key:1,type:"submit",disabled:!I.value||b.value,class:"px-6 py-2 bg-coral-500 text-white rounded-xl hover:bg-coral-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[b.value?(d(),r("span",Ke,"Submitting...")):(d(),r("span",Qe,"Submit Application"))],8,Je))])])],32)])])])):V("",!0)}}};export{at as _};
