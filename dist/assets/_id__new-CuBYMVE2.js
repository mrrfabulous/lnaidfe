import{s as F,x as I,u as V,a as U,y as $,o as Y,c as p,b as H,d as Q,e as o,f as y,g as e,i as n,p as a,j as B,t as i,h as d,n as N,k as c,F as g,q as f,z as J}from"./index-EqsJQukp.js";import{u as K}from"./offers-CMuGKdpP.js";import{u as W}from"./applications-CVJmNFuW.js";import{G as X,F as Z,s as ee,_ as te}from"./navItems-BcGEYHfz.js";import{_ as se}from"./ApplicationModal-kxLG78Mn.js";import{C as oe}from"./calendar-QZZnOdG5.js";import{C as ie}from"./clock-DxilSQJB.js";import{S as ae}from"./share-2-DpALoOqW.js";import{S as re,T as le}from"./target-Cbvg5X6-.js";import{C as M}from"./circle-check-big-BfLp0Q0m.js";import{S as ne}from"./school-DqENtvFt.js";import{E as de}from"./eye-4dZziO83.js";import"./authHeader-DkpUnqMe.js";import"./x-c6Y77DFi.js";import"./upload-C3RSQhGF.js";const ce={class:"min-h-screen bg-gray-50"},ue={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},me={class:"text-center"},pe={key:1,class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xe={class:"flex items-center space-x-2 text-sm text-gray-600 mb-6"},ge={class:"text-gray-900"},fe={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8"},ve={class:"flex justify-between items-start"},ye={class:"flex-1"},_e={class:"flex items-center space-x-3 mb-4"},he={class:"text-3xl font-bold text-gray-900"},be={key:0,class:"bg-green-100 text-green-700 text-sm px-3 py-1 rounded-full font-medium"},we={class:"flex items-center space-x-4 mb-4"},ke={class:"flex items-center space-x-2"},Se=["src","alt"],Ae={class:"font-medium text-gray-900"},Pe={class:"text-gray-700 text-lg leading-relaxed"},Ce={class:"text-right ml-8"},Re={class:"text-4xl font-bold text-coral-600 mb-2"},Be={class:"text-sm text-gray-500"},Ne={class:"flex items-center justify-between pt-6 border-t border-gray-100 mt-6"},Me={class:"flex items-center space-x-4 text-sm text-gray-600"},Le={class:"flex items-center space-x-2"},je={class:"flex items-center space-x-2"},Oe={class:"flex items-center space-x-3"},De={key:1,class:"px-6 py-3 bg-green-100 text-green-700 rounded-lg flex items-center space-x-2"},Ge={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Te={class:"lg:col-span-2 space-y-8"},Ee={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qe={key:0},Fe={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Ie={class:"space-y-1"},Ve={key:1},Ue={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},$e={class:"space-y-1"},Ye={key:2},He={class:"font-medium text-gray-900 mb-2 flex items-center space-x-2"},Qe={class:"space-y-1"},Je={key:3},Ke={class:"text-gray-600 text-sm"},We={key:0,class:"text-gray-600 text-sm"},Xe={key:4},Ze={class:"text-gray-600 text-sm capitalize"},et={key:5},tt={class:"text-gray-600 text-sm"},st={key:6},ot={class:"space-y-1"},it={key:7},at={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},rt={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center space-x-2"},lt={class:"space-y-3"},nt={class:"text-gray-700"},dt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},ct={class:"flex items-center space-x-3 mb-4"},ut={class:"text-gray-600"},mt={key:0},pt={key:1},xt={key:2},gt={key:3},ft={class:"space-y-6"},vt={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},yt={class:"space-y-4"},_t={class:"flex items-center justify-between"},ht={class:"font-semibold text-coral-600"},bt={class:"flex items-center justify-between"},wt={class:"font-semibold"},kt={class:"flex items-center justify-between"},St={class:"font-semibold"},At={class:"flex items-center justify-between"},Pt={class:"font-semibold"},Ct={class:"flex items-center justify-between"},Rt={class:"font-semibold"},Bt={class:"mt-4"},Nt={class:"flex items-center justify-between text-sm text-gray-600 mb-2"},Mt={class:"w-full bg-gray-200 rounded-full h-2"},Lt={key:0,class:"bg-green-50 border border-green-200 rounded-2xl p-6"},jt={class:"flex items-center space-x-2 mb-3"},Ot={class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6"},Dt={class:"space-y-3"},Gt={class:"font-medium text-gray-900 text-sm"},Tt={class:"text-gray-600 text-xs mt-1"},Et={class:"text-coral-600 font-semibold text-sm mt-1"},ts={__name:"[id]_new",setup(zt){const L=F();I();const b=V(),_=K(),w=W(),k=U(),u=$({show:!1,mode:"create",offer:null,application:null});Y(()=>{_.initializeOffers(),w.initializeApplications()});const s=p(()=>_.getOfferById(parseInt(L.params.id))),j=p(()=>({school:"University of Lagos",course:"Computer Science",level:"400 Level",gpa:4.2,gender:"male",state:"Lagos",age:22})),O=p(()=>_.getMatchingOffers(j.value)),S=p(()=>s.value?O.value.some(l=>l.id===s.value.id):!1),D=p(()=>!s.value||!b.user?!1:w.getUserApplications(b.user.id).some(t=>t.type==="offer"&&t.itemId===s.value.id)),G=p(()=>{var v;if(!((v=s.value)!=null&&v.deadline))return 0;const m=new Date(s.value.deadline)-new Date,x=Math.ceil(m/(1e3*60*60*24));return Math.max(0,x)}),T=p(()=>s.value?_.getOffers.filter(l=>l.id!==s.value.id&&l.status==="active").filter(l=>{const t=s.value.criteria.courses||[],m=l.criteria.courses||[];return t.some(x=>m.includes(x))}).slice(0,3):[]),A=l=>({merit_based:"bg-blue-100 text-blue-700",holistic:"bg-purple-100 text-purple-700",research_based:"bg-green-100 text-green-700",portfolio_based:"bg-orange-100 text-orange-700"})[l]||"bg-gray-100 text-gray-700",P=l=>({merit_based:"Merit Based",holistic:"Holistic Review",research_based:"Research Based",portfolio_based:"Portfolio Based"})[l]||l,h=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",E=()=>{s.value&&(u.offer=s.value,u.mode="create",u.application=null,u.show=!0)},z=async()=>{if(navigator.share)try{await navigator.share({title:s.value.title,text:s.value.description,url:window.location.href})}catch(l){console.log("Error sharing:",l)}else navigator.clipboard.writeText(window.location.href),k.addNotification({type:"success",title:"Link copied",message:"Offer link copied to clipboard!"})},q=()=>{u.show=!1,k.addNotification({type:"success",title:"Application submitted",message:"Your application has been submitted successfully!"})};return(l,t)=>{const m=H("router-link");return o(),Q(te,{"page-title":"","page-subtitle":"","navigation-items":c(ee)},{default:y(()=>{var x,v,C,R;return[e("div",ce,[s.value?(o(),a("div",pe,[e("nav",xe,[n(m,{to:"/student/offers",class:"hover:text-coral-500"},{default:y(()=>t[4]||(t[4]=[B("Browse Opportunities")])),_:1,__:[4]}),t[5]||(t[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",ge,i(s.value.title),1)]),e("div",fe,[e("div",ve,[e("div",ye,[e("div",_e,[e("h1",he,i(s.value.title),1),S.value?(o(),a("span",be," Perfect Match ")):d("",!0),e("span",{class:N([A(s.value.selectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},i(P(s.value.selectionProcess)),3)]),e("div",we,[e("div",ke,[e("img",{src:s.value.sponsorAvatar,alt:s.value.sponsorName,class:"w-10 h-10 rounded-full border-2 border-gray-200"},null,8,Se),e("div",null,[e("p",Ae,i(s.value.sponsorName),1),t[6]||(t[6]=e("p",{class:"text-sm text-gray-500"},"Sponsor",-1))])])]),e("p",Pe,i(s.value.description),1)]),e("div",Ce,[e("div",Re,"₦"+i(s.value.amount.toLocaleString()),1),t[7]||(t[7]=e("div",{class:"text-gray-600 mb-4"},"per student",-1)),e("div",Be,[e("p",null,i(s.value.currentRecipients)+"/"+i(s.value.maxRecipients)+" recipients",1),e("p",null,"Deadline: "+i(h(s.value.deadline)),1)])])]),e("div",Ne,[e("div",Me,[e("div",Le,[n(c(oe),{class:"h-4 w-4"}),e("span",null,"Posted "+i(h(s.value.createdAt)),1)]),e("div",je,[n(c(ie),{class:"h-4 w-4"}),e("span",null,i(G.value)+" days remaining",1)])]),e("div",Oe,[e("button",{onClick:z,class:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[n(c(ae),{class:"h-4 w-4"}),t[8]||(t[8]=e("span",null,"Share",-1))]),D.value?(o(),a("div",De,[n(c(M),{class:"h-5 w-5"}),t[10]||(t[10]=e("span",null,"Applied",-1))])):(o(),a("button",{key:0,onClick:E,class:"px-6 py-3 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors duration-200 flex items-center space-x-2"},[n(c(re),{class:"h-5 w-5"}),t[9]||(t[9]=e("span",null,"Apply Now",-1))]))])])]),e("div",Ge,[e("div",Te,[e("div",Ee,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Eligibility Criteria",-1)),e("div",ze,[(x=s.value.criteria.schools)!=null&&x.length?(o(),a("div",qe,[e("h3",Fe,[n(c(ne),{class:"h-4 w-4"}),t[11]||(t[11]=e("span",null,"Eligible Schools",-1))]),e("ul",Ie,[(o(!0),a(g,null,f(s.value.criteria.schools,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),(v=s.value.criteria.courses)!=null&&v.length?(o(),a("div",Ve,[e("h3",Ue,[n(c(X),{class:"h-4 w-4"}),t[12]||(t[12]=e("span",null,"Eligible Courses",-1))]),e("ul",$e,[(o(!0),a(g,null,f(s.value.criteria.courses,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),(C=s.value.criteria.levels)!=null&&C.length?(o(),a("div",Ye,[e("h3",He,[n(c(le),{class:"h-4 w-4"}),t[13]||(t[13]=e("span",null,"Academic Levels",-1))]),e("ul",Qe,[(o(!0),a(g,null,f(s.value.criteria.levels,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),s.value.criteria.minGPA?(o(),a("div",Je,[t[14]||(t[14]=e("h3",{class:"font-medium text-gray-900 mb-2"},"GPA Requirement",-1)),e("p",Ke,"Minimum GPA: "+i(s.value.criteria.minGPA),1),s.value.criteria.maxGPA?(o(),a("p",We,"Maximum GPA: "+i(s.value.criteria.maxGPA),1)):d("",!0)])):d("",!0),s.value.criteria.gender!=="any"?(o(),a("div",Xe,[t[15]||(t[15]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Gender",-1)),e("p",Ze,i(s.value.criteria.gender)+" only",1)])):d("",!0),s.value.criteria.ageRange?(o(),a("div",et,[t[16]||(t[16]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Age Range",-1)),e("p",tt,i(s.value.criteria.ageRange.min)+" - "+i(s.value.criteria.ageRange.max)+" years",1)])):d("",!0),(R=s.value.criteria.states)!=null&&R.length?(o(),a("div",st,[t[17]||(t[17]=e("h3",{class:"font-medium text-gray-900 mb-2"},"Eligible States",-1)),e("ul",ot,[(o(!0),a(g,null,f(s.value.criteria.states,r=>(o(),a("li",{key:r,class:"text-gray-600 text-sm"}," • "+i(r),1))),128))])])):d("",!0),s.value.criteria.financialNeed?(o(),a("div",it,t[18]||(t[18]=[e("h3",{class:"font-medium text-gray-900 mb-2"},"Financial Need",-1),e("p",{class:"text-gray-600 text-sm"},"Proof of financial need required",-1)]))):d("",!0)])]),e("div",at,[e("h2",rt,[n(c(Z),{class:"h-5 w-5"}),t[20]||(t[20]=e("span",null,"Application Requirements",-1))]),e("ul",lt,[(o(!0),a(g,null,f(s.value.requirements,r=>(o(),a("li",{key:r,class:"flex items-start space-x-3"},[t[21]||(t[21]=e("div",{class:"flex-shrink-0 w-6 h-6 bg-coral-100 rounded-full flex items-center justify-center mt-0.5"},[e("div",{class:"w-2 h-2 bg-coral-500 rounded-full"})],-1)),e("span",nt,i(r),1)]))),128))])]),e("div",dt,[t[22]||(t[22]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Selection Process",-1)),e("div",ct,[e("span",{class:N([A(s.value.selectionProcess),"px-3 py-1 rounded-full text-sm font-medium"])},i(P(s.value.selectionProcess)),3)]),e("p",ut,[s.value.selectionProcess==="merit_based"?(o(),a("span",mt," Candidates are selected based on academic performance and achievements. ")):s.value.selectionProcess==="holistic"?(o(),a("span",pt," Selection considers academic performance, personal background, and overall potential. ")):s.value.selectionProcess==="research_based"?(o(),a("span",xt," Priority given to candidates with strong research proposals and experience. ")):s.value.selectionProcess==="portfolio_based"?(o(),a("span",gt," Selection primarily based on submitted portfolio and creative work quality. ")):d("",!0)])])]),e("div",ft,[e("div",vt,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Info",-1)),e("div",yt,[e("div",_t,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Award Amount",-1)),e("span",ht,"₦"+i(s.value.amount.toLocaleString()),1)]),e("div",bt,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Total Budget",-1)),e("span",wt,"₦"+i(s.value.totalBudget.toLocaleString()),1)]),e("div",kt,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"Remaining Budget",-1)),e("span",St,"₦"+i(s.value.remainingBudget.toLocaleString()),1)]),e("div",At,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Recipients",-1)),e("span",Pt,i(s.value.currentRecipients)+"/"+i(s.value.maxRecipients),1)]),e("div",Ct,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Deadline",-1)),e("span",Rt,i(h(s.value.deadline)),1)])]),e("div",Bt,[e("div",Nt,[t[28]||(t[28]=e("span",null,"Recipients Progress",-1)),e("span",null,i(Math.round(s.value.currentRecipients/s.value.maxRecipients*100))+"%",1)]),e("div",Mt,[e("div",{class:"bg-coral-500 h-2 rounded-full transition-all duration-300",style:J({width:s.value.currentRecipients/s.value.maxRecipients*100+"%"})},null,4)])])]),S.value?(o(),a("div",Lt,[e("div",jt,[n(c(M),{class:"h-5 w-5 text-green-600"}),t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-green-900"},"Perfect Match!",-1))]),t[31]||(t[31]=e("p",{class:"text-green-700 text-sm"}," This opportunity matches your profile perfectly. You meet all the eligibility criteria. ",-1))])):d("",!0),e("div",Ot,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Similar Opportunities",-1)),e("div",Dt,[(o(!0),a(g,null,f(T.value.slice(0,3),r=>(o(),a("div",{key:r.id,class:"border border-gray-100 rounded-lg p-3 hover:bg-gray-50 transition-colors"},[n(m,{to:`/student/offers/${r.id}`,class:"block"},{default:y(()=>[e("h4",Gt,i(r.title),1),e("p",Tt,i(r.sponsorName),1),e("p",Et,"₦"+i(r.amount.toLocaleString()),1)]),_:2},1032,["to"])]))),128))]),n(m,{to:"/student/offers",class:"text-coral-600 hover:text-coral-700 text-sm font-medium mt-4 inline-flex items-center space-x-1"},{default:y(()=>[t[32]||(t[32]=e("span",null,"View all opportunities",-1)),n(c(de),{class:"h-4 w-4"})]),_:1,__:[32]})])])])])):(o(),a("div",ue,[e("div",me,[t[2]||(t[2]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Offer not found",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mt-2"},"The offer you're looking for doesn't exist or has been removed.",-1)),n(m,{to:"/student/offers",class:"bg-coral-500 text-white px-6 py-3 rounded-lg hover:bg-coral-600 transition-colors duration-200 mt-4 inline-block"},{default:y(()=>t[1]||(t[1]=[B(" Browse Other Offers ")])),_:1,__:[1]})])]))]),n(se,{"is-open":u.show,mode:u.mode,item:u.offer,application:u.application,onClose:t[0]||(t[0]=r=>u.show=!1),onSuccess:q},null,8,["is-open","mode","item","application"])]}),_:1},8,["navigation-items"])}}};export{ts as default};
