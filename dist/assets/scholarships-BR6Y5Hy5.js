import{u as H,b as K,r as p,d as W,e as C,w as X,f as Z,c as i,o as u,a as t,i as x,n as T,j as g,k as b,l as N,t as l,m,v as ee,p as v,I as h,F as P,q as R,h as $}from"./index-CXEPaLLm.js";import{u as te}from"./scholarships-BZpBSjz2.js";import{r as B,b as se,a as oe}from"./MagnifyingGlassIcon-Ti1jE2Dj.js";const re={class:"min-h-screen bg-gray-50"},ne={class:"bg-white border-b border-gray-200"},ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},le={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-4"},ue={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},de={class:"flex flex-col lg:flex-row gap-8"},ce={class:"lg:w-80 flex-shrink-0"},pe={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6"},me={class:"mb-6"},ge={class:"relative"},ve={class:"mb-6"},ye={class:"mb-6"},fe={class:"mb-6"},xe={class:"mb-6"},be={class:"mb-6"},he={class:"flex-1"},we={class:"flex items-center justify-between mb-6"},_e={class:"text-gray-600"},Se={class:"flex items-center space-x-4"},ke={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ae={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={class:"p-6"},Ne={class:"flex items-start justify-between mb-4"},De={class:"flex items-center space-x-3"},Ue=["src","alt"],Me={class:"font-semibold text-gray-900"},Te={class:"text-sm text-gray-600"},Ve={class:"flex items-center space-x-2"},je={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},Le=["onClick"],Pe={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Re={class:"space-y-2 mb-4"},$e={class:"flex items-center justify-between text-sm"},Be={class:"font-semibold text-gray-900"},Fe={class:"flex items-center justify-between text-sm"},Ie={class:"font-medium text-gray-900"},Oe={class:"flex items-center justify-between text-sm"},Ye={class:"font-medium text-gray-900"},Ee={class:"flex items-center justify-between text-sm"},Ge={class:"font-medium text-gray-900"},ze={class:"mb-4"},Qe={class:"flex items-center space-x-3"},qe=["onClick"],Je={key:2,class:"text-center py-12"},He={key:3,class:"text-center mt-8"},Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},We={class:"bg-white rounded-xl max-w-md w-full p-6"},Xe={class:"text-gray-600 mb-4"},Ze={class:"flex items-center space-x-3"},et=6,nt={__name:"scholarships",setup(tt){const D=te(),F=H(),V=K(),w=p(!0),_=p(!1),S=p(!1),U=p(null),k=p(1),o=p({search:"",amountRange:"",type:"",duration:"",school:"",course:""}),M=p("deadline"),c=p([]);W(async()=>{await D.initializeScholarships();const r=localStorage.getItem("saved_scholarships");r&&(c.value=JSON.parse(r)),w.value=!1});const I=C(()=>_.value?D.getScholarships.filter(r=>c.value.includes(r.id)):D.getScholarships),y=C(()=>{let r=I.value.filter(e=>{var n,d;if(o.value.search){const a=o.value.search.toLowerCase();if(!e.title.toLowerCase().includes(a)&&!e.description.toLowerCase().includes(a)&&!e.sponsorName.toLowerCase().includes(a))return!1}if(o.value.amountRange){const[a,s]=o.value.amountRange.split("-").map(J=>J.replace("+","")),f=e.amount;if(s){if(f<parseInt(a)||f>parseInt(s))return!1}else if(f<parseInt(a))return!1}return!(o.value.type&&e.type!==o.value.type||o.value.duration&&e.duration!==o.value.duration||o.value.school&&(!((n=e.criteria.schools)!=null&&n.length)||!e.criteria.schools.includes(o.value.school))||o.value.course&&(!((d=e.criteria.courses)!=null&&d.length)||!e.criteria.courses.includes(o.value.course)))});return r.sort((e,n)=>{switch(M.value){case"amount":return n.amount-e.amount;case"created":return new Date(n.createdAt)-new Date(e.createdAt);case"match":const d=A(e)?1:0;return(A(n)?1:0)-d;case"deadline":default:return new Date(e.deadline)-new Date(n.deadline)}}),r}),j=C(()=>{const e=k.value*et;return y.value.slice(0,e)}),O=C(()=>j.value.length<y.value.length),A=r=>{var d,a,s;const e=F.user;if(!e||e.role!=="student")return!1;const n=r.criteria;return!((d=n.schools)!=null&&d.length&&!n.schools.includes(e.school)||(a=n.courses)!=null&&a.length&&!n.courses.includes(e.course)||(s=n.levels)!=null&&s.length&&!n.levels.includes(e.level)||n.minGPA&&e.gpa<n.minGPA||n.gender&&n.gender!=="any"&&e.gender!==n.gender||n.financialNeed&&!e.financialNeed)},Y=r=>{const e=c.value.indexOf(r);e>-1?(c.value.splice(e,1),V.addNotification({type:"info",title:"Scholarship Removed",message:"Scholarship removed from saved list"})):(c.value.push(r),V.addNotification({type:"success",title:"Scholarship Saved",message:"Scholarship added to saved list"})),localStorage.setItem("saved_scholarships",JSON.stringify(c.value))},E=r=>{U.value=r,S.value=!0},L=()=>{o.value={search:"",amountRange:"",type:"",duration:"",school:"",course:""},k.value=1},G=()=>{k.value++},z=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=r=>({full_tuition:"Full Tuition",partial_tuition:"Partial Tuition",stipend:"Stipend",research:"Research Grant"})[r]||r,q=r=>({full_tuition:"bg-green-100 text-green-800",partial_tuition:"bg-blue-100 text-blue-800",stipend:"bg-purple-100 text-purple-800",research:"bg-orange-100 text-orange-800"})[r]||"bg-gray-100 text-gray-800";return X(o,()=>{k.value=1},{deep:!0}),(r,e)=>{var d,a;const n=Z("router-link");return u(),i("div",re,[t("div",ne,[t("div",ae,[t("div",le,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Browse Scholarships"),t("p",{class:"text-gray-600 mt-1"},"Discover scholarship opportunities that match your profile")],-1)),t("div",ie,[t("button",{onClick:e[0]||(e[0]=s=>_.value=!_.value),class:T(["px-4 py-2 rounded-lg font-medium transition-colors",_.value?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[g(N(B),{class:"w-4 h-4 inline mr-2"}),b(" Saved ("+l(c.value.length)+") ",1)],2)])])])]),t("div",ue,[t("div",de,[t("div",ce,[t("div",pe,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),t("div",me,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),t("div",ge,[g(N(se),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.search=s),type:"text",placeholder:"Search scholarships...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[ee,o.value.search]])])]),t("div",ve,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.amountRange=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[12]||(e[12]=[h('<option value="">Any Amount</option><option value="0-100000">₦0 - ₦100,000</option><option value="100000-300000">₦100,000 - ₦300,000</option><option value="300000-500000">₦300,000 - ₦500,000</option><option value="500000+">₦500,000+</option>',5)]),512),[[v,o.value.amountRange]])]),t("div",ye,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.type=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[14]||(e[14]=[h('<option value="">All Types</option><option value="full_tuition">Full Tuition</option><option value="partial_tuition">Partial Tuition</option><option value="stipend">Stipend</option><option value="research">Research Grant</option>',5)]),512),[[v,o.value.type]])]),t("div",fe,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duration",-1)),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.duration=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[16]||(e[16]=[h('<option value="">Any Duration</option><option value="1 year">1 Year</option><option value="2 years">2 Years</option><option value="3 years">3 Years</option><option value="4 years">4 Years</option>',5)]),512),[[v,o.value.duration]])]),t("div",xe,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),m(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.school=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[18]||(e[18]=[h('<option value="">Any School</option><option value="University of Lagos">University of Lagos</option><option value="Obafemi Awolowo University">Obafemi Awolowo University</option><option value="University of Ibadan">University of Ibadan</option><option value="Ahmadu Bello University">Ahmadu Bello University</option>',5)]),512),[[v,o.value.school]])]),t("div",be,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course",-1)),m(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.course=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[20]||(e[20]=[h('<option value="">Any Course</option><option value="Computer Science">Computer Science</option><option value="Engineering">Engineering</option><option value="Medicine">Medicine</option><option value="Mathematics">Mathematics</option><option value="Physics">Physics</option>',6)]),512),[[v,o.value.course]])]),t("button",{onClick:L,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Clear All Filters ")])]),t("div",he,[t("div",we,[t("div",null,[t("p",_e,l(y.value.length)+" scholarship"+l(y.value.length!==1?"s":"")+" found ",1)]),t("div",Se,[m(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>M.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},e[23]||(e[23]=[t("option",{value:"deadline"},"Sort by Deadline",-1),t("option",{value:"amount"},"Sort by Amount",-1),t("option",{value:"created"},"Sort by Newest",-1),t("option",{value:"match"},"Sort by Match",-1)]),512),[[v,M.value]])])]),w.value?(u(),i("div",ke,[(u(),i(P,null,R(6,s=>t("div",{key:s,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse"},e[24]||(e[24]=[t("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-4"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-full mb-2"},null,-1),t("div",{class:"h-3 bg-gray-200 rounded w-2/3"},null,-1)]))),64))])):(u(),i("div",Ae,[(u(!0),i(P,null,R(j.value,s=>(u(),i("div",{key:s.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow"},[t("div",Ce,[t("div",Ne,[t("div",De,[t("img",{src:s.sponsorAvatar,alt:s.sponsorName,class:"w-10 h-10 rounded-full"},null,8,Ue),t("div",null,[t("h3",Me,l(s.title),1),t("p",Te,l(s.sponsorName),1)])]),t("div",Ve,[A(s)?(u(),i("span",je," Perfect Match ")):x("",!0),t("button",{onClick:f=>Y(s.id),class:T(["p-2 rounded-lg transition-colors",c.value.includes(s.id)?"text-primary bg-primary/10":"text-gray-400 hover:text-gray-600"])},[g(N(B),{class:"w-4 h-4"})],10,Le)])]),t("p",Pe,l(s.description),1),t("div",Re,[t("div",$e,[e[25]||(e[25]=t("span",{class:"text-gray-600"},"Amount:",-1)),t("span",Be,"₦"+l(s.amount.toLocaleString()),1)]),t("div",Fe,[e[26]||(e[26]=t("span",{class:"text-gray-600"},"Duration:",-1)),t("span",Ie,l(s.duration),1)]),t("div",Oe,[e[27]||(e[27]=t("span",{class:"text-gray-600"},"Awards Available:",-1)),t("span",Ye,l(s.remainingAwards)+"/"+l(s.numberOfAwards),1)]),t("div",Ee,[e[28]||(e[28]=t("span",{class:"text-gray-600"},"Deadline:",-1)),t("span",Ge,l(z(s.deadline)),1)])]),t("div",ze,[t("span",{class:T([q(s.type),"px-2 py-1 text-xs font-medium rounded-full"])},l(Q(s.type)),3)]),t("div",Qe,[g(n,{to:`/scholarships/${s.id}`,class:"flex-1 px-4 py-2 bg-primary text-white text-center rounded-lg hover:bg-primary/90 transition-colors font-medium"},{default:$(()=>e[29]||(e[29]=[b(" View Details ")])),_:2,__:[29]},1032,["to"]),A(s)?(u(),i("button",{key:0,onClick:f=>E(s),class:"px-4 py-2 border border-primary text-primary rounded-lg hover:bg-primary/5 transition-colors font-medium"}," Quick Apply ",8,qe)):x("",!0)])])]))),128))])),!w.value&&y.value.length===0?(u(),i("div",Je,[g(N(oe),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[30]||(e[30]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No scholarships found",-1)),e[31]||(e[31]=t("p",{class:"text-gray-600 mb-4"},"Try adjusting your filters to see more results",-1)),t("button",{onClick:L,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors"}," Clear Filters ")])):x("",!0),O.value&&!w.value?(u(),i("div",He,[t("button",{onClick:G,class:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Load More Scholarships ")])):x("",!0)])])]),S.value?(u(),i("div",Ke,[t("div",We,[e[35]||(e[35]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Apply",-1)),t("p",Xe,[e[32]||(e[32]=b(" You're about to apply for ")),t("strong",null,l((d=U.value)==null?void 0:d.title),1),e[33]||(e[33]=b(". This will redirect you to the full application page. "))]),t("div",Ze,[t("button",{onClick:e[8]||(e[8]=s=>S.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),g(n,{to:`/scholarships/${(a=U.value)==null?void 0:a.id}?apply=true`,class:"flex-1 px-4 py-2 bg-primary text-white text-center rounded-lg hover:bg-primary/90 transition-colors",onClick:e[9]||(e[9]=s=>S.value=!1)},{default:$(()=>e[34]||(e[34]=[b(" Continue ")])),_:1,__:[34]},8,["to"])])])])):x("",!0)])}}};export{nt as default};
